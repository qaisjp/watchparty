{"version":3,"sources":["utils/index.ts","components/Home/Home.module.css","utils/generateName.ts","components/Chat/Chat.tsx","components/Modal/LoginModal.tsx","components/TopBar/TopBar.tsx","components/VBrowser/data.ts","components/VBrowser/events.ts","components/VBrowser/base.ts","components/VBrowser/VBrowser.tsx","components/VBrowser/index.ts","components/VideoChat/VideoChat.tsx","components/Settings/LocalSettings.tsx","components/Modal/MultiStreamModal.tsx","utils/examples.ts","components/SearchResult/SearchResult.tsx","components/ComboBox/ComboBox.tsx","components/SearchComponent/SearchComponent.tsx","components/Controls/Controls.tsx","components/Modal/SubscribeModal.tsx","components/Modal/VBrowserModal.tsx","components/Modal/PermanentRoomModal.tsx","components/Settings/SettingsTab.tsx","components/Modal/ErrorModal.tsx","components/Modal/PasswordModal.tsx","components/SubscribeButton/SubscribeButton.tsx","components/App/App.tsx","components/Home/Home.tsx","components/PrivacyTerms/PrivacyTerms.tsx","components/Footer/Footer.tsx","serviceWorker.js","index.tsx"],"names":["formatTimestamp","input","undefined","Number","isNaN","Infinity","hours","Math","floor","minutes","toString","padStart","seconds","formatSpeed","toFixed","colorMappings","red","orange","yellow","olive","green","teal","blue","violet","purple","pink","brown","grey","black","colorCache","getColorForStringHex","id","colors","abs","hash","i","length","charCodeAt","hashString","getColorForString","getMediaType","startsWith","testAutoplay","a","canAutoplay","video","result","decodeEntities","DOMParser","parseFromString","documentElement","textContent","debounce","func","wait","immediate","timeout","context","this","args","arguments","later","apply","callNow","clearTimeout","setTimeout","getMediaPathForList","list","match","name","decoded","decodeURIComponent","getDefaultPicture","background","isMobile","window","screen","width","iceServers","urls","username","credential","serverPath","process","REACT_APP_SERVER_HOST","location","protocol","host","getMediaPathResults","mediaPath","query","fetch","response","results","includes","text","xml","parseStringPromise","data","filtered","ListBucketResult","Contents","filter","file","Key","map","url","json","type","option","toLowerCase","getStreamPathResults","streamPath","encodeURIComponent","getYouTubeResults","openFileSelector","accept","Promise","resolve","inputElement","document","createElement","addEventListener","files","dispatchEvent","MouseEvent","getAndSaveClientId","clientId","localStorage","getItem","uuidv4","setItem","module","exports","capFirst","string","charAt","toUpperCase","slice","getRandomInt","min","max","random","generateName","name1","name2","Chat","state","chatMsg","isNearBottom","isPickerOpen","messagesRef","React","createRef","updateChatMsg","_e","setState","value","sendChatMsg","chatTooLong","props","socket","emit","Boolean","onScroll","isChatNearBottom","current","scrollHeight","scrollTop","offsetHeight","scrollToBottom","formatMessage","cmd","msg","Fragment","style","textTransform","getMediaDisplayName","addEmoji","emoji","native","prevProps","scrollTimestamp","hide","className","display","flexDirection","flexGrow","minHeight","marginTop","marginBottom","padding","ref","position","Comment","Group","chat","message","pictureMap","nameMap","timestamp","Button","size","onClick","bottom","margin","PickerMenu","closeMenu","Input","inverted","fluid","onKeyPress","e","key","onChange","error","icon","disabled","isChatDisabled","placeholder","Icon","circular","link","opacity","role","aria-label","Component","ChatMessage","system","Avatar","src","Content","Author","as","Metadata","Date","toLocaleTimeString","Text","PickerMenuInner","handleClickOutside","set","sheetSize","theme","showPreview","showSkinTones","onSelect","onClickOutside","LoginModal","email","password","isCreateMode","resetPassword","firebase","sendPasswordResetEmail","closeLogin","emailSignIn","signInWithEmailAndPassword","createAccount","createUserWithEmailAndPassword","emailLinkSignIn","sendSignInLinkToEmail","href","handleCodeInApp","Modal","open","onClose","Header","Message","color","header","content","Form","Field","target","NewRoomButton","createRoom","method","headers","body","JSON","stringify","reload","Popup","trigger","labelPosition","SignInButton","isLoginOpen","facebookSignIn","provider","FacebookAuthProvider","signInWithPopup","googleSignIn","GoogleAuthProvider","signOut","user","height","basic","Dropdown","labeled","button","Menu","Item","ListRoomsButton","rooms","refreshRooms","getIdToken","token","axios","get","uid","deleteRoom","roomId","delete","room","vanity","replace","marginLeft","paddingLeft","stopPropagation","TopBar","flexWrap","paddingBottom","marginRight","borderRadius","backgroundColor","top","alignItems","fontWeight","fontSize","lineHeight","rel","title","hideNewRoom","hideMyRooms","hideSignin","OPCODE","EVENT","DISCONNECT","ANSWER","PROVIDE","LOCKED","RELEASE","REQUEST","REQUESTING","CLIPBOARD","GIVE","CONFIGURATIONS","RESOLUTION","SET","BAN","KICK","LOCK","UNLOCK","MUTE","UNMUTE","CONTROL","BaseClient","_ws","_peer","_channel","_timeout","_displayname","_state","_id","displayname","socketOpen","supported","Error","WebSocket","onmessage","onMessage","bind","onerror","event","onError","onclose","onDisconnected","onTimeout","err","close","peerConnected","connected","buffer","payload","ArrayBuffer","DataView","setUint8","setUint16","x","y","setInt16","send","sdp","lite","servers","RTCPeerConnection","onconnectionstatechange","connectionState","onsignalingstatechange","signalingState","oniceconnectionstatechange","iceConnectionState","onConnected","ontrack","onTrack","addTransceiver","direction","createDataChannel","onData","setRemoteDescription","createAnswer","then","d","setLocalDescription","catch","readyState","parse","ice","createPeer","track","kind","streams","label","reason","disconnect","prototype","OPEN","EventEmitter","VBrowser","focused","fullscreen","activeKeys","Set","controlling","scroll","scroll_invert","rate","keepAliveInterval","_container","_overlay","_video","$client","NekoClient","takeControl","sendMessage","once","changeResolution","resString","split","onFocus","navigator","clipboard","readText","onBlur","forEach","sendData","preventDefault","onContextMenu","onMousePos","w","h","rect","getBoundingClientRect","round","clientX","left","clientY","onWheel","deltaX","deltaY","onMouseDown","onMouseUp","onMouseMove","onMouseEnter","focus","onMouseLeave","blur","getCode","keyCode","onKeyDown","add","onKeyUp","onResize","setInterval","on","login","setResolution","stream","getElementById","srcObject","doPlay","onClipboardChanged","hostname","passive","resolution","clearInterval","removeAllListeners","logout","writeText","tabIndex","clientWidth","clientHeight","scrollbarWidth","connect","console","warn","log","configurations","VideoChat","ourStream","videoRefs","videoPCs","handleSignal","from","pc","addIceCandidate","RTCIceCandidate","RTCSessionDescription","answer","sendSignal","localDescription","setupWebRTC","canvas","Object","assign","getContext","fillRect","captureStream","getVideoTracks","enabled","MediaStream","mediaDevices","getUserMedia","audio","stopWebRTC","getTracks","stop","keys","toggleVideoWebRTC","getVideoWebRTC","toggleAudioWebRTC","getAudioTracks","getAudioWebRTC","updateWebRTC","participants","isVideoChat","addStream","onicecandidate","candidate","onaddstream","onnegotiationneeded","createOffer","offer","to","off","rosterUpdateTS","tsMap","videoChatContentStyle","objectFit","overflow","justifyContent","p","el","autoPlay","muted","data-id","alt","backdropFilter","textOverflow","whiteSpace","getCurrentSettings","setting","settings","validateSettingsString","settingObject","updateSettings","newSetting","MultiStreamModal","setMedia","resetMultiSelect","closeIcon","Loader","List","Description","toLocaleString","examples","lastIndexOf","YouTubeSearchResult","img","MediaPathSearchResult","StreamPathSearchResult","launchMultiSelect","magnet","metadata","multiStreamSelection","sort","b","localeCompare","Label","empty","seeders","ComboBox","inputMedia","loading","lastResultTimestamp","debounced","doSearch","persist","currentMedia","select","vertical","maxHeight","zIndex","SearchComponent","resetDropdown","search","onSearchChange","Controls","showTimestamp","currTimestamp","posTimestamp","onMouseOver","onMouseOut","pct","duration","togglePlay","onSeek","fullScreen","toggleMute","toggleSubtitle","jumpToLeader","paused","subtitled","currentTime","leaderTime","isPauseDisabled","isBehind","Progress","minWidth","total","pointerEvents","pointing","transform","getVolume","step","setVolume","stripePromise","loadStripe","SubscribeModal","onSubscribe","stripe","redirectToCheckout","lineItems","price","quantity","mode","successUrl","cancelUrl","customerEmail","clientReferenceId","isSubscriber","closeSubscribe","image","Table","definition","unstackable","striped","celled","Row","HeaderCell","Body","Cell","textAlign","VBrowserModal","isVMPoolFull","resp","closeModal","startVBrowser","LaunchButton","withGoogleReCaptcha","googleReCaptchaProps","large","executeRecaptcha","rcToken","vmPoolFullMessage","reCaptchaKey","useRecaptchaNet","subscribeButton","PermanentRoomModal","SettingsTab","roomLock","setRoomLock","setChatDisabled","useState","updateTS","setUpdateTS","permModalOpen","setPermModalOpen","setVanity","setPassword","setIsChatDisabled","owner","setOwner","validVanity","setValidVanity","validVanityLoading","setValidVanityLoading","roomLink","setRoomLink","useEffect","getRoomLink","origin","handleRoomState","history","replaceState","setRoomState","useCallback","setRoomOwner","checkValidVanity","lockDisabled","permanentDisabled","description","checked","helpIcon","cursor","undo","subOnly","action","primary","disableChatSound","SettingRow","Divider","horizontal","Radio","toggle","ErrorModal","PasswordModal","savedPasswords","SubscribeButton","isCustomer","openSubscribeModal","openManage","App","currentMediaPaused","currentSubtitle","myName","myPicture","controlsTimestamp","watchOptions","isScreenSharing","isScreenSharingFile","isVBrowser","isYouTubeReady","isAutoPlayable","downloaded","speed","connections","isErrorAuth","vBrowserResolution","isVBrowserLarge","nonPlayableMedia","currentTab","querystring","substring","tab","isSubscribeModalOpen","isVBrowserModalOpen","controller","errorMessage","successMessage","showRightBar","watchPartyYTPlayer","ytDebounce","screenShareStream","screenHostPC","screenSharePC","progressUpdater","heartbeat","loadSettings","customSettingsData","customSettings","loadSignInData","firstName","displayName","updateName","photoURL","updatePicture","updateUid","loadYouTube","tag","firstScriptTag","getElementsByTagName","parentNode","insertBefore","onYouTubeIframeAPIReady","ytPlayer","YT","Player","events","onReady","isYouTube","onStateChange","PlayerState","CUED","PLAYING","PAUSED","doPause","init","join","savedPasswordsString","shard","test","exec","io","transports","userName","success","doSeek","isSubtitled","isScreenShare","stopScreenShare","isFileShare","stopVBrowser","subtitle","getVBrowserHost","setLoadingFalse","leftVideo","pause","stopVideo","doSrc","videoTS","visibilityState","Audio","play","push","syncSubtitle","updateScreenShare","sharer","sendSignalSS","getCurrentTime","setupFileShare","URL","createObjectURL","onaddtrack","onended","setupScreenShare","getDisplayMedia","logicalSurface","values","find","options","changeController","setSubtitle","reader","FileReader","subData","readAsText","isVideo","isHttp","getVBrowserPass","getDuration","isPaused","ended","getPlayerState","ENDED","isMuted","textTracks","getOption","languageCode","maxTS","getLeaderTime","time","innerHTML","videoId","altVideoId","cueVideoById","setMute","playVideo","pauseVideo","seekTo","shouldPlay","onFullScreenChange","fullscreenElement","onKeydown","activeElement","tagName","bVideoOnly","container","requestFullscreen","bChangeElements","exitFullscreen","mute","unMute","volume","loadSubtitles","subtitleSrc","subtitlePath","getFileName","arrayBuffer","vttConverter","VTTConverter","Blob","getURL","srclang","appendChild","offset","cues","cue","origStart","startTime","origEnd","endTime","setOption","tracks","magnetUrl","torrent","decode","onManage","return_url","session","locked","haveLock","val","onfullscreenchange","onkeydown","removeEventListener","controls","displayRightContent","rightBar","Grid","Column","visibility","widths","active","negative","right","positive","stackable","clearable","selection","Dimmer","allowFullScreen","frameBorder","allow","Separator","flexShrink","Home","styles","heroText","subText","featureSection","Step","Title","Feature","flex","fitted","featureTitle","featureText","Hero","hero","heroInner","mdStyle","maxWidth","Privacy","Terms","FAQ","Footer","Debug","lazy","firebaseConfig","initializeApp","WatchParty","auth","onAuthStateChanged","StrictMode","path","exact","render","params","fallback","ReactDOM","serviceWorker","ready","registration","unregister"],"mappings":"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ACA,cACA,WACA,aACA,YACA,eACA,WACA,SACA,SACA,YACA,SACA,SACA,QACA,YACA,UACA,aACA,WACA,SACA,WACA,SACA,eACA,OACA,cACA,aACA,QACA,WACA,YACA,YACA,OACA,UACA,WACA,QACA,YACA,QACA,MACA,aACA,UACA,YACA,QACA,SACA,UACA,WACA,UACA,UACA,QACA,YACA,WACA,SACA,UACA,UACA,UACA,MACA,eACA,cACA,MACA,SACA,OACA,WACA,WACA,UACA,UACA,cACA,WACA,WACA,YACA,aACA,UACA,YACA,aACA,YACA,aACA,UACA,QACA,UACA,QACA,UACA,UACA,MACA,OACA,QACA,OACA,SACA,QACA,YACA,UACA,UACA,aACA,SACA,OACA,YACA,MACA,cACA,gBACA,aACA,SACA,QACA,kBACA,QACA,QACA,UACA,QACA,QACA,WACA,QACA,OACA,WACA,QACA,UACA,OACA,OACA,SACA,QACA,OACA,SACA,YACA,QACA,QACA,YACA,QACA,SACA,YACA,QACA,SACA,SACA,QACA,UACA,SACA,QACA,QACA,UACA,aACA,QACA,WACA,OACA,UACA,UACA,cACA,OACA,SACA,SACA,UACA,WACA,UACA,WACA,SACA,WACA,YACA,aACA,WACA,QACA,WACA,SACA,QACA,SACA,SACA,WACA,UACA,QACA,QACA,YACA,SACA,QACA,SACA,SACA,WACA,SACA,YACA,SACA,OACA,WACA,YACA,WACA,cACA,SACA,gBACA,YACA,WACA,UACA,cACA,WACA,YACA,WACA,WACA,YACA,cACA,WACA,UACA,eACA,SACA,OACA,cACA,cACA,QACA,UACA,SACA,aACA,YACA,SACA,QACA,SACA,WACA,SACA,WACA,QACA,WACA,UACA,UACA,QACA,WACA,SACA,aACA,WACA,aACA,QACA,QACA,OACA,cACA,UACA,OACA,YACA,SACA,SACA,UACA,OACA,WACA,OACA,SACA,YACA,OACA,UACA,SACA,UACA,WACA,OACA,cACA,YACA,UACA,YACA,WACA,aACA,UACA,aACA,YACA,aACA,YACA,YACA,QACA,SACA,aACA,YACA,cACA,WACA,WACA,aACA,UACA,YACA,YACA,UACA,WACA,MACA,UACA,YACA,SACA,aACA,WACA,aACA,aACA,WACA,SACA,UACA,YACA,SACA,QACA,YACA,YACA,SACA,UACA,WACA,YACA,QACA,QACA,SACA,SACA,YACA,OACA,SACA,WACA,SACA,SACA,MACA,OACA,OACA,UACA,OACA,QACA,UACA,QACA,OACA,aACA,WACA,SACA,WACA,YACA,UACA,SACA,UACA,WACA,UACA,aACA,aACA,cACA,cACA,UACA,YACA,QACA,YACA,aACA,YACA,cACA,WACA,UACA,SACA,UACA,QACA,aACA,YACA,WACA,UACA,WACA,OACA,YACA,cACA,QACA,OACA,UACA,YACA,YACA,YACA,YACA,UACA,WACA,SACA,YACA,cACA,SACA,aACA,cACA,cACA,cACA,WACA,UACA,QACA,OACA,WACA,OACA,QACA,WACA,SACA,QACA,YACA,MACA,UACA,YACA,UACA,OACA,MACA,QACA,WACA,YACA,WACA,UACA,WACA,SACA,SACA,SACA,WACA,MACA,SACA,SACA,OACA,WACA,OACA,QACA,YACA,UACA,QACA,QACA,aACA,SACA,OACA,SACA,WACA,aACA,SACA,WACA,UACA,SACA,QACA,YACA,UACA,OACA,YACA,UACA,WACA,SACA,SACA,WACA,aACA,YACA,WACA,QACA,QACA,SACA,OACA,SACA,QACA,WACA,WACA,aACA,cACA,SACA,SACA,SACA,YACA,QACA,SACA,SACA,SACA,WACA,OACA,WACA,aACA,QACA,QACA,QACA,aACA,UACA,UACA,WACA,SACA,UACA,QACA,QACA,WACA,SACA,SACA,YACA,UACA,QACA,WACA,UACA,aACA,aACA,SACA,WACA,SACA,OACA,SACA,OACA,eACA,WACA,WACA,WACA,QACA,YACA,WACA,WACA,QACA,OACA,QACA,SACA,QACA,aACA,OACA,QACA,WACA,WACA,QACA,YACA,UACA,WACA,UACA,WACA,QACA,SACA,WACA,SACA,SACA,WACA,QACA,QACA,OACA,WACA,WACA,QACA,QACA,iBACA,OACA,eACA,UACA,WACA,aACA,QACA,QACA,UACA,WACA,UACA,YACA,SACA,WACA,QACA,QACA,UACA,WACA,SACA,UACA,OACA,aACA,YACA,SACA,SACA,SACA,SACA,YACA,UACA,UACA,WACA,aACA,MACA,OACA,SACA,cACA,UACA,YACA,SACA,UACA,QACA,OACA,MACA,QACA,aACA,YACA,OACA,UACA,WACA,WACA,MACA,UACA,YACA,eACA,aACA,cACA,YACA,cACA,aACA,aACA,YACA,UACA,cACA,aACA,YACA,YACA,gBACA,SACA,WACA,YACA,aACA,cACA,iBACA,aACA,aACA,SACA,SACA,eACA,eACA,aACA,kBACA,aACA,YACA,gBACA,WACA,WACA,YACA,aACA,WACA,WACA,WACA,WACA,WACA,YACA,gBACA,YACA,cACA,gBACA,cACA,SACA,cACA,cACA,WACA,gBACA,WACA,WACA,gBACA,aACA,QACA,QACA,SACA,aACA,SACA,UACA,UACA,QACA,QACA,SACA,SACA,SACA,WACA,YACA,QACA,QACA,SACA,QACA,WACA,gBACA,OACA,MACA,OACA,cACA,SACA,SACA,SACA,SACA,gBACA,UACA,QACA,QACA,SACA,OACA,QACA,QACA,OACA,UACA,OACA,SACA,SACA,OACA,UACA,OACA,QACA,OACA,QACA,aACA,QACA,eACA,UACA,SACA,UACA,OACA,UACA,SACA,QACA,SACA,SACA,OACA,SACA,QACA,YACA,OACA,SACA,OACA,YACA,QACA,WACA,OACA,OACA,UACA,SACA,SACA,MACA,QACA,QACA,YACA,WACA,QACA,WACA,YACA,MACA,UACA,cACA,WACA,QACA,OACA,UACA,UACA,YACA,YACA,UACA,SACA,SACA,QACA,OACA,SACA,QACA,UACA,WACA,SACA,OACA,SACA,UACA,YACA,WACA,QACA,QACA,WACA,OACA,QACA,WACA,YACA,QACA,QACA,YACA,UACA,YACA,QACA,QACA,SACA,SACA,QACA,YACA,UACA,aACA,QACA,YACA,WACA,aACA,cACA,QACA,UACA,eACA,UACA,QACA,QACA,QACA,QACA,aACA,QACA,SACA,QACA,UACA,UACA,WACA,OACA,OACA,YACA,QACA,WACA,YACA,aACA,cACA,UACA,MACA,OACA,OACA,QACA,SACA,QACA,YACA,QACA,UACA,SACA,UACA,QACA,aACA,QACA,UACA,OACA,aACA,QACA,WACA,QACA,SACA,OACA,SACA,UACA,aACA,MACA,UACA,UACA,YACA,WACA,MACA,gBACA,OACA,OACA,UACA,aACA,UACA,SACA,UACA,UACA,SACA,SACA,WACA,WACA,QACA,MACA,WACA,WACA,aACA,aACA,cACA,OACA,aACA,UACA,YACA,aACA,YACA,OACA,SACA,WACA,UACA,UACA,aACA,OACA,SACA,WACA,UACA,UACA,WACA,WACA,QACA,WACA,YACA,QACA,cACA,QACA,QACA,WACA,WACA,OACA,UACA,QACA,YACA,UACA,UACA,WACA,UACA,WACA,QACA,QACA,WACA,SACA,YACA,UACA,YACA,SACA,OACA,UACA,SACA,OACA,WACA,WACA,UACA,WACA,YACA,YACA,WACA,UACA,cACA,SACA,WACA,WACA,SACA,UACA,UACA,QACA,WACA,UACA,QACA,WACA,aACA,aACA,UACA,SACA,QACA,UACA,WACA,UACA,OACA,OACA,SACA,QACA,SACA,UACA,WACA,SACA,YACA,cACA,YACA,SACA,YACA,eACA,QACA,eACA,QACA,iBACA,SACA,WACA,YACA,UACA,SACA,QACA,OACA,OACA,MACA,SACA,WACA,cACA,QACA,OACA,YACA,aACA,MACA,aACA,QACA,UACA,WACA,WACA,aACA,aACA,SACA,YACA,WACA,aACA,cACA,YACA,YACA,YACA,OACA,QACA,QACA,SACA,OACA,UACA,SACA,OACA,WACA,SACA,QACA,QACA,QACA,QACA,UACA,UACA,QACA,OACA,QACA,QACA,QACA,MACA,OACA,QACA,OACA,QACA,OACA,YACA,WACA,YACA,QACA,SACA,SACA,QACA,UACA,YACA,aACA,WACA,WACA,UACA,SACA,YACA,cACA,SACA,eACA,eACA,UACA,cACA,WACA,SACA,UACA,aACA,UACA,SACA,SACA,UACA,QACA,UACA,WACA,YACA,QACA,aACA,QACA,UACA,WACA,SACA,QACA,aACA,QACA,SACA,MACA,OACA,SACA,QACA,QACA,SACA,UACA,SACA,aACA,SACA,SACA,WACA,WACA,SACA,SACA,SACA,OACA,QACA,WACA,OACA,SACA,QACA,QACA,SACA,SACA,OACA,SACA,WACA,SACA,YACA,SACA,WACA,OACA,QACA,QACA,SACA,OACA,YACA,gBACA,OACA,YACA,UACA,QACA,OACA,UACA,YACA,SACA,WACA,cACA,SACA,QACA,SACA,WACA,WACA,WACA,WACA,UACA,OACA,SACA,UACA,WACA,SACA,QACA,UACA,QACA,WACA,UACA,QACA,SACA,QACA,SACA,QACA,cACA,SACA,SACA,WACA,UACA,QACA,SACA,WACA,WACA,UACA,SACA,WACA,WACA,aACA,SACA,SACA,UACA,UACA,aACA,cACA,SACA,WACA,SACA,SACA,QACA,QACA,SACA,cACA,WACA,aACA,cACA,YACA,aACA,SACA,SACA,QACA,aACA,QACA,cACA,OACA,YACA,OACA,MACA,WACA,OACA,QACA,WACA,OACA,UACA,UACA,WACA,SACA,QACA,QACA,WACA,WACA,QACA,WACA,OACA,QACA,QACA,OACA,QACA,UACA,OACA,WACA,SACA,QACA,aACA,aACA,UACA,aACA,OACA,QACA,SACA,SACA,OACA,QACA,OACA,QACA,QACA,YACA,YACA,aACA,SACA,UACA,aACA,aACA,SACA,WACA,OACA,UACA,WACA,OACA,WACA,cACA,SACA,WACA,QACA,YACA,OACA,OACA,WACA,eACA,UACA,gBACA,WACA,cACA,cACA,YACA,SACA,aACA,QACA,WACA,cACA,UACA,YACA,UACA,cACA,SACA,SACA,UACA,UACA,WACA,UACA,UACA,YACA,aACA,cACA,SACA,SACA,YACA,YACA,WACA,SACA,SACA,WACA,UACA,SACA,SACA,UACA,YACA,WACA,YACA,YACA,YACA,SACA,UACA,QACA,QACA,SACA,OACA,SACA,UACA,WACA,QACA,SACA,QACA,OACA,QACA,WACA,QACA,WACA,OACA,UACA,YACA,WACA,aACA,UACA,UACA,aACA,WACA,WACA,aACA,SACA,UACA,UACA,WACA,UACA,QACA,YACA,QACA,aACA,MACA,UACA,OACA,cACA,SACA,OACA,WACA,WACA,cACA,SACA,OACA,UACA,OACA,QACA,SACA,MACA,SACA,QACA,UACA,QACA,UACA,kBACA,eACA,gBACA,WACA,YACA,WACA,aACA,YACA,MACA,QACA,YACA,YACA,YACA,QACA,QACA,WACA,SACA,OACA,YACA,SACA,OACA,UACA,SACA,UACA,QACA,SACA,OACA,OACA,QACA,SACA,SACA,YACA,SACA,QACA,QACA,UACA,OACA,UACA,YACA,QACA,QACA,YACA,aACA,SACA,WACA,WACA,WACA,QACA,MACA,UACA,SACA,SACA,YACA,QACA,WACA,QACA,OACA,UACA,QACA,SACA,SAGEC,EAAQ,CACV,SACA,UACA,MACA,MACA,QACA,cACA,MACA,SACA,aACA,SACA,SACA,WACA,OACA,OACA,SACA,QACA,SACA,UACA,SACA,OACA,OACA,gBACA,SACA,MACA,OACA,aACA,UACA,WACA,UACA,YACA,QACA,UACA,YACA,OACA,WACA,aACA,UACA,UACA,SACA,OACA,UACA,OACA,cACA,aACA,OACA,UACA,WACA,QACA,WACA,QACA,QACA,OACA,YACA,aACA,SACA,UACA,cACA,WACA,aACA,SACA,UACA,QACA,OACA,WACA,UACA,OACA,QACA,eACA,YACA,UACA,WACA,SACA,SACA,UACA,QACA,YACA,YACA,WACA,aACA,OACA,SACA,UACA,QACA,cACA,QACA,WACA,QACA,QACA,YACA,aACA,UACA,UACA,aACA,aACA,OACA,OACA,WACA,UACA,SACA,SACA,WACA,OACA,cACA,UACA,UACA,WACA,aACA,UACA,gBACA,QACA,YACA,UACA,OACA,SACA,SACA,OACA,OACA,OACA,cACA,WACA,UACA,WACA,YACA,YACA,OACA,SACA,WACA,WACA,YACA,WACA,QACA,WACA,WACA,UACA,OACA,cACA,eACA,gBACA,SACA,aACA,YACA,OACA,WACA,YACA,UACA,eACA,cACA,cACA,SACA,SACA,SACA,WACA,YACA,eACA,WACA,OACA,SACA,SACA,UACA,OACA,SACA,UACA,QACA,QACA,aACA,cACA,UACA,WACA,QACA,aACA,UACA,YACA,YACA,OACA,QACA,SACA,QACA,SACA,aACA,aACA,UACA,UACA,UACA,iBACA,YACA,QACA,YACA,SACA,cACA,OACA,SACA,QACA,SACA,aACA,cACA,QACA,cACA,QACA,SACA,SACA,QACA,aACA,aACA,cACA,UACA,aACA,WACA,UACA,KACA,SACA,UACA,aACA,YACA,OACA,cACA,SACA,WACA,YACA,WACA,iBACA,SACA,WACA,WACA,cACA,aACA,iBACA,WACA,YACA,UACA,UACA,UACA,WACA,YACA,WACA,WACA,UACA,OACA,aACA,aACA,cACA,QACA,QACA,YACA,SACA,WACA,aACA,cACA,QACA,cACA,QACA,UACA,aACA,SACA,WACA,OACA,YACA,QACA,QACA,YACA,WACA,SACA,aACA,QACA,WACA,SACA,WACA,WACA,QACA,QACA,QACA,WACA,aACA,aACA,UACA,YACA,UACA,aACA,YACA,QACA,UACA,aACA,YACA,eACA,WACA,UACA,WACA,WACA,QACA,SACA,aACA,OACA,UACA,YACA,YACA,UACA,SACA,iBACA,SACA,UACA,SACA,WACA,SACA,aACA,aACA,SACA,WACA,SACA,WACA,SACA,MACA,UACA,aACA,eACA,YACA,aACA,eACA,aACA,UACA,UACA,SACA,SACA,SACA,QACA,UACA,YACA,SACA,UACA,SACA,SACA,UACA,OACA,UACA,aACA,WACA,MACA,cACA,OACA,MACA,SACA,SACA,SACA,cACA,YACA,QACA,QACA,WACA,aACA,eACA,SACA,YACA,eACA,OACA,QACA,OACA,UACA,SACA,OACA,WACA,UACA,cACA,UACA,aACA,WACA,UACA,YACA,eACA,WACA,aACA,QACA,cACA,SACA,OACA,OACA,OACA,YACA,WACA,SACA,cACA,cACA,eACA,OACA,aACA,MACA,OACA,WACA,WACA,YACA,cACA,aACA,QACA,MACA,SACA,MACA,UACA,UACA,SACA,SACA,SACA,aACA,SACA,QACA,QACA,YACA,aACA,eACA,SACA,UACA,OACA,SACA,gBACA,cACA,UACA,UACA,QACA,aACA,cACA,eACA,SACA,aACA,YACA,OACA,SACA,OACA,UACA,QACA,SACA,aACA,YACA,WACA,WACA,cACA,QACA,SACA,cACA,SACA,WACA,UACA,SACA,WACA,UACA,QACA,aACA,YACA,WACA,UACA,OACA,WACA,cACA,eACA,QACA,SACA,cACA,YACA,UACA,OACA,MACA,UACA,aACA,UACA,OACA,aACA,MACA,aACA,YACA,OACA,WACA,cACA,aACA,YACA,QACA,WACA,OACA,YACA,cACA,aACA,QACA,UACA,WACA,UACA,WACA,OACA,SACA,UACA,QACA,QACA,OACA,OACA,OACA,QACA,QACA,UACA,QACA,WACA,QACA,OACA,OACA,OACA,MACA,MACA,QACA,SACA,OACA,QACA,OACA,OACA,UACA,OACA,OACA,aACA,MACA,OACA,MACA,QACA,OACA,OACA,UACA,QACA,OACA,SACA,QACA,WACA,QACA,QACA,SACA,UACA,QACA,OACA,OACA,OACA,OACA,QACA,OACA,OACA,QACA,OACA,OACA,MACA,QACA,MACA,QACA,WACA,OACA,SACA,MACA,SACA,QACA,QACA,WACA,WACA,QACA,UACA,QACA,MACA,OACA,QACA,MACA,QACA,OACA,OACA,OACA,SACA,QACA,QACA,SACA,OACA,OACA,QACA,MACA,UACA,SACA,SACA,QACA,OACA,SACA,SACA,OACA,SACA,WACA,QACA,OACA,QACA,QACA,SACA,MACA,MACA,OACA,SACA,SACA,UACA,WACA,QACA,OACA,QACA,SACA,OACA,QACA,MACA,OACA,UACA,QACA,OACA,QACA,UACA,SACA,SACA,MACA,QACA,SACA,YACA,QACA,UACA,UACA,SACA,UACA,OACA,WACA,UACA,WACA,OACA,OACA,MACA,QACA,MACA,MACA,SACA,QACA,MACA,OACA,SACA,OACA,QACA,QACA,MACA,OACA,QACA,OACA,SACA,UACA,WACA,MACA,WACA,MACA,OACA,WACA,WACA,SACA,YACA,UACA,MACA,QACA,QACA,OACA,QACA,OACA,OACA,QACA,QACA,SACA,OACA,SACA,YACA,OACA,UACA,OACA,aACA,SACA,QACA,UACA,MACA,QACA,SACA,SACA,OACA,SACA,UACA,QACA,OACA,OACA,UACA,UACA,SACA,UACA,UACA,MACA,OACA,QACA,OACA,YACA,UACA,SACA,MACA,OACA,MACA,UACA,QACA,SACA,UACA,OACA,SACA,OACA,OACA,OACA,QACA,UACA,YACA,SACA,OACA,OACA,QACA,SACA,OACA,QACA,WACA,OACA,SACA,QACA,UACA,OACA,SACA,QACA,QACA,QACA,OACA,QACA,SACA,QACA,SACA,OACA,MACA,YACA,SACA,OACA,OACA,OACA,SACA,WACA,UACA,OACA,UACA,QACA,QACA,SACA,OACA,SACA,SACA,SACA,WACA,OACA,SACA,SACA,SACA,UACA,QACA,YACA,WACA,MACA,QACA,QACA,QACA,UACA,OACA,SACA,WACA,YACA,OACA,OACA,WACA,MACA,SACA,OACA,UACA,QACA,SACA,OACA,OACA,UACA,OACA,OACA,SACA,OACA,aACA,QACA,OACA,SACA,QACA,QACA,QACA,SACA,SACA,MACA,WACA,UACA,OACA,YACA,SACA,QACA,OACA,QACA,UACA,OACA,MACA,SACA,MACA,QACA,YACA,WACA,OACA,SACA,SACA,SACA,SACA,OACA,OACA,OACA,QACA,aACA,OACA,OACA,UACA,OACA,WACA,UACA,MACA,QACA,SACA,QACA,SACA,OACA,QACA,OACA,YACA,aACA,WACA,SACA,SACA,MACA,QACA,OACA,QACA,SACA,MACA,UACA,OACA,QACA,OACA,OACA,QACA,QACA,OACA,SACA,QACA,YACA,OACA,QACA,YACA,MACA,QACA,QACA,QACA,QACA,gBACA,QACA,OACA,SACA,OACA,YACA,MACA,OACA,UACA,OACA,WACA,QACA,QACA,MACA,OACA,SACA,OACA,OACA,SACA,QACA,OACA,OACA,QACA,OACA,WACA,YACA,MACA,OACA,UACA,SACA,QACA,MACA,WACA,OACA,OACA,SACA,SACA,YACA,OACA,OACA,YACA,QACA,UACA,MACA,SACA,UACA,OACA,UACA,UACA,UACA,OACA,UACA,WACA,WACA,YACA,MACA,SACA,UACA,MACA,SACA,MACA,OACA,SACA,OACA,OACA,QACA,WACA,YACA,QACA,OACA,YACA,UACA,YACA,OACA,QACA,MACA,QACA,UACA,SACA,QACA,OACA,UACA,OACA,UACA,WACA,OACA,QACA,WACA,UACA,UACA,QACA,SACA,QACA,OACA,SACA,OACA,WACA,WACA,QACA,UACA,SACA,UACA,QACA,WACA,OACA,QACA,OACA,MACA,QACA,YACA,MACA,OACA,SACA,SACA,SACA,UACA,QACA,QACA,OACA,QACA,QACA,WACA,QACA,OACA,SACA,QACA,MACA,OACA,QACA,OACA,QACA,QACA,YACA,SACA,OACA,OACA,SACA,UACA,SACA,UACA,MACA,OACA,QACA,UACA,SACA,QACA,UACA,OACA,SACA,SACA,OACA,QACA,SACA,OACA,MACA,OACA,OACA,QACA,MACA,QACA,QACA,SACA,OACA,SACA,UACA,aACA,QACA,OACA,OACA,OACA,QACA,SACA,QACA,UACA,WACA,QACA,OACA,QACA,OACA,QACA,SACA,MACA,WACA,QACA,QACA,QACA,WACA,OACA,aACA,UACA,UACA,OACA,QACA,OACA,UACA,OACA,QACA,SACA,QACA,SACA,QACA,QACA,UACA,UACA,SACA,cACA,OACA,OACA,SACA,UACA,OACA,SACA,OACA,UACA,QACA,SACA,OACA,OACA,QACA,QACA,OACA,aACA,SACA,SACA,QACA,OACA,OACA,QACA,QACA,MACA,SACA,OACA,MACA,OACA,QACA,SACA,MACA,WACA,UACA,QACA,UACA,MACA,QACA,WACA,WACA,QACA,QACA,MACA,OACA,YACA,WACA,SACA,OACA,OACA,MACA,MACA,OACA,QACA,QACA,UACA,MACA,QACA,SACA,QACA,UACA,WACA,SACA,OACA,OACA,OACA,OACA,SACA,SACA,OACA,UACA,MACA,QACA,QACA,UACA,MACA,OACA,QACA,MACA,OACA,OACA,OACA,OACA,KACA,QACA,QACA,QACA,SACA,OACA,OACA,QACA,OACA,QACA,QACA,UACA,WACA,OACA,OACA,OACA,OACA,MACA,SACA,MACA,SACA,SACA,OACA,MACA,WACA,aACA,QACA,WACA,UACA,WACA,MACA,UACA,WACA,OACA,MACA,QACA,SACA,OACA,OACA,MACA,MACA,WACA,SACA,aACA,OACA,MACA,MACA,QACA,OACA,OACA,QACA,YACA,eACA,gBACA,SACA,OACA,cACA,UACA,UACA,QACA,QACA,SACA,OACA,aACA,MACA,WACA,OACA,UACA,QACA,OACA,YACA,WACA,UACA,SACA,UACA,QACA,OACA,WACA,OACA,OACA,QACA,QACA,UACA,OACA,SACA,SACA,MACA,UACA,MACA,YACA,SACA,UACA,UACA,cACA,QACA,WACA,QACA,OACA,QACA,QACA,YACA,SACA,SACA,QACA,WACA,OACA,OACA,QACA,SACA,SACA,QACA,SACA,OACA,OACA,QACA,SACA,OACA,SACA,UACA,QACA,OACA,MACA,UACA,OACA,QACA,UACA,UACA,WACA,MACA,WACA,QACA,cACA,OACA,OACA,OACA,QACA,QACA,QACA,OACA,SACA,WACA,QACA,SACA,UACA,OACA,UACA,OACA,SACA,SACA,QACA,OACA,SACA,SACA,SACA,QACA,OACA,QACA,OACA,UACA,OACA,MACA,YACA,QACA,QACA,SACA,WACA,MACA,OACA,UACA,OACA,WACA,MACA,OACA,SACA,OACA,OACA,WACA,OACA,QACA,SACA,QACA,QACA,OACA,QACA,OACA,OACA,UACA,QACA,QACA,QACA,YACA,UACA,UACA,OACA,SACA,OACA,QACA,MACA,OACA,WACA,OACA,OACA,YACA,MACA,MACA,SACA,QACA,WACA,OACA,QACA,QACA,QACA,OACA,MACA,OACA,QACA,OACA,QACA,SACA,SACA,QACA,OACA,QACA,OACA,UACA,UACA,SACA,QACA,OACA,QACA,QACA,OACA,UACA,UACA,MACA,SACA,aACA,OACA,OACA,UACA,QACA,UACA,YACA,SACA,MACA,QACA,QACA,QACA,SACA,SACA,OACA,QACA,SACA,QACA,MACA,UACA,OACA,SACA,SACA,WACA,OACA,UACA,QACA,MACA,SACA,QACA,WACA,UACA,QACA,SACA,QACA,SACA,WACA,OACA,QACA,QACA,OACA,SACA,UACA,QACA,YACA,OACA,QACA,OACA,OACA,OACA,SACA,QACA,UACA,UACA,OACA,OACA,OACA,QACA,UACA,QACA,QACA,QACA,WACA,QACA,SACA,QACA,OACA,cACA,WACA,QACA,OACA,OACA,SACA,QACA,SACA,SACA,SACA,OACA,QACA,QACA,QACA,QACA,OACA,WACA,OACA,YACA,OACA,OACA,QACA,QACA,SACA,QACA,aACA,SACA,OACA,OACA,MACA,QACA,OACA,QACA,iBACA,SACA,MACA,MACA,QACA,QACA,QACA,UACA,SACA,OACA,YACA,WACA,OACA,OACA,YACA,SACA,MACA,UAOF,OAHEX,EAASU,EAAML,EAAa,EAAGK,EAAM5G,OAAS,KAC9C,IACAkG,EAASW,EAAMN,EAAa,EAAGM,EAAM7G,OAAS,K,0CC1xFrC8G,EAAb,4MACSC,MAAQ,CAAEC,QAAS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","file":"static/js/main.76b0f078.chunk.js","sourcesContent":["//@ts-ignore\nimport canAutoplay from 'can-autoplay';\nimport { parseStringPromise } from 'xml2js';\nimport { v4 as uuidv4 } from 'uuid';\n\nexport function formatTimestamp(input: any) {\n  if (\n    input === null ||\n    input === undefined ||\n    input === false ||\n    Number.isNaN(input) ||\n    input === Infinity\n  ) {\n    return '';\n  }\n  let hours = Math.floor(Number(input) / 3600);\n  let minutes = (Math.floor(Number(input) / 60) % 60)\n    .toString()\n    .padStart(2, '0');\n  let seconds = Math.floor(Number(input) % 60)\n    .toString()\n    .padStart(2, '0');\n  return `${hours}:${minutes}:${seconds}`;\n}\n\nexport function formatSpeed(input: number) {\n  if (input >= 1000000) {\n    return (input / 1000000).toFixed(2) + ' MiB/s';\n  }\n  if (input >= 1000) {\n    return (input / 1000).toFixed(0) + ' KiB/s';\n  }\n  return input + ' B/s';\n}\n\nexport function hashString(input: string) {\n  var hash = 0;\n  for (var i = 0; i < input.length; i++) {\n    var charCode = input.charCodeAt(i);\n    hash += charCode;\n  }\n  return hash;\n}\n\nexport const colorMappings: StringDict = {\n  red: 'B03060',\n  orange: 'FE9A76',\n  yellow: 'FFD700',\n  olive: '32CD32',\n  green: '016936',\n  teal: '008080',\n  blue: '0E6EB8',\n  violet: 'EE82EE',\n  purple: 'B413EC',\n  pink: 'FF1493',\n  brown: 'A52A2A',\n  grey: 'A0A0A0',\n  black: '000000',\n};\n\nlet colorCache = {} as NumberDict;\nexport function getColorForString(id: string) {\n  let colors = [\n    'red',\n    'orange',\n    'yellow',\n    'olive',\n    'green',\n    'teal',\n    'blue',\n    'violet',\n    'purple',\n    'pink',\n    'brown',\n    'grey',\n  ];\n  if (colorCache[id]) {\n    return colors[colorCache[id]];\n  }\n  colorCache[id] = Math.abs(hashString(id)) % colors.length;\n  return colors[colorCache[id]];\n}\n\nexport function getColorForStringHex(id: string) {\n  return colorMappings[getColorForString(id)];\n}\n\nexport const getFbPhoto = (fbId: string) =>\n  `https://graph.facebook.com/${fbId}/picture?type=normal`;\n\nexport const getMediaType = (input: string) => {\n  if (!input) {\n    return '';\n  }\n  if (\n    input.startsWith('https://www.youtube.com/') ||\n    input.startsWith('https://youtu.be/')\n  ) {\n    return 'youtube';\n  }\n  return 'video';\n};\n\nexport async function testAutoplay() {\n  const result = await canAutoplay.video();\n  return result.result;\n}\n\nexport function decodeEntities(input: string) {\n  const doc = new DOMParser().parseFromString(input, 'text/html');\n  return doc.documentElement.textContent;\n}\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nexport function debounce(func: Function, wait: number, immediate?: boolean) {\n  var timeout: any;\n\n  // This is the function that is actually executed when\n  // the DOM event is triggered.\n  return function executedFunction() {\n    // Store the context of this and any\n    // parameters passed to executedFunction\n    //@ts-ignore\n    var context = this;\n    var args = arguments;\n\n    // The function to be called after\n    // the debounce time has elapsed\n    var later = function () {\n      // null timeout to indicate the debounce ended\n      timeout = null;\n\n      // Call function now if you did not on the leading end\n      if (!immediate) func.apply(context, args);\n    };\n\n    // Determine if you should call the function\n    // on the leading or trail end\n    var callNow = immediate && !timeout;\n\n    // This will reset the waiting every function execution.\n    // This is the step that prevents the function from\n    // being executed because it will never reach the\n    // inside of the previous setTimeout\n    clearTimeout(timeout);\n\n    // Restart the debounce waiting period.\n    // setTimeout returns a truthy value (it differs in web vs node)\n    timeout = setTimeout(later, wait);\n\n    // Call immediately if you're dong a leading\n    // end execution\n    if (callNow) func.apply(context, args);\n  };\n}\n\nexport const getMediaPathForList = (list: string) => {\n  if (list.startsWith('https://gitlab.com/')) {\n    const match = list.match(\n      /https:\\/\\/gitlab.com\\/api\\/v4\\/projects\\/(.*)\\/repository\\/tree/\n    );\n    const name = match && match[1];\n    const decoded = decodeURIComponent(name || '');\n    return `https://glcdn.githack.com/${decoded}/-/raw/master/`;\n  }\n  // Nginx servers use the same mediapath as list, add trailing /\n  return list + '/';\n};\n\nexport const getDefaultPicture = (name: string, background = 'a0a0a0') => {\n  return `https://ui-avatars.com/api/?name=${name}&background=${background}&size=256&color=ffffff`;\n};\n\nexport const isMobile = () => {\n  return window.screen.width <= 600;\n};\n\nexport function shuffle(array: any[]) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * i);\n    const temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n  }\n}\n\nexport const iceServers = () => [\n  { urls: 'stun:stun.l.google.com:19302' },\n  {\n    urls: 'turn:135.181.147.65:3478',\n    username: 'username',\n    credential: 'password',\n  },\n  {\n    urls: 'turn:numb.viagenie.ca',\n    credential: 'watchparty',\n    username: 'howardzchung@gmail.com',\n  },\n];\n\nexport const serverPath =\n  process.env.REACT_APP_SERVER_HOST ||\n  `${window.location.protocol}//${\n    process.env.NODE_ENV === 'production'\n      ? window.location.host\n      : `${window.location.hostname}:8080`\n  }`;\n\nexport async function getMediaPathResults(\n  mediaPath: string,\n  query: string\n): Promise<SearchResult[]> {\n  // Get media list if provided\n  const response = await window.fetch(mediaPath);\n  let results: SearchResult[] = [];\n  if (mediaPath.includes('s3.')) {\n    // S3-style buckets return data in XML\n    const xml = await response.text();\n    const data = await parseStringPromise(xml);\n    let filtered = data.ListBucketResult.Contents.filter(\n      (file: any) => !file.Key[0].includes('/')\n    );\n    results = filtered.map((file: any) => ({\n      url: mediaPath + '/' + file.Key[0],\n      name: mediaPath + '/' + file.Key[0],\n    }));\n  } else {\n    const data = await response.json();\n    results = data\n      .filter((file: any) => file.type === 'file')\n      .map((file: any) => ({\n        url: file.url || getMediaPathForList(mediaPath) + file.name,\n        name: getMediaPathForList(mediaPath) + file.name,\n      }));\n  }\n  results = results.filter((option: SearchResult) =>\n    option.name.toLowerCase().includes(query.toLowerCase())\n  );\n  return results;\n}\n\nexport async function getStreamPathResults(\n  streamPath: string,\n  query: string\n): Promise<SearchResult[]> {\n  const response = await window.fetch(\n    streamPath + '/search?q=' + encodeURIComponent(query)\n  );\n  const data = await response.json();\n  return data;\n}\n\nexport async function getYouTubeResults(\n  query: string\n): Promise<SearchResult[]> {\n  const response = await window.fetch(\n    serverPath + '/youtube?q=' + encodeURIComponent(query)\n  );\n  const data = await response.json();\n  return data;\n}\n\nexport async function openFileSelector(accept?: string) {\n  return new Promise<FileList | null>((resolve) => {\n    // Create an input element\n    const inputElement = document.createElement('input');\n\n    // Set its type to file\n    inputElement.type = 'file';\n\n    // Set accept to the file types you want the user to select.\n    // Include both the file extension and the mime type\n    if (accept) {\n      inputElement.accept = accept;\n    }\n\n    // set onchange event to call callback when user has selected file\n    inputElement.addEventListener('change', () => {\n      resolve(inputElement.files);\n    });\n\n    // dispatch a click event to open the file dialog\n    inputElement.dispatchEvent(new MouseEvent('click'));\n  });\n}\n\nexport function getAndSaveClientId() {\n  let clientId = window.localStorage.getItem('watchparty-clientid');\n  if (!clientId) {\n    // Generate a new clientID and save it\n    clientId = uuidv4();\n    window.localStorage.setItem('watchparty-clientid', clientId);\n  }\n  return clientId;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Home_container__1ukFy\",\"hero\":\"Home_hero__1zBE5\",\"green\":\"Home_green__3PMJt\",\"heroInner\":\"Home_heroInner__3w7l9\",\"heroText\":\"Home_heroText__21xIv\",\"subText\":\"Home_subText__363Kx\",\"featureSection\":\"Home_featureSection__1E5B_\",\"featureTitle\":\"Home_featureTitle__37GMX\",\"featureText\":\"Home_featureText__2VOwD\"};","function capFirst(string: string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nfunction getRandomInt(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min)) + min;\n}\n\nexport function generateName() {\n  var name1 = [\n    'abandoned',\n    'able',\n    'absolute',\n    'adorable',\n    'adventurous',\n    'academic',\n    'acceptable',\n    'acclaimed',\n    'accomplished',\n    'accurate',\n    'aching',\n    'acidic',\n    'acrobatic',\n    'active',\n    'actual',\n    'adept',\n    'admirable',\n    'admired',\n    'adolescent',\n    'adorable',\n    'adored',\n    'advanced',\n    'afraid',\n    'affectionate',\n    'aged',\n    'aggravating',\n    'aggressive',\n    'agile',\n    'agitated',\n    'agonizing',\n    'agreeable',\n    'ajar',\n    'alarmed',\n    'alarming',\n    'alert',\n    'alienated',\n    'alive',\n    'all',\n    'altruistic',\n    'amazing',\n    'ambitious',\n    'ample',\n    'amused',\n    'amusing',\n    'anchored',\n    'ancient',\n    'angelic',\n    'angry',\n    'anguished',\n    'animated',\n    'annual',\n    'another',\n    'antique',\n    'anxious',\n    'any',\n    'apprehensive',\n    'appropriate',\n    'apt',\n    'arctic',\n    'arid',\n    'aromatic',\n    'artistic',\n    'ashamed',\n    'assured',\n    'astonishing',\n    'athletic',\n    'attached',\n    'attentive',\n    'attractive',\n    'austere',\n    'authentic',\n    'authorized',\n    'automatic',\n    'avaricious',\n    'average',\n    'aware',\n    'awesome',\n    'awful',\n    'awkward',\n    'babyish',\n    'bad',\n    'back',\n    'baggy',\n    'bare',\n    'barren',\n    'basic',\n    'beautiful',\n    'belated',\n    'beloved',\n    'beneficial',\n    'better',\n    'best',\n    'bewitched',\n    'big',\n    'big-hearted',\n    'biodegradable',\n    'bite-sized',\n    'bitter',\n    'black',\n    'black-and-white',\n    'bland',\n    'blank',\n    'blaring',\n    'bleak',\n    'blind',\n    'blissful',\n    'blond',\n    'blue',\n    'blushing',\n    'bogus',\n    'boiling',\n    'bold',\n    'bony',\n    'boring',\n    'bossy',\n    'both',\n    'bouncy',\n    'bountiful',\n    'bowed',\n    'brave',\n    'breakable',\n    'brief',\n    'bright',\n    'brilliant',\n    'brisk',\n    'broken',\n    'bronze',\n    'brown',\n    'bruised',\n    'bubbly',\n    'bulky',\n    'bumpy',\n    'buoyant',\n    'burdensome',\n    'burly',\n    'bustling',\n    'busy',\n    'buttery',\n    'buzzing',\n    'calculating',\n    'calm',\n    'candid',\n    'canine',\n    'capital',\n    'carefree',\n    'careful',\n    'careless',\n    'caring',\n    'cautious',\n    'cavernous',\n    'celebrated',\n    'charming',\n    'cheap',\n    'cheerful',\n    'cheery',\n    'chief',\n    'chilly',\n    'chubby',\n    'circular',\n    'classic',\n    'clean',\n    'clear',\n    'clear-cut',\n    'clever',\n    'close',\n    'closed',\n    'cloudy',\n    'clueless',\n    'clumsy',\n    'cluttered',\n    'coarse',\n    'cold',\n    'colorful',\n    'colorless',\n    'colossal',\n    'comfortable',\n    'common',\n    'compassionate',\n    'competent',\n    'complete',\n    'complex',\n    'complicated',\n    'composed',\n    'concerned',\n    'concrete',\n    'confused',\n    'conscious',\n    'considerate',\n    'constant',\n    'content',\n    'conventional',\n    'cooked',\n    'cool',\n    'cooperative',\n    'coordinated',\n    'corny',\n    'corrupt',\n    'costly',\n    'courageous',\n    'courteous',\n    'crafty',\n    'crazy',\n    'creamy',\n    'creative',\n    'creepy',\n    'criminal',\n    'crisp',\n    'critical',\n    'crooked',\n    'crowded',\n    'cruel',\n    'crushing',\n    'cuddly',\n    'cultivated',\n    'cultured',\n    'cumbersome',\n    'curly',\n    'curvy',\n    'cute',\n    'cylindrical',\n    'damaged',\n    'damp',\n    'dangerous',\n    'dapper',\n    'daring',\n    'darling',\n    'dark',\n    'dazzling',\n    'dead',\n    'deadly',\n    'deafening',\n    'dear',\n    'dearest',\n    'decent',\n    'decimal',\n    'decisive',\n    'deep',\n    'defenseless',\n    'defensive',\n    'defiant',\n    'deficient',\n    'definite',\n    'definitive',\n    'delayed',\n    'delectable',\n    'delicious',\n    'delightful',\n    'delirious',\n    'demanding',\n    'dense',\n    'dental',\n    'dependable',\n    'dependent',\n    'descriptive',\n    'deserted',\n    'detailed',\n    'determined',\n    'devoted',\n    'different',\n    'difficult',\n    'digital',\n    'diligent',\n    'dim',\n    'dimpled',\n    'dimwitted',\n    'direct',\n    'disastrous',\n    'discrete',\n    'disfigured',\n    'disgusting',\n    'disloyal',\n    'dismal',\n    'distant',\n    'downright',\n    'dreary',\n    'dirty',\n    'disguised',\n    'dishonest',\n    'dismal',\n    'distant',\n    'distinct',\n    'distorted',\n    'dizzy',\n    'dopey',\n    'doting',\n    'double',\n    'downright',\n    'drab',\n    'drafty',\n    'dramatic',\n    'dreary',\n    'droopy',\n    'dry',\n    'dual',\n    'dull',\n    'dutiful',\n    'each',\n    'eager',\n    'earnest',\n    'early',\n    'easy',\n    'easy-going',\n    'ecstatic',\n    'edible',\n    'educated',\n    'elaborate',\n    'elastic',\n    'elated',\n    'elderly',\n    'electric',\n    'elegant',\n    'elementary',\n    'elliptical',\n    'embarrassed',\n    'embellished',\n    'eminent',\n    'emotional',\n    'empty',\n    'enchanted',\n    'enchanting',\n    'energetic',\n    'enlightened',\n    'enormous',\n    'enraged',\n    'entire',\n    'envious',\n    'equal',\n    'equatorial',\n    'essential',\n    'esteemed',\n    'ethical',\n    'euphoric',\n    'even',\n    'evergreen',\n    'everlasting',\n    'every',\n    'evil',\n    'exalted',\n    'excellent',\n    'exemplary',\n    'exhausted',\n    'excitable',\n    'excited',\n    'exciting',\n    'exotic',\n    'expensive',\n    'experienced',\n    'expert',\n    'extraneous',\n    'extroverted',\n    'extra-large',\n    'extra-small',\n    'fabulous',\n    'failing',\n    'faint',\n    'fair',\n    'faithful',\n    'fake',\n    'false',\n    'familiar',\n    'famous',\n    'fancy',\n    'fantastic',\n    'far',\n    'faraway',\n    'far-flung',\n    'far-off',\n    'fast',\n    'fat',\n    'fatal',\n    'fatherly',\n    'favorable',\n    'favorite',\n    'fearful',\n    'fearless',\n    'feisty',\n    'feline',\n    'female',\n    'feminine',\n    'few',\n    'fickle',\n    'filthy',\n    'fine',\n    'finished',\n    'firm',\n    'first',\n    'firsthand',\n    'fitting',\n    'fixed',\n    'flaky',\n    'flamboyant',\n    'flashy',\n    'flat',\n    'flawed',\n    'flawless',\n    'flickering',\n    'flimsy',\n    'flippant',\n    'flowery',\n    'fluffy',\n    'fluid',\n    'flustered',\n    'focused',\n    'fond',\n    'foolhardy',\n    'foolish',\n    'forceful',\n    'forked',\n    'formal',\n    'forsaken',\n    'forthright',\n    'fortunate',\n    'fragrant',\n    'frail',\n    'frank',\n    'frayed',\n    'free',\n    'French',\n    'fresh',\n    'frequent',\n    'friendly',\n    'frightened',\n    'frightening',\n    'frigid',\n    'frilly',\n    'frizzy',\n    'frivolous',\n    'front',\n    'frosty',\n    'frozen',\n    'frugal',\n    'fruitful',\n    'full',\n    'fumbling',\n    'functional',\n    'funny',\n    'fussy',\n    'fuzzy',\n    'gargantuan',\n    'gaseous',\n    'general',\n    'generous',\n    'gentle',\n    'genuine',\n    'giant',\n    'giddy',\n    'gigantic',\n    'gifted',\n    'giving',\n    'glamorous',\n    'glaring',\n    'glass',\n    'gleaming',\n    'gleeful',\n    'glistening',\n    'glittering',\n    'gloomy',\n    'glorious',\n    'glossy',\n    'glum',\n    'golden',\n    'good',\n    'good-natured',\n    'gorgeous',\n    'graceful',\n    'gracious',\n    'grand',\n    'grandiose',\n    'granular',\n    'grateful',\n    'grave',\n    'gray',\n    'great',\n    'greedy',\n    'green',\n    'gregarious',\n    'grim',\n    'grimy',\n    'gripping',\n    'grizzled',\n    'gross',\n    'grotesque',\n    'grouchy',\n    'grounded',\n    'growing',\n    'growling',\n    'grown',\n    'grubby',\n    'gruesome',\n    'grumpy',\n    'guilty',\n    'gullible',\n    'gummy',\n    'hairy',\n    'half',\n    'handmade',\n    'handsome',\n    'handy',\n    'happy',\n    'happy-go-lucky',\n    'hard',\n    'hard-to-find',\n    'harmful',\n    'harmless',\n    'harmonious',\n    'harsh',\n    'hasty',\n    'hateful',\n    'haunting',\n    'healthy',\n    'heartfelt',\n    'hearty',\n    'heavenly',\n    'heavy',\n    'hefty',\n    'helpful',\n    'helpless',\n    'hidden',\n    'hideous',\n    'high',\n    'high-level',\n    'hilarious',\n    'hoarse',\n    'hollow',\n    'homely',\n    'honest',\n    'honorable',\n    'honored',\n    'hopeful',\n    'horrible',\n    'hospitable',\n    'hot',\n    'huge',\n    'humble',\n    'humiliating',\n    'humming',\n    'humongous',\n    'hungry',\n    'hurtful',\n    'husky',\n    'icky',\n    'icy',\n    'ideal',\n    'idealistic',\n    'identical',\n    'idle',\n    'idiotic',\n    'idolized',\n    'ignorant',\n    'ill',\n    'illegal',\n    'ill-fated',\n    'ill-informed',\n    'illiterate',\n    'illustrious',\n    'imaginary',\n    'imaginative',\n    'immaculate',\n    'immaterial',\n    'immediate',\n    'immense',\n    'impassioned',\n    'impeccable',\n    'impartial',\n    'imperfect',\n    'imperturbable',\n    'impish',\n    'impolite',\n    'important',\n    'impossible',\n    'impractical',\n    'impressionable',\n    'impressive',\n    'improbable',\n    'impure',\n    'inborn',\n    'incomparable',\n    'incompatible',\n    'incomplete',\n    'inconsequential',\n    'incredible',\n    'indelible',\n    'inexperienced',\n    'indolent',\n    'infamous',\n    'infantile',\n    'infatuated',\n    'inferior',\n    'infinite',\n    'informal',\n    'innocent',\n    'insecure',\n    'insidious',\n    'insignificant',\n    'insistent',\n    'instructive',\n    'insubstantial',\n    'intelligent',\n    'intent',\n    'intentional',\n    'interesting',\n    'internal',\n    'international',\n    'intrepid',\n    'ironclad',\n    'irresponsible',\n    'irritating',\n    'itchy',\n    'jaded',\n    'jagged',\n    'jam-packed',\n    'jaunty',\n    'jealous',\n    'jittery',\n    'joint',\n    'jolly',\n    'jovial',\n    'joyful',\n    'joyous',\n    'jubilant',\n    'judicious',\n    'juicy',\n    'jumbo',\n    'junior',\n    'jumpy',\n    'juvenile',\n    'kaleidoscopic',\n    'keen',\n    'key',\n    'kind',\n    'kindhearted',\n    'kindly',\n    'klutzy',\n    'knobby',\n    'knotty',\n    'knowledgeable',\n    'knowing',\n    'known',\n    'kooky',\n    'kosher',\n    'lame',\n    'lanky',\n    'large',\n    'last',\n    'lasting',\n    'late',\n    'lavish',\n    'lawful',\n    'lazy',\n    'leading',\n    'lean',\n    'leafy',\n    'left',\n    'legal',\n    'legitimate',\n    'light',\n    'lighthearted',\n    'likable',\n    'likely',\n    'limited',\n    'limp',\n    'limping',\n    'linear',\n    'lined',\n    'liquid',\n    'little',\n    'live',\n    'lively',\n    'livid',\n    'loathsome',\n    'lone',\n    'lonely',\n    'long',\n    'long-term',\n    'loose',\n    'lopsided',\n    'lost',\n    'loud',\n    'lovable',\n    'lovely',\n    'loving',\n    'low',\n    'loyal',\n    'lucky',\n    'lumbering',\n    'luminous',\n    'lumpy',\n    'lustrous',\n    'luxurious',\n    'mad',\n    'made-up',\n    'magnificent',\n    'majestic',\n    'major',\n    'male',\n    'mammoth',\n    'married',\n    'marvelous',\n    'masculine',\n    'massive',\n    'mature',\n    'meager',\n    'mealy',\n    'mean',\n    'measly',\n    'meaty',\n    'medical',\n    'mediocre',\n    'medium',\n    'meek',\n    'mellow',\n    'melodic',\n    'memorable',\n    'menacing',\n    'merry',\n    'messy',\n    'metallic',\n    'mild',\n    'milky',\n    'mindless',\n    'miniature',\n    'minor',\n    'minty',\n    'miserable',\n    'miserly',\n    'misguided',\n    'misty',\n    'mixed',\n    'modern',\n    'modest',\n    'moist',\n    'monstrous',\n    'monthly',\n    'monumental',\n    'moral',\n    'mortified',\n    'motherly',\n    'motionless',\n    'mountainous',\n    'muddy',\n    'muffled',\n    'multicolored',\n    'mundane',\n    'murky',\n    'mushy',\n    'musty',\n    'muted',\n    'mysterious',\n    'naive',\n    'narrow',\n    'nasty',\n    'natural',\n    'naughty',\n    'nautical',\n    'near',\n    'neat',\n    'necessary',\n    'needy',\n    'negative',\n    'neglected',\n    'negligible',\n    'neighboring',\n    'nervous',\n    'new',\n    'next',\n    'nice',\n    'nifty',\n    'nimble',\n    'nippy',\n    'nocturnal',\n    'noisy',\n    'nonstop',\n    'normal',\n    'notable',\n    'noted',\n    'noteworthy',\n    'novel',\n    'noxious',\n    'numb',\n    'nutritious',\n    'nutty',\n    'obedient',\n    'obese',\n    'oblong',\n    'oily',\n    'oblong',\n    'obvious',\n    'occasional',\n    'odd',\n    'oddball',\n    'offbeat',\n    'offensive',\n    'official',\n    'old',\n    'old-fashioned',\n    'only',\n    'open',\n    'optimal',\n    'optimistic',\n    'opulent',\n    'orange',\n    'orderly',\n    'organic',\n    'ornate',\n    'ornery',\n    'ordinary',\n    'original',\n    'other',\n    'our',\n    'outlying',\n    'outgoing',\n    'outlandish',\n    'outrageous',\n    'outstanding',\n    'oval',\n    'overcooked',\n    'overdue',\n    'overjoyed',\n    'overlooked',\n    'palatable',\n    'pale',\n    'paltry',\n    'parallel',\n    'parched',\n    'partial',\n    'passionate',\n    'past',\n    'pastel',\n    'peaceful',\n    'peppery',\n    'perfect',\n    'perfumed',\n    'periodic',\n    'perky',\n    'personal',\n    'pertinent',\n    'pesky',\n    'pessimistic',\n    'petty',\n    'phony',\n    'physical',\n    'piercing',\n    'pink',\n    'pitiful',\n    'plain',\n    'plaintive',\n    'plastic',\n    'playful',\n    'pleasant',\n    'pleased',\n    'pleasing',\n    'plump',\n    'plush',\n    'polished',\n    'polite',\n    'political',\n    'pointed',\n    'pointless',\n    'poised',\n    'poor',\n    'popular',\n    'portly',\n    'posh',\n    'positive',\n    'possible',\n    'potable',\n    'powerful',\n    'powerless',\n    'practical',\n    'precious',\n    'present',\n    'prestigious',\n    'pretty',\n    'precious',\n    'previous',\n    'pricey',\n    'prickly',\n    'primary',\n    'prime',\n    'pristine',\n    'private',\n    'prize',\n    'probable',\n    'productive',\n    'profitable',\n    'profuse',\n    'proper',\n    'proud',\n    'prudent',\n    'punctual',\n    'pungent',\n    'puny',\n    'pure',\n    'purple',\n    'pushy',\n    'putrid',\n    'puzzled',\n    'puzzling',\n    'quaint',\n    'qualified',\n    'quarrelsome',\n    'quarterly',\n    'queasy',\n    'querulous',\n    'questionable',\n    'quick',\n    'quick-witted',\n    'quiet',\n    'quintessential',\n    'quirky',\n    'quixotic',\n    'quizzical',\n    'radiant',\n    'ragged',\n    'rapid',\n    'rare',\n    'rash',\n    'raw',\n    'recent',\n    'reckless',\n    'rectangular',\n    'ready',\n    'real',\n    'realistic',\n    'reasonable',\n    'red',\n    'reflecting',\n    'regal',\n    'regular',\n    'reliable',\n    'relieved',\n    'remarkable',\n    'remorseful',\n    'remote',\n    'repentant',\n    'required',\n    'respectful',\n    'responsible',\n    'repulsive',\n    'revolving',\n    'rewarding',\n    'rich',\n    'rigid',\n    'right',\n    'ringed',\n    'ripe',\n    'roasted',\n    'robust',\n    'rosy',\n    'rotating',\n    'rotten',\n    'rough',\n    'round',\n    'rowdy',\n    'royal',\n    'rubbery',\n    'rundown',\n    'ruddy',\n    'rude',\n    'runny',\n    'rural',\n    'rusty',\n    'sad',\n    'safe',\n    'salty',\n    'same',\n    'sandy',\n    'sane',\n    'sarcastic',\n    'sardonic',\n    'satisfied',\n    'scaly',\n    'scarce',\n    'scared',\n    'scary',\n    'scented',\n    'scholarly',\n    'scientific',\n    'scornful',\n    'scratchy',\n    'scrawny',\n    'second',\n    'secondary',\n    'second-hand',\n    'secret',\n    'self-assured',\n    'self-reliant',\n    'selfish',\n    'sentimental',\n    'separate',\n    'serene',\n    'serious',\n    'serpentine',\n    'several',\n    'severe',\n    'shabby',\n    'shadowy',\n    'shady',\n    'shallow',\n    'shameful',\n    'shameless',\n    'sharp',\n    'shimmering',\n    'shiny',\n    'shocked',\n    'shocking',\n    'shoddy',\n    'short',\n    'short-term',\n    'showy',\n    'shrill',\n    'shy',\n    'sick',\n    'silent',\n    'silky',\n    'silly',\n    'silver',\n    'similar',\n    'simple',\n    'simplistic',\n    'sinful',\n    'single',\n    'sizzling',\n    'skeletal',\n    'skinny',\n    'sleepy',\n    'slight',\n    'slim',\n    'slimy',\n    'slippery',\n    'slow',\n    'slushy',\n    'small',\n    'smart',\n    'smoggy',\n    'smooth',\n    'smug',\n    'snappy',\n    'snarling',\n    'sneaky',\n    'sniveling',\n    'snoopy',\n    'sociable',\n    'soft',\n    'soggy',\n    'solid',\n    'somber',\n    'some',\n    'spherical',\n    'sophisticated',\n    'sore',\n    'sorrowful',\n    'soulful',\n    'soupy',\n    'sour',\n    'Spanish',\n    'sparkling',\n    'sparse',\n    'specific',\n    'spectacular',\n    'speedy',\n    'spicy',\n    'spiffy',\n    'spirited',\n    'spiteful',\n    'splendid',\n    'spotless',\n    'spotted',\n    'spry',\n    'square',\n    'squeaky',\n    'squiggly',\n    'stable',\n    'staid',\n    'stained',\n    'stale',\n    'standard',\n    'starchy',\n    'stark',\n    'starry',\n    'steep',\n    'sticky',\n    'stiff',\n    'stimulating',\n    'stingy',\n    'stormy',\n    'straight',\n    'strange',\n    'steel',\n    'strict',\n    'strident',\n    'striking',\n    'striped',\n    'strong',\n    'studious',\n    'stunning',\n    'stupendous',\n    'stupid',\n    'sturdy',\n    'stylish',\n    'subdued',\n    'submissive',\n    'substantial',\n    'subtle',\n    'suburban',\n    'sudden',\n    'sugary',\n    'sunny',\n    'super',\n    'superb',\n    'superficial',\n    'superior',\n    'supportive',\n    'sure-footed',\n    'surprised',\n    'suspicious',\n    'svelte',\n    'sweaty',\n    'sweet',\n    'sweltering',\n    'swift',\n    'sympathetic',\n    'tall',\n    'talkative',\n    'tame',\n    'tan',\n    'tangible',\n    'tart',\n    'tasty',\n    'tattered',\n    'taut',\n    'tedious',\n    'teeming',\n    'tempting',\n    'tender',\n    'tense',\n    'tepid',\n    'terrible',\n    'terrific',\n    'testy',\n    'thankful',\n    'that',\n    'these',\n    'thick',\n    'thin',\n    'third',\n    'thirsty',\n    'this',\n    'thorough',\n    'thorny',\n    'those',\n    'thoughtful',\n    'threadbare',\n    'thrifty',\n    'thunderous',\n    'tidy',\n    'tight',\n    'timely',\n    'tinted',\n    'tiny',\n    'tired',\n    'torn',\n    'total',\n    'tough',\n    'traumatic',\n    'treasured',\n    'tremendous',\n    'tragic',\n    'trained',\n    'tremendous',\n    'triangular',\n    'tricky',\n    'trifling',\n    'trim',\n    'trivial',\n    'troubled',\n    'true',\n    'trusting',\n    'trustworthy',\n    'trusty',\n    'truthful',\n    'tubby',\n    'turbulent',\n    'twin',\n    'ugly',\n    'ultimate',\n    'unacceptable',\n    'unaware',\n    'uncomfortable',\n    'uncommon',\n    'unconscious',\n    'understated',\n    'unequaled',\n    'uneven',\n    'unfinished',\n    'unfit',\n    'unfolded',\n    'unfortunate',\n    'unhappy',\n    'unhealthy',\n    'uniform',\n    'unimportant',\n    'unique',\n    'united',\n    'unkempt',\n    'unknown',\n    'unlawful',\n    'unlined',\n    'unlucky',\n    'unnatural',\n    'unpleasant',\n    'unrealistic',\n    'unripe',\n    'unruly',\n    'unselfish',\n    'unsightly',\n    'unsteady',\n    'unsung',\n    'untidy',\n    'untimely',\n    'untried',\n    'untrue',\n    'unused',\n    'unusual',\n    'unwelcome',\n    'unwieldy',\n    'unwilling',\n    'unwitting',\n    'unwritten',\n    'upbeat',\n    'upright',\n    'upset',\n    'urban',\n    'usable',\n    'used',\n    'useful',\n    'useless',\n    'utilized',\n    'utter',\n    'vacant',\n    'vague',\n    'vain',\n    'valid',\n    'valuable',\n    'vapid',\n    'variable',\n    'vast',\n    'velvety',\n    'venerated',\n    'vengeful',\n    'verifiable',\n    'vibrant',\n    'vicious',\n    'victorious',\n    'vigilant',\n    'vigorous',\n    'villainous',\n    'violet',\n    'violent',\n    'virtual',\n    'virtuous',\n    'visible',\n    'vital',\n    'vivacious',\n    'vivid',\n    'voluminous',\n    'wan',\n    'warlike',\n    'warm',\n    'warmhearted',\n    'warped',\n    'wary',\n    'wasteful',\n    'watchful',\n    'waterlogged',\n    'watery',\n    'wavy',\n    'wealthy',\n    'weak',\n    'weary',\n    'webbed',\n    'wee',\n    'weekly',\n    'weepy',\n    'weighty',\n    'weird',\n    'welcome',\n    'well-documented',\n    'well-groomed',\n    'well-informed',\n    'well-lit',\n    'well-made',\n    'well-off',\n    'well-to-do',\n    'well-worn',\n    'wet',\n    'which',\n    'whimsical',\n    'whirlwind',\n    'whispered',\n    'white',\n    'whole',\n    'whopping',\n    'wicked',\n    'wide',\n    'wide-eyed',\n    'wiggly',\n    'wild',\n    'willing',\n    'wilted',\n    'winding',\n    'windy',\n    'winged',\n    'wiry',\n    'wise',\n    'witty',\n    'wobbly',\n    'woeful',\n    'wonderful',\n    'wooden',\n    'woozy',\n    'wordy',\n    'worldly',\n    'worn',\n    'worried',\n    'worrisome',\n    'worse',\n    'worst',\n    'worthless',\n    'worthwhile',\n    'worthy',\n    'wrathful',\n    'wretched',\n    'writhing',\n    'wrong',\n    'wry',\n    'yawning',\n    'yearly',\n    'yellow',\n    'yellowish',\n    'young',\n    'youthful',\n    'yummy',\n    'zany',\n    'zealous',\n    'zesty',\n    'zigzag',\n    'rocky',\n  ];\n\n  var name2 = [\n    'people',\n    'history',\n    'way',\n    'art',\n    'world',\n    'information',\n    'map',\n    'family',\n    'government',\n    'health',\n    'system',\n    'computer',\n    'meat',\n    'year',\n    'thanks',\n    'music',\n    'person',\n    'reading',\n    'method',\n    'data',\n    'food',\n    'understanding',\n    'theory',\n    'law',\n    'bird',\n    'literature',\n    'problem',\n    'software',\n    'control',\n    'knowledge',\n    'power',\n    'ability',\n    'economics',\n    'love',\n    'internet',\n    'television',\n    'science',\n    'library',\n    'nature',\n    'fact',\n    'product',\n    'idea',\n    'temperature',\n    'investment',\n    'area',\n    'society',\n    'activity',\n    'story',\n    'industry',\n    'media',\n    'thing',\n    'oven',\n    'community',\n    'definition',\n    'safety',\n    'quality',\n    'development',\n    'language',\n    'management',\n    'player',\n    'variety',\n    'video',\n    'week',\n    'security',\n    'country',\n    'exam',\n    'movie',\n    'organization',\n    'equipment',\n    'physics',\n    'analysis',\n    'policy',\n    'series',\n    'thought',\n    'basis',\n    'boyfriend',\n    'direction',\n    'strategy',\n    'technology',\n    'army',\n    'camera',\n    'freedom',\n    'paper',\n    'environment',\n    'child',\n    'instance',\n    'month',\n    'truth',\n    'marketing',\n    'university',\n    'writing',\n    'article',\n    'department',\n    'difference',\n    'goal',\n    'news',\n    'audience',\n    'fishing',\n    'growth',\n    'income',\n    'marriage',\n    'user',\n    'combination',\n    'failure',\n    'meaning',\n    'medicine',\n    'philosophy',\n    'teacher',\n    'communication',\n    'night',\n    'chemistry',\n    'disease',\n    'disk',\n    'energy',\n    'nation',\n    'road',\n    'role',\n    'soup',\n    'advertising',\n    'location',\n    'success',\n    'addition',\n    'apartment',\n    'education',\n    'math',\n    'moment',\n    'painting',\n    'politics',\n    'attention',\n    'decision',\n    'event',\n    'property',\n    'shopping',\n    'student',\n    'wood',\n    'competition',\n    'distribution',\n    'entertainment',\n    'office',\n    'population',\n    'president',\n    'unit',\n    'category',\n    'cigarette',\n    'context',\n    'introduction',\n    'opportunity',\n    'performance',\n    'driver',\n    'flight',\n    'length',\n    'magazine',\n    'newspaper',\n    'relationship',\n    'teaching',\n    'cell',\n    'dealer',\n    'debate',\n    'finding',\n    'lake',\n    'member',\n    'message',\n    'phone',\n    'scene',\n    'appearance',\n    'association',\n    'concept',\n    'customer',\n    'death',\n    'discussion',\n    'housing',\n    'inflation',\n    'insurance',\n    'mood',\n    'woman',\n    'advice',\n    'blood',\n    'effort',\n    'expression',\n    'importance',\n    'opinion',\n    'payment',\n    'reality',\n    'responsibility',\n    'situation',\n    'skill',\n    'statement',\n    'wealth',\n    'application',\n    'city',\n    'county',\n    'depth',\n    'estate',\n    'foundation',\n    'grandmother',\n    'heart',\n    'perspective',\n    'photo',\n    'recipe',\n    'studio',\n    'topic',\n    'collection',\n    'depression',\n    'imagination',\n    'passion',\n    'percentage',\n    'resource',\n    'setting',\n    'ad',\n    'agency',\n    'college',\n    'connection',\n    'criticism',\n    'debt',\n    'description',\n    'memory',\n    'patience',\n    'secretary',\n    'solution',\n    'administration',\n    'aspect',\n    'attitude',\n    'director',\n    'personality',\n    'psychology',\n    'recommendation',\n    'response',\n    'selection',\n    'storage',\n    'version',\n    'alcohol',\n    'argument',\n    'complaint',\n    'contract',\n    'emphasis',\n    'highway',\n    'loss',\n    'membership',\n    'possession',\n    'preparation',\n    'steak',\n    'union',\n    'agreement',\n    'cancer',\n    'currency',\n    'employment',\n    'engineering',\n    'entry',\n    'interaction',\n    'limit',\n    'mixture',\n    'preference',\n    'region',\n    'republic',\n    'seat',\n    'tradition',\n    'virus',\n    'actor',\n    'classroom',\n    'delivery',\n    'device',\n    'difficulty',\n    'drama',\n    'election',\n    'engine',\n    'football',\n    'guidance',\n    'hotel',\n    'match',\n    'owner',\n    'priority',\n    'protection',\n    'suggestion',\n    'tension',\n    'variation',\n    'anxiety',\n    'atmosphere',\n    'awareness',\n    'bread',\n    'climate',\n    'comparison',\n    'confusion',\n    'construction',\n    'elevator',\n    'emotion',\n    'employee',\n    'employer',\n    'guest',\n    'height',\n    'leadership',\n    'mall',\n    'manager',\n    'operation',\n    'recording',\n    'respect',\n    'sample',\n    'transportation',\n    'boring',\n    'charity',\n    'cousin',\n    'disaster',\n    'editor',\n    'efficiency',\n    'excitement',\n    'extent',\n    'feedback',\n    'guitar',\n    'homework',\n    'leader',\n    'mom',\n    'outcome',\n    'permission',\n    'presentation',\n    'promotion',\n    'reflection',\n    'refrigerator',\n    'resolution',\n    'revenue',\n    'session',\n    'singer',\n    'tennis',\n    'basket',\n    'bonus',\n    'cabinet',\n    'childhood',\n    'church',\n    'clothes',\n    'coffee',\n    'dinner',\n    'drawing',\n    'hair',\n    'hearing',\n    'initiative',\n    'judgment',\n    'lab',\n    'measurement',\n    'mode',\n    'mud',\n    'orange',\n    'poetry',\n    'police',\n    'possibility',\n    'procedure',\n    'queen',\n    'ratio',\n    'relation',\n    'restaurant',\n    'satisfaction',\n    'sector',\n    'signature',\n    'significance',\n    'song',\n    'tooth',\n    'town',\n    'vehicle',\n    'volume',\n    'wife',\n    'accident',\n    'airport',\n    'appointment',\n    'arrival',\n    'assumption',\n    'baseball',\n    'chapter',\n    'committee',\n    'conversation',\n    'database',\n    'enthusiasm',\n    'error',\n    'explanation',\n    'farmer',\n    'gate',\n    'girl',\n    'hall',\n    'historian',\n    'hospital',\n    'injury',\n    'instruction',\n    'maintenance',\n    'manufacturer',\n    'meal',\n    'perception',\n    'pie',\n    'poem',\n    'presence',\n    'proposal',\n    'reception',\n    'replacement',\n    'revolution',\n    'river',\n    'son',\n    'speech',\n    'tea',\n    'village',\n    'warning',\n    'winner',\n    'worker',\n    'writer',\n    'assistance',\n    'breath',\n    'buyer',\n    'chest',\n    'chocolate',\n    'conclusion',\n    'contribution',\n    'cookie',\n    'courage',\n    'desk',\n    'drawer',\n    'establishment',\n    'examination',\n    'garbage',\n    'grocery',\n    'honey',\n    'impression',\n    'improvement',\n    'independence',\n    'insect',\n    'inspection',\n    'inspector',\n    'king',\n    'ladder',\n    'menu',\n    'penalty',\n    'piano',\n    'potato',\n    'profession',\n    'professor',\n    'quantity',\n    'reaction',\n    'requirement',\n    'salad',\n    'sister',\n    'supermarket',\n    'tongue',\n    'weakness',\n    'wedding',\n    'affair',\n    'ambition',\n    'analyst',\n    'apple',\n    'assignment',\n    'assistant',\n    'bathroom',\n    'bedroom',\n    'beer',\n    'birthday',\n    'celebration',\n    'championship',\n    'cheek',\n    'client',\n    'consequence',\n    'departure',\n    'diamond',\n    'dirt',\n    'ear',\n    'fortune',\n    'friendship',\n    'funeral',\n    'gene',\n    'girlfriend',\n    'hat',\n    'indication',\n    'intention',\n    'lady',\n    'midnight',\n    'negotiation',\n    'obligation',\n    'passenger',\n    'pizza',\n    'platform',\n    'poet',\n    'pollution',\n    'recognition',\n    'reputation',\n    'shirt',\n    'speaker',\n    'stranger',\n    'surgery',\n    'sympathy',\n    'tale',\n    'throat',\n    'trainer',\n    'uncle',\n    'youth',\n    'time',\n    'work',\n    'film',\n    'water',\n    'money',\n    'example',\n    'while',\n    'business',\n    'study',\n    'game',\n    'life',\n    'form',\n    'air',\n    'day',\n    'place',\n    'number',\n    'part',\n    'field',\n    'fish',\n    'back',\n    'process',\n    'heat',\n    'hand',\n    'experience',\n    'job',\n    'book',\n    'end',\n    'point',\n    'type',\n    'home',\n    'economy',\n    'value',\n    'body',\n    'market',\n    'guide',\n    'interest',\n    'state',\n    'radio',\n    'course',\n    'company',\n    'price',\n    'size',\n    'card',\n    'list',\n    'mind',\n    'trade',\n    'line',\n    'care',\n    'group',\n    'risk',\n    'word',\n    'fat',\n    'force',\n    'key',\n    'light',\n    'training',\n    'name',\n    'school',\n    'top',\n    'amount',\n    'level',\n    'order',\n    'practice',\n    'research',\n    'sense',\n    'service',\n    'piece',\n    'web',\n    'boss',\n    'sport',\n    'fun',\n    'house',\n    'page',\n    'term',\n    'test',\n    'answer',\n    'sound',\n    'focus',\n    'matter',\n    'kind',\n    'soil',\n    'board',\n    'oil',\n    'picture',\n    'access',\n    'garden',\n    'range',\n    'rate',\n    'reason',\n    'future',\n    'site',\n    'demand',\n    'exercise',\n    'image',\n    'case',\n    'cause',\n    'coast',\n    'action',\n    'age',\n    'bad',\n    'boat',\n    'record',\n    'result',\n    'section',\n    'building',\n    'mouse',\n    'cash',\n    'class',\n    'period',\n    'plan',\n    'store',\n    'tax',\n    'side',\n    'subject',\n    'space',\n    'rule',\n    'stock',\n    'weather',\n    'chance',\n    'figure',\n    'man',\n    'model',\n    'source',\n    'beginning',\n    'earth',\n    'program',\n    'chicken',\n    'design',\n    'feature',\n    'head',\n    'material',\n    'purpose',\n    'question',\n    'rock',\n    'salt',\n    'act',\n    'birth',\n    'car',\n    'dog',\n    'object',\n    'scale',\n    'sun',\n    'note',\n    'profit',\n    'rent',\n    'speed',\n    'style',\n    'war',\n    'bank',\n    'craft',\n    'half',\n    'inside',\n    'outside',\n    'standard',\n    'bus',\n    'exchange',\n    'eye',\n    'fire',\n    'position',\n    'pressure',\n    'stress',\n    'advantage',\n    'benefit',\n    'box',\n    'frame',\n    'issue',\n    'step',\n    'cycle',\n    'face',\n    'item',\n    'metal',\n    'paint',\n    'review',\n    'room',\n    'screen',\n    'structure',\n    'view',\n    'account',\n    'ball',\n    'discipline',\n    'medium',\n    'share',\n    'balance',\n    'bit',\n    'black',\n    'bottom',\n    'choice',\n    'gift',\n    'impact',\n    'machine',\n    'shape',\n    'tool',\n    'wind',\n    'address',\n    'average',\n    'career',\n    'culture',\n    'morning',\n    'pot',\n    'sign',\n    'table',\n    'task',\n    'condition',\n    'contact',\n    'credit',\n    'egg',\n    'hope',\n    'ice',\n    'network',\n    'north',\n    'square',\n    'attempt',\n    'date',\n    'effect',\n    'link',\n    'post',\n    'star',\n    'voice',\n    'capital',\n    'challenge',\n    'friend',\n    'self',\n    'shot',\n    'brush',\n    'couple',\n    'exit',\n    'front',\n    'function',\n    'lack',\n    'living',\n    'plant',\n    'plastic',\n    'spot',\n    'summer',\n    'taste',\n    'theme',\n    'track',\n    'wing',\n    'brain',\n    'button',\n    'click',\n    'desire',\n    'foot',\n    'gas',\n    'influence',\n    'notice',\n    'rain',\n    'wall',\n    'base',\n    'damage',\n    'distance',\n    'feeling',\n    'pair',\n    'savings',\n    'staff',\n    'sugar',\n    'target',\n    'text',\n    'animal',\n    'author',\n    'budget',\n    'discount',\n    'file',\n    'ground',\n    'lesson',\n    'minute',\n    'officer',\n    'phase',\n    'reference',\n    'register',\n    'sky',\n    'stage',\n    'stick',\n    'title',\n    'trouble',\n    'bowl',\n    'bridge',\n    'campaign',\n    'character',\n    'club',\n    'edge',\n    'evidence',\n    'fan',\n    'letter',\n    'lock',\n    'maximum',\n    'novel',\n    'option',\n    'pack',\n    'park',\n    'quarter',\n    'skin',\n    'sort',\n    'weight',\n    'baby',\n    'background',\n    'carry',\n    'dish',\n    'factor',\n    'fruit',\n    'glass',\n    'joint',\n    'master',\n    'muscle',\n    'red',\n    'strength',\n    'traffic',\n    'trip',\n    'vegetable',\n    'appeal',\n    'chart',\n    'gear',\n    'ideal',\n    'kitchen',\n    'land',\n    'log',\n    'mother',\n    'net',\n    'party',\n    'principle',\n    'relative',\n    'sale',\n    'season',\n    'signal',\n    'spirit',\n    'street',\n    'tree',\n    'wave',\n    'belt',\n    'bench',\n    'commission',\n    'copy',\n    'drop',\n    'minimum',\n    'path',\n    'progress',\n    'project',\n    'sea',\n    'south',\n    'status',\n    'stuff',\n    'ticket',\n    'tour',\n    'angle',\n    'blue',\n    'breakfast',\n    'confidence',\n    'daughter',\n    'degree',\n    'doctor',\n    'dot',\n    'dream',\n    'duty',\n    'essay',\n    'father',\n    'fee',\n    'finance',\n    'hour',\n    'juice',\n    'luck',\n    'milk',\n    'mouth',\n    'peace',\n    'pipe',\n    'stable',\n    'storm',\n    'substance',\n    'team',\n    'trick',\n    'afternoon',\n    'bat',\n    'beach',\n    'blank',\n    'catch',\n    'chain',\n    'consideration',\n    'cream',\n    'crew',\n    'detail',\n    'gold',\n    'interview',\n    'kid',\n    'mark',\n    'mission',\n    'pain',\n    'pleasure',\n    'score',\n    'screw',\n    'sex',\n    'shop',\n    'shower',\n    'suit',\n    'tone',\n    'window',\n    'agent',\n    'band',\n    'bath',\n    'block',\n    'bone',\n    'calendar',\n    'candidate',\n    'cap',\n    'coat',\n    'contest',\n    'corner',\n    'court',\n    'cup',\n    'district',\n    'door',\n    'east',\n    'finger',\n    'garage',\n    'guarantee',\n    'hole',\n    'hook',\n    'implement',\n    'layer',\n    'lecture',\n    'lie',\n    'manner',\n    'meeting',\n    'nose',\n    'parking',\n    'partner',\n    'profile',\n    'rice',\n    'routine',\n    'schedule',\n    'swimming',\n    'telephone',\n    'tip',\n    'winter',\n    'airline',\n    'bag',\n    'battle',\n    'bed',\n    'bill',\n    'bother',\n    'cake',\n    'code',\n    'curve',\n    'designer',\n    'dimension',\n    'dress',\n    'ease',\n    'emergency',\n    'evening',\n    'extension',\n    'farm',\n    'fight',\n    'gap',\n    'grade',\n    'holiday',\n    'horror',\n    'horse',\n    'host',\n    'husband',\n    'loan',\n    'mistake',\n    'mountain',\n    'nail',\n    'noise',\n    'occasion',\n    'package',\n    'patient',\n    'pause',\n    'phrase',\n    'proof',\n    'race',\n    'relief',\n    'sand',\n    'sentence',\n    'shoulder',\n    'smoke',\n    'stomach',\n    'string',\n    'tourist',\n    'towel',\n    'vacation',\n    'west',\n    'wheel',\n    'wine',\n    'arm',\n    'aside',\n    'associate',\n    'bet',\n    'blow',\n    'border',\n    'branch',\n    'breast',\n    'brother',\n    'buddy',\n    'bunch',\n    'chip',\n    'coach',\n    'cross',\n    'document',\n    'draft',\n    'dust',\n    'expert',\n    'floor',\n    'god',\n    'golf',\n    'habit',\n    'iron',\n    'judge',\n    'knife',\n    'landscape',\n    'league',\n    'mail',\n    'mess',\n    'native',\n    'opening',\n    'parent',\n    'pattern',\n    'pin',\n    'pool',\n    'pound',\n    'request',\n    'salary',\n    'shame',\n    'shelter',\n    'shoe',\n    'silver',\n    'tackle',\n    'tank',\n    'trust',\n    'assist',\n    'bake',\n    'bar',\n    'bell',\n    'bike',\n    'blame',\n    'boy',\n    'brick',\n    'chair',\n    'closet',\n    'clue',\n    'collar',\n    'comment',\n    'conference',\n    'devil',\n    'diet',\n    'fear',\n    'fuel',\n    'glove',\n    'jacket',\n    'lunch',\n    'monitor',\n    'mortgage',\n    'nurse',\n    'pace',\n    'panic',\n    'peak',\n    'plane',\n    'reward',\n    'row',\n    'sandwich',\n    'shock',\n    'spite',\n    'spray',\n    'surprise',\n    'till',\n    'transition',\n    'weekend',\n    'welcome',\n    'yard',\n    'alarm',\n    'bend',\n    'bicycle',\n    'bite',\n    'blind',\n    'bottle',\n    'cable',\n    'candle',\n    'clerk',\n    'cloud',\n    'concert',\n    'counter',\n    'flower',\n    'grandfather',\n    'harm',\n    'knee',\n    'lawyer',\n    'leather',\n    'load',\n    'mirror',\n    'neck',\n    'pension',\n    'plate',\n    'purple',\n    'ruin',\n    'ship',\n    'skirt',\n    'slice',\n    'snow',\n    'specialist',\n    'stroke',\n    'switch',\n    'trash',\n    'tune',\n    'zone',\n    'anger',\n    'award',\n    'bid',\n    'bitter',\n    'boot',\n    'bug',\n    'camp',\n    'candy',\n    'carpet',\n    'cat',\n    'champion',\n    'channel',\n    'clock',\n    'comfort',\n    'cow',\n    'crack',\n    'engineer',\n    'entrance',\n    'fault',\n    'grass',\n    'guy',\n    'hell',\n    'highlight',\n    'incident',\n    'island',\n    'joke',\n    'jury',\n    'leg',\n    'lip',\n    'mate',\n    'motor',\n    'nerve',\n    'passage',\n    'pen',\n    'pride',\n    'priest',\n    'prize',\n    'promise',\n    'resident',\n    'resort',\n    'ring',\n    'roof',\n    'rope',\n    'sail',\n    'scheme',\n    'script',\n    'sock',\n    'station',\n    'toe',\n    'tower',\n    'truck',\n    'witness',\n    'can',\n    'will',\n    'other',\n    'use',\n    'make',\n    'good',\n    'look',\n    'help',\n    'go',\n    'great',\n    'being',\n    'still',\n    'public',\n    'read',\n    'keep',\n    'start',\n    'give',\n    'human',\n    'local',\n    'general',\n    'specific',\n    'long',\n    'play',\n    'feel',\n    'high',\n    'put',\n    'common',\n    'set',\n    'change',\n    'simple',\n    'past',\n    'big',\n    'possible',\n    'particular',\n    'major',\n    'personal',\n    'current',\n    'national',\n    'cut',\n    'natural',\n    'physical',\n    'show',\n    'try',\n    'check',\n    'second',\n    'call',\n    'move',\n    'pay',\n    'let',\n    'increase',\n    'single',\n    'individual',\n    'turn',\n    'ask',\n    'buy',\n    'guard',\n    'hold',\n    'main',\n    'offer',\n    'potential',\n    'professional',\n    'international',\n    'travel',\n    'cook',\n    'alternative',\n    'special',\n    'working',\n    'whole',\n    'dance',\n    'excuse',\n    'cold',\n    'commercial',\n    'low',\n    'purchase',\n    'deal',\n    'primary',\n    'worth',\n    'fall',\n    'necessary',\n    'positive',\n    'produce',\n    'search',\n    'present',\n    'spend',\n    'talk',\n    'creative',\n    'tell',\n    'cost',\n    'drive',\n    'green',\n    'support',\n    'glad',\n    'remove',\n    'return',\n    'run',\n    'complex',\n    'due',\n    'effective',\n    'middle',\n    'regular',\n    'reserve',\n    'independent',\n    'leave',\n    'original',\n    'reach',\n    'rest',\n    'serve',\n    'watch',\n    'beautiful',\n    'charge',\n    'active',\n    'break',\n    'negative',\n    'safe',\n    'stay',\n    'visit',\n    'visual',\n    'affect',\n    'cover',\n    'report',\n    'rise',\n    'walk',\n    'white',\n    'junior',\n    'pick',\n    'unique',\n    'classic',\n    'final',\n    'lift',\n    'mix',\n    'private',\n    'stop',\n    'teach',\n    'western',\n    'concern',\n    'familiar',\n    'fly',\n    'official',\n    'broad',\n    'comfortable',\n    'gain',\n    'rich',\n    'save',\n    'stand',\n    'young',\n    'heavy',\n    'lead',\n    'listen',\n    'valuable',\n    'worry',\n    'handle',\n    'leading',\n    'meet',\n    'release',\n    'sell',\n    'finish',\n    'normal',\n    'press',\n    'ride',\n    'secret',\n    'spread',\n    'spring',\n    'tough',\n    'wait',\n    'brown',\n    'deep',\n    'display',\n    'flow',\n    'hit',\n    'objective',\n    'shoot',\n    'touch',\n    'cancel',\n    'chemical',\n    'cry',\n    'dump',\n    'extreme',\n    'push',\n    'conflict',\n    'eat',\n    'fill',\n    'formal',\n    'jump',\n    'kick',\n    'opposite',\n    'pass',\n    'pitch',\n    'remote',\n    'total',\n    'treat',\n    'vast',\n    'abuse',\n    'beat',\n    'burn',\n    'deposit',\n    'print',\n    'raise',\n    'sleep',\n    'somewhere',\n    'advance',\n    'consist',\n    'dark',\n    'double',\n    'draw',\n    'equal',\n    'fix',\n    'hire',\n    'internal',\n    'join',\n    'kill',\n    'sensitive',\n    'tap',\n    'win',\n    'attack',\n    'claim',\n    'constant',\n    'drag',\n    'drink',\n    'guess',\n    'minor',\n    'pull',\n    'raw',\n    'soft',\n    'solid',\n    'wear',\n    'weird',\n    'wonder',\n    'annual',\n    'count',\n    'dead',\n    'doubt',\n    'feed',\n    'forever',\n    'impress',\n    'repeat',\n    'round',\n    'sing',\n    'slide',\n    'strip',\n    'wish',\n    'combine',\n    'command',\n    'dig',\n    'divide',\n    'equivalent',\n    'hang',\n    'hunt',\n    'initial',\n    'march',\n    'mention',\n    'spiritual',\n    'survey',\n    'tie',\n    'adult',\n    'brief',\n    'crazy',\n    'escape',\n    'gather',\n    'hate',\n    'prior',\n    'repair',\n    'rough',\n    'sad',\n    'scratch',\n    'sick',\n    'strike',\n    'employ',\n    'external',\n    'hurt',\n    'illegal',\n    'laugh',\n    'lay',\n    'mobile',\n    'nasty',\n    'ordinary',\n    'respond',\n    'royal',\n    'senior',\n    'split',\n    'strain',\n    'struggle',\n    'swim',\n    'train',\n    'upper',\n    'wash',\n    'yellow',\n    'convert',\n    'crash',\n    'dependent',\n    'fold',\n    'funny',\n    'grab',\n    'hide',\n    'miss',\n    'permit',\n    'quote',\n    'recover',\n    'resolve',\n    'roll',\n    'sink',\n    'slip',\n    'spare',\n    'suspect',\n    'sweet',\n    'swing',\n    'twist',\n    'upstairs',\n    'usual',\n    'abroad',\n    'brave',\n    'calm',\n    'concentrate',\n    'estimate',\n    'grand',\n    'male',\n    'mine',\n    'prompt',\n    'quiet',\n    'refuse',\n    'regret',\n    'reveal',\n    'rush',\n    'shake',\n    'shift',\n    'shine',\n    'steal',\n    'suck',\n    'surround',\n    'bear',\n    'brilliant',\n    'dare',\n    'dear',\n    'delay',\n    'drunk',\n    'female',\n    'hurry',\n    'inevitable',\n    'invite',\n    'kiss',\n    'neat',\n    'pop',\n    'punch',\n    'quit',\n    'reply',\n    'representative',\n    'resist',\n    'rip',\n    'rub',\n    'silly',\n    'smile',\n    'spell',\n    'stretch',\n    'stupid',\n    'tear',\n    'temporary',\n    'tomorrow',\n    'wake',\n    'wrap',\n    'yesterday',\n    'Thomas',\n    'Tom',\n    'Lieuwe',\n  ];\n\n  var name =\n    capFirst(name1[getRandomInt(0, name1.length + 1)]) +\n    ' ' +\n    capFirst(name2[getRandomInt(0, name2.length + 1)]);\n  return name;\n}\n","import React from 'react';\nimport { Button, Comment, Icon, Input } from 'semantic-ui-react';\nimport 'emoji-mart/css/emoji-mart.css';\nimport { EmojiData, Picker } from 'emoji-mart';\nimport onClickOutside from 'react-onclickoutside';\n\nimport {\n  formatTimestamp,\n  getColorForStringHex,\n  getDefaultPicture,\n} from '../../utils';\nimport { Separator } from '../App/App';\n\ninterface ChatProps {\n  chat: ChatMessage[];\n  nameMap: StringDict;\n  pictureMap: StringDict;\n  socket: SocketIOClient.Socket;\n  scrollTimestamp: number;\n  className?: string;\n  getMediaDisplayName: Function;\n  hide?: boolean;\n  isChatDisabled?: boolean;\n}\n\nexport class Chat extends React.Component<ChatProps> {\n  public state = { chatMsg: '', isNearBottom: true, isPickerOpen: false };\n  messagesRef = React.createRef<HTMLDivElement>();\n\n  componentDidMount() {\n    this.scrollToBottom();\n    this.messagesRef.current?.addEventListener('scroll', this.onScroll);\n  }\n\n  componentDidUpdate(prevProps: ChatProps) {\n    if (this.props.scrollTimestamp !== prevProps.scrollTimestamp) {\n      if (prevProps.scrollTimestamp === 0 || this.state.isNearBottom) {\n        this.scrollToBottom();\n      }\n    }\n    if (this.props.hide !== prevProps.hide) {\n      this.scrollToBottom();\n    }\n  }\n\n  updateChatMsg = (_e: any, data: { value: string }) => {\n    // console.log(e.target.selectionStart);\n    this.setState({ chatMsg: data.value });\n  };\n\n  sendChatMsg = () => {\n    if (!this.state.chatMsg) {\n      return;\n    }\n    if (this.chatTooLong()) {\n      return;\n    }\n    this.setState({ chatMsg: '' });\n    this.props.socket.emit('CMD:chat', this.state.chatMsg);\n  };\n\n  chatTooLong = () => {\n    return Boolean(this.state.chatMsg?.length > 10000);\n  };\n\n  onScroll = () => {\n    this.setState({ isNearBottom: this.isChatNearBottom() });\n  };\n\n  isChatNearBottom = () => {\n    return (\n      this.messagesRef.current &&\n      this.messagesRef.current.scrollHeight -\n        this.messagesRef.current.scrollTop -\n        this.messagesRef.current.offsetHeight <\n        100\n    );\n  };\n\n  scrollToBottom = () => {\n    if (this.messagesRef.current) {\n      this.messagesRef.current.scrollTop = this.messagesRef.current.scrollHeight;\n    }\n  };\n\n  formatMessage = (cmd: string, msg: string): React.ReactNode | string => {\n    if (cmd === 'host') {\n      return (\n        <React.Fragment>\n          {`changed the video to `}\n          <span style={{ textTransform: 'initial' }}>\n            {this.props.getMediaDisplayName(msg)}\n          </span>\n        </React.Fragment>\n      );\n    } else if (cmd === 'seek') {\n      return `jumped to ${formatTimestamp(msg)}`;\n    } else if (cmd === 'play') {\n      return `started the video at ${formatTimestamp(msg)}`;\n    } else if (cmd === 'pause') {\n      return `paused the video at ${formatTimestamp(msg)}`;\n    } else if (cmd === 'lock') {\n      return `locked the room`;\n    } else if (cmd === 'unlock') {\n      return 'unlocked the room';\n    } else if (cmd === 'vBrowserTimeout') {\n      return (\n        <React.Fragment>\n          The VBrowser shut down automatically.\n          <br />\n          Subscribe for sessions up to 12 hours.\n        </React.Fragment>\n      );\n    } else if (cmd === 'vBrowserAlmostTimeout') {\n      return (\n        <React.Fragment>\n          The VBrowser will shut down soon.\n          <br />\n          Subscribe for sessions up to 12 hours.\n        </React.Fragment>\n      );\n    }\n    return cmd;\n  };\n\n  addEmoji = (emoji: EmojiData) => {\n    this.setState({ chatMsg: this.state.chatMsg + (emoji as any).native });\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        style={{\n          display: this.props.hide ? 'none' : 'flex',\n          flexDirection: 'column',\n          flexGrow: 1,\n          minHeight: 0,\n          marginTop: 0,\n          marginBottom: 0,\n          padding: '8px',\n        }}\n      >\n        <div\n          className=\"chatContainer\"\n          ref={this.messagesRef}\n          style={{ position: 'relative' }}\n        >\n          <Comment.Group>\n            {this.props.chat.map((msg) => (\n              <ChatMessage\n                key={msg.timestamp + msg.id}\n                message={msg}\n                pictureMap={this.props.pictureMap}\n                nameMap={this.props.nameMap}\n                formatMessage={this.formatMessage}\n              />\n            ))}\n            {/* <div ref={this.messagesEndRef} /> */}\n          </Comment.Group>\n          {!this.state.isNearBottom && (\n            <Button\n              size=\"tiny\"\n              onClick={this.scrollToBottom}\n              style={{\n                position: 'sticky',\n                bottom: 0,\n                display: 'block',\n                margin: '0 auto',\n              }}\n            >\n              Jump to bottom\n            </Button>\n          )}\n        </div>\n        <Separator />\n        {this.state.isPickerOpen && (\n          <PickerMenu\n            addEmoji={this.addEmoji}\n            closeMenu={() => this.setState({ isPickerOpen: false })}\n          />\n        )}\n        <Input\n          inverted\n          fluid\n          onKeyPress={(e: any) => e.key === 'Enter' && this.sendChatMsg()}\n          onChange={this.updateChatMsg}\n          value={this.state.chatMsg}\n          error={this.chatTooLong()}\n          icon\n          disabled={this.props.isChatDisabled}\n          placeholder={\n            this.props.isChatDisabled\n              ? 'The chat was disabled by the room owner.'\n              : 'Enter a message...'\n          }\n        >\n          <input />\n          <Icon\n            // style={{ right: '40px' }}\n            onClick={() => this.setState({ isPickerOpen: true })}\n            name={'' as any}\n            inverted\n            circular\n            link\n            disabled={this.props.isChatDisabled}\n            style={{ opacity: 1 }}\n          >\n            <span role=\"img\" aria-label=\"Emoji\">\n              \n            </span>\n          </Icon>\n          {/* <Icon onClick={this.sendChatMsg} name=\"send\" inverted circular link /> */}\n        </Input>\n      </div>\n    );\n  }\n}\n\nconst ChatMessage = ({\n  message,\n  nameMap,\n  pictureMap,\n  formatMessage,\n}: {\n  message: ChatMessage;\n  nameMap: StringDict;\n  pictureMap: StringDict;\n  formatMessage: (cmd: string, msg: string) => React.ReactNode;\n}) => {\n  const { id, timestamp, cmd, msg, system } = message;\n  return (\n    <Comment>\n      {id ? (\n        <Comment.Avatar\n          src={\n            pictureMap[id] ||\n            getDefaultPicture(nameMap[id], getColorForStringHex(id))\n          }\n        />\n      ) : null}\n      <Comment.Content>\n        <Comment.Author as=\"a\" className=\"light\">\n          {Boolean(system) && 'System'}\n          {nameMap[id] || id}\n        </Comment.Author>\n        <Comment.Metadata className=\"dark\">\n          <div>{new Date(timestamp).toLocaleTimeString()}</div>\n        </Comment.Metadata>\n        <Comment.Text className=\"light system\">\n          {cmd && formatMessage(cmd, msg)}\n        </Comment.Text>\n        <Comment.Text className=\"light\">{!cmd && msg}</Comment.Text>\n      </Comment.Content>\n    </Comment>\n  );\n};\n\nclass PickerMenuInner extends React.Component<{\n  addEmoji: (emoji: EmojiData) => void;\n  closeMenu: Function;\n}> {\n  handleClickOutside = () => {\n    this.props.closeMenu();\n  };\n  render() {\n    return (\n      <div style={{ position: 'absolute', bottom: '60px' }}>\n        <Picker\n          set=\"google\"\n          sheetSize={64}\n          theme=\"dark\"\n          showPreview={false}\n          showSkinTones={false}\n          onSelect={this.props.addEmoji}\n        />\n      </div>\n    );\n  }\n}\n\nconst PickerMenu = onClickOutside(PickerMenuInner);\n","import React from 'react';\nimport { Modal, Button, Form, Message } from 'semantic-ui-react';\nimport * as firebase from 'firebase/app';\nimport 'firebase/auth';\n\nexport class LoginModal extends React.Component<{\n  closeLogin: Function;\n}> {\n  public state = { email: '', password: '', isCreateMode: false, error: '' };\n\n  resetPassword = async () => {\n    try {\n      await firebase.auth().sendPasswordResetEmail(this.state.email);\n      this.props.closeLogin();\n    } catch (e) {\n      // handle exceptions\n      this.setState({ error: e.message });\n    }\n  };\n\n  emailSignIn = async (email: string, password: string) => {\n    try {\n      await firebase.auth().signInWithEmailAndPassword(email, password);\n\n      this.props.closeLogin();\n    } catch (e) {\n      // handle exceptions\n      this.setState({ error: e.message });\n    }\n  };\n\n  createAccount = async (email: string, password: string) => {\n    try {\n      await firebase.auth().createUserWithEmailAndPassword(email, password);\n    } catch (e) {\n      // handle exceptions\n      this.setState({ error: e.message });\n    }\n  };\n\n  emailLinkSignIn = async () => {\n    await firebase.auth().sendSignInLinkToEmail(this.state.email, {\n      url: window.location.href,\n      handleCodeInApp: true,\n    });\n  };\n\n  render() {\n    const { closeLogin } = this.props;\n    return (\n      <Modal open={true} onClose={closeLogin as any}>\n        <Modal.Header>\n          {this.state.isCreateMode ? 'Create an account' : 'Login'}\n        </Modal.Header>\n        <Modal.Content>\n          {this.state.error && (\n            <Message color=\"red\" header=\"Error\" content={this.state.error} />\n          )}\n          <Form>\n            <Form.Field>\n              <label>Email</label>\n              <input\n                placeholder=\"Email\"\n                value={this.state.email}\n                onChange={(e) => this.setState({ email: e.target.value })}\n              />\n            </Form.Field>\n            <Form.Field>\n              <label>Password</label>\n              <input\n                type=\"password\"\n                placeholder=\"Password\"\n                value={this.state.password}\n                onChange={(e) => this.setState({ password: e.target.value })}\n              />\n            </Form.Field>\n            {!this.state.isCreateMode && (\n              <div>\n                Don't have an account?{' '}\n                <button\n                  type=\"button\"\n                  className=\"linkButton\"\n                  onClick={() => this.setState({ isCreateMode: true })}\n                >\n                  Create one.\n                </button>{' '}\n                Forgot your password? Enter your email and{' '}\n                <button\n                  type=\"button\"\n                  className=\"linkButton\"\n                  onClick={this.resetPassword}\n                >\n                  reset it.\n                </button>\n              </div>\n            )}\n            {this.state.isCreateMode ? (\n              <Button\n                type=\"submit\"\n                onClick={() =>\n                  this.createAccount(this.state.email, this.state.password)\n                }\n              >\n                Create\n              </Button>\n            ) : (\n              <Button\n                type=\"submit\"\n                onClick={() =>\n                  this.emailSignIn(this.state.email, this.state.password)\n                }\n              >\n                Login\n              </Button>\n            )}\n          </Form>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React from 'react';\nimport { serverPath, colorMappings } from '../../utils';\nimport { Icon, Popup, Button, Dropdown } from 'semantic-ui-react';\nimport * as firebase from 'firebase/app';\nimport 'firebase/auth';\nimport { LoginModal } from '../Modal/LoginModal';\nimport axios from 'axios';\n\nexport class NewRoomButton extends React.Component<{ size?: string }> {\n  createRoom = async () => {\n    const response = await window.fetch(serverPath + '/createRoom', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({}),\n    });\n    const data = await response.json();\n    const { name } = data;\n    window.location.href = '/#' + name;\n    window.location.reload();\n  };\n  render() {\n    return (\n      <Popup\n        content=\"Create a new room with a random URL that you can share with friends\"\n        trigger={\n          <Button\n            color=\"blue\"\n            size={this.props.size as any}\n            icon\n            labelPosition=\"left\"\n            onClick={this.createRoom}\n            className=\"toolButton\"\n          >\n            <Icon name=\"certificate\" />\n            New Room\n          </Button>\n        }\n      />\n    );\n  }\n}\n\nexport class SignInButton extends React.Component<{\n  user: firebase.User | undefined;\n  fluid?: boolean;\n}> {\n  public state = { isLoginOpen: false };\n\n  facebookSignIn = async () => {\n    const provider = new firebase.auth.FacebookAuthProvider();\n    await firebase.auth().signInWithPopup(provider);\n  };\n\n  googleSignIn = async () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    await firebase.auth().signInWithPopup(provider);\n  };\n\n  signOut = () => {\n    firebase.auth().signOut();\n    window.location.reload();\n  };\n\n  render() {\n    if (this.props.user) {\n      return (\n        <Button\n          style={{ height: '36px' }}\n          icon\n          labelPosition=\"left\"\n          onClick={this.signOut}\n          fluid={this.props.fluid}\n        >\n          <Icon name=\"sign out\" />\n          Sign out\n        </Button>\n      );\n    }\n    return (\n      <React.Fragment>\n        {this.state.isLoginOpen && (\n          <LoginModal\n            closeLogin={() => this.setState({ isLoginOpen: false })}\n          />\n        )}\n        <Popup\n          basic\n          content=\"Sign in to set your name and picture, subscribe, or launch VBrowsers\"\n          trigger={\n            <Dropdown\n              style={{ height: '36px' }}\n              icon=\"sign in\"\n              labeled\n              className=\"icon\"\n              button\n              text=\"Sign in\"\n              fluid={this.props.fluid}\n            >\n              <Dropdown.Menu>\n                <Dropdown.Item onClick={this.facebookSignIn}>\n                  <Icon name=\"facebook\" />\n                  Facebook\n                </Dropdown.Item>\n                <Dropdown.Item onClick={this.googleSignIn}>\n                  <Icon name=\"google\" />\n                  Google\n                </Dropdown.Item>\n                <Dropdown.Item\n                  onClick={() => this.setState({ isLoginOpen: true })}\n                >\n                  <Icon name=\"mail\" />\n                  Email\n                </Dropdown.Item>\n              </Dropdown.Menu>\n            </Dropdown>\n          }\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport class ListRoomsButton extends React.Component<{\n  user: firebase.User | undefined;\n}> {\n  public state = { rooms: [] as PermanentRoom[] };\n\n  componentDidMount() {\n    this.refreshRooms();\n  }\n\n  refreshRooms = async () => {\n    if (this.props.user) {\n      const token = await this.props.user.getIdToken();\n      const response = await axios.get(\n        serverPath + `/listRooms?uid=${this.props.user?.uid}&token=${token}`\n      );\n      this.setState({ rooms: response.data });\n    }\n  };\n\n  deleteRoom = async (roomId: string) => {\n    if (this.props.user) {\n      const token = await this.props.user.getIdToken();\n      await axios.delete(\n        serverPath +\n          `/deleteRoom?uid=${this.props.user?.uid}&token=${token}&roomId=${roomId}`\n      );\n      this.setState({\n        rooms: this.state.rooms.filter((room) => room.roomId !== roomId),\n      });\n      this.refreshRooms();\n    }\n  };\n\n  render() {\n    return (\n      <Dropdown\n        style={{ height: '36px' }}\n        icon=\"group\"\n        labeled\n        className=\"icon\"\n        button\n        text=\"My Rooms\"\n        onClick={this.refreshRooms}\n      >\n        <Dropdown.Menu>\n          {this.state.rooms.length === 0 && (\n            <Dropdown.Item disabled>You have no permanent rooms.</Dropdown.Item>\n          )}\n          {this.state.rooms.map((room: any) => {\n            return (\n              <Dropdown.Item\n                link\n                href={\n                  room.vanity\n                    ? '/r/' + room.vanity\n                    : '/' + room.roomId.replace('/', '#')\n                }\n                onClick={() => {\n                  if (!room.vanity) {\n                    setTimeout(() => window.location.reload(), 100);\n                  }\n                }}\n              >\n                <div style={{ display: 'flex' }}>\n                  {room.vanity\n                    ? `/r/${room.vanity}`\n                    : room.roomId.replace('/', '#')}\n                  <div style={{ marginLeft: 'auto', paddingLeft: '20px' }}>\n                    <Popup\n                      content=\"Delete room\"\n                      trigger={\n                        <Icon\n                          onClick={(e: React.MouseEvent) => {\n                            e.stopPropagation();\n                            this.deleteRoom(room.roomId);\n                          }}\n                          name=\"x\"\n                          color=\"red\"\n                        />\n                      }\n                    />\n                  </div>\n                </div>\n              </Dropdown.Item>\n            );\n          })}\n        </Dropdown.Menu>\n      </Dropdown>\n    );\n  }\n}\n\nexport class TopBar extends React.Component<{\n  user?: any;\n  hideNewRoom?: boolean;\n  hideSignin?: boolean;\n  hideMyRooms?: boolean;\n}> {\n  render() {\n    return (\n      <React.Fragment>\n        <div\n          style={{\n            display: 'flex',\n            flexWrap: 'wrap',\n            padding: '1em',\n            paddingBottom: '0px',\n          }}\n        >\n          <a href=\"/\" style={{ display: 'flex' }}>\n            <div\n              style={{\n                height: '48px',\n                width: '48px',\n                marginRight: '10px',\n                borderRadius: '50%',\n                position: 'relative',\n                backgroundColor: '#' + colorMappings.blue,\n              }}\n            >\n              <Icon\n                inverted\n                name=\"film\"\n                size=\"large\"\n                style={{\n                  position: 'absolute',\n                  top: 8,\n                  width: '100%',\n                  margin: '0 auto',\n                }}\n              />\n              <Icon\n                inverted\n                name=\"group\"\n                size=\"large\"\n                color=\"green\"\n                style={{\n                  position: 'absolute',\n                  bottom: 8,\n                  width: '100%',\n                  margin: '0 auto',\n                }}\n              />\n            </div>\n            <div\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n              }}\n            >\n              <div\n                style={{\n                  textTransform: 'uppercase',\n                  fontWeight: 700,\n                  color: '#2185d0',\n                  fontSize: '30px',\n                  lineHeight: '30px',\n                }}\n              >\n                Watch\n              </div>\n              <div\n                style={{\n                  textTransform: 'uppercase',\n                  fontWeight: 700,\n                  color: '#21ba45',\n                  fontSize: '30px',\n                  lineHeight: '30px',\n                  marginLeft: 'auto',\n                }}\n              >\n                Party\n              </div>\n            </div>\n          </a>\n          <div\n            style={{\n              display: 'flex',\n              marginLeft: '10px',\n              alignItems: 'center',\n            }}\n          >\n            <a\n              href=\"https://discord.gg/3rYj5HV\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"footerIcon\"\n              title=\"Discord\"\n            >\n              <Icon name=\"discord\" size=\"big\" link />\n            </a>\n            <a\n              href=\"https://github.com/howardchung/watchparty\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"footerIcon\"\n              title=\"GitHub\"\n            >\n              <Icon name=\"github\" size=\"big\" link />\n            </a>\n          </div>\n          <div\n            style={{\n              display: 'flex',\n              marginLeft: 'auto',\n            }}\n          >\n            {!this.props.hideNewRoom && <NewRoomButton />}\n            {!this.props.hideMyRooms && this.props.user && (\n              <ListRoomsButton user={this.props.user} />\n            )}\n            {!this.props.hideSignin && <SignInButton user={this.props.user} />}\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n","export const OPCODE = {\n  MOVE: 0x01,\n  SCROLL: 0x02,\n  KEY_DOWN: 0x03,\n  KEY_UP: 0x04,\n} as const;\n","export const EVENT = {\n  // Internal Events\n  CONNECTING: 'CONNECTING',\n  CONNECTED: 'CONNECTED',\n  DISCONNECTED: 'DISCONNECTED',\n  TRACK: 'TRACK',\n  MESSAGE: 'MESSAGE',\n  DATA: 'DATA',\n\n  // Websocket Events\n  SYSTEM: {\n    DISCONNECT: 'system/disconnect',\n  },\n  SIGNAL: {\n    ANSWER: 'signal/answer',\n    PROVIDE: 'signal/provide',\n  },\n  MEMBER: {\n    LIST: 'member/list',\n    CONNECTED: 'member/connected',\n    DISCONNECTED: 'member/disconnected',\n  },\n  CONTROL: {\n    LOCKED: 'control/locked',\n    RELEASE: 'control/release',\n    REQUEST: 'control/request',\n    REQUESTING: 'control/requesting',\n    CLIPBOARD: 'control/clipboard',\n    GIVE: 'control/give',\n  },\n  CHAT: {\n    MESSAGE: 'chat/message',\n    EMOTE: 'chat/emote',\n  },\n  SCREEN: {\n    CONFIGURATIONS: 'screen/configurations',\n    RESOLUTION: 'screen/resolution',\n    SET: 'screen/set',\n  },\n  ADMIN: {\n    BAN: 'admin/ban',\n    KICK: 'admin/kick',\n    LOCK: 'admin/lock',\n    UNLOCK: 'admin/unlock',\n    MUTE: 'admin/mute',\n    UNMUTE: 'admin/unmute',\n    CONTROL: 'admin/control',\n    RELEASE: 'admin/release',\n    GIVE: 'admin/give',\n  },\n} as const;\n\nexport type Events = typeof EVENT;\n\nexport type WebSocketEvents =\n  | SystemEvents\n  | ControlEvents\n  | MemberEvents\n  | SignalEvents\n  | ChatEvents\n  | ScreenEvents\n  | AdminEvents\n  | 'ka';\n\nexport type ControlEvents =\n  | typeof EVENT.CONTROL.LOCKED\n  | typeof EVENT.CONTROL.RELEASE\n  | typeof EVENT.CONTROL.REQUEST\n  | typeof EVENT.CONTROL.GIVE\n  | typeof EVENT.CONTROL.CLIPBOARD;\n\nexport type SystemEvents = typeof EVENT.SYSTEM.DISCONNECT;\nexport type MemberEvents =\n  | typeof EVENT.MEMBER.LIST\n  | typeof EVENT.MEMBER.CONNECTED\n  | typeof EVENT.MEMBER.DISCONNECTED;\nexport type SignalEvents =\n  | typeof EVENT.SIGNAL.ANSWER\n  | typeof EVENT.SIGNAL.PROVIDE;\nexport type ChatEvents = typeof EVENT.CHAT.MESSAGE | typeof EVENT.CHAT.EMOTE;\nexport type ScreenEvents =\n  | typeof EVENT.SCREEN.CONFIGURATIONS\n  | typeof EVENT.SCREEN.RESOLUTION\n  | typeof EVENT.SCREEN.SET;\n\nexport type AdminEvents =\n  | typeof EVENT.ADMIN.BAN\n  | typeof EVENT.ADMIN.KICK\n  | typeof EVENT.ADMIN.LOCK\n  | typeof EVENT.ADMIN.UNLOCK\n  | typeof EVENT.ADMIN.MUTE\n  | typeof EVENT.ADMIN.UNMUTE\n  | typeof EVENT.ADMIN.CONTROL\n  | typeof EVENT.ADMIN.RELEASE\n  | typeof EVENT.ADMIN.GIVE;\n","import EventEmitter from 'eventemitter3';\n\nimport { iceServers } from '../../utils';\nimport { OPCODE } from './data';\nimport { EVENT, WebSocketEvents } from './events';\nimport {\n  SignalProvidePayload,\n  WebSocketMessages,\n  WebSocketPayloads,\n} from './messages';\n\nexport abstract class BaseClient extends EventEmitter<any> {\n  protected _ws?: WebSocket;\n  protected _peer?: RTCPeerConnection;\n  protected _channel?: RTCDataChannel;\n  protected _timeout?: NodeJS.Timeout;\n  protected _displayname?: string;\n  protected _state: RTCIceConnectionState = 'disconnected';\n  protected _id = '';\n\n  get id() {\n    return this._id;\n  }\n\n  get supported() {\n    return (\n      typeof RTCPeerConnection !== 'undefined' &&\n      typeof RTCPeerConnection.prototype.addTransceiver !== 'undefined'\n    );\n  }\n\n  get socketOpen() {\n    return (\n      typeof this._ws !== 'undefined' && this._ws.readyState === WebSocket.OPEN\n    );\n  }\n\n  get peerConnected() {\n    return (\n      typeof this._peer !== 'undefined' &&\n      ['connected', 'checking', 'completed'].includes(this._state)\n    );\n  }\n\n  get connected() {\n    return this.peerConnected && this.socketOpen;\n  }\n\n  public connect(url: string, password: string, displayname: string) {\n    if (this.socketOpen) {\n      this.emit('warn', `attempting to create websocket while connection open`);\n      return;\n    }\n\n    if (!this.supported) {\n      this.onDisconnected(\n        new Error('browser does not support webrtc (RTCPeerConnection missing)')\n      );\n      return;\n    }\n\n    if (displayname === '') {\n      throw new Error('Must add a displayname');\n    }\n\n    this._displayname = displayname;\n    this[EVENT.CONNECTING]();\n\n    try {\n      this._ws = new WebSocket(`${url}ws?password=${password}`);\n      this.emit('debug', `connecting to ${this._ws.url}`);\n      this._ws.onmessage = this.onMessage.bind(this);\n      this._ws.onerror = (event) => this.onError.bind(this);\n      this._ws.onclose = (event) =>\n        this.onDisconnected.bind(this, new Error('websocket closed'));\n      this._timeout = setTimeout(this.onTimeout.bind(this), 15000);\n    } catch (err) {\n      this.onDisconnected(err);\n    }\n  }\n\n  protected disconnect() {\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n\n    if (this.socketOpen) {\n      try {\n        this._ws!.close();\n      } catch (err) {}\n      this._ws = undefined;\n    }\n\n    if (this.peerConnected) {\n      try {\n        this._peer!.close();\n      } catch (err) {}\n      this._peer = undefined;\n    }\n\n    this._state = 'disconnected';\n    this._displayname = undefined;\n    this._id = '';\n  }\n\n  public sendData(\n    event: 'wheel' | 'mousemove',\n    data: { x: number; y: number }\n  ): void;\n  public sendData(\n    event: 'mousedown' | 'mouseup' | 'keydown' | 'keyup',\n    data: { key: number }\n  ): void;\n  public sendData(event: string, data: any) {\n    if (!this.connected) {\n      this.emit('warn', `attempting to send data while disconnected`);\n      return;\n    }\n\n    let buffer: ArrayBuffer;\n    let payload: DataView;\n    switch (event) {\n      case 'mousemove':\n        buffer = new ArrayBuffer(7);\n        payload = new DataView(buffer);\n        payload.setUint8(0, OPCODE.MOVE);\n        payload.setUint16(1, 4, true);\n        payload.setUint16(3, data.x, true);\n        payload.setUint16(5, data.y, true);\n        break;\n      case 'wheel':\n        buffer = new ArrayBuffer(7);\n        payload = new DataView(buffer);\n        payload.setUint8(0, OPCODE.SCROLL);\n        payload.setUint16(1, 4, true);\n        payload.setInt16(3, data.x, true);\n        payload.setInt16(5, data.y, true);\n        break;\n      case 'keydown':\n      case 'mousedown':\n        buffer = new ArrayBuffer(5);\n        payload = new DataView(buffer);\n        payload.setUint8(0, OPCODE.KEY_DOWN);\n        payload.setUint16(1, 1, true);\n        payload.setUint16(3, data.key, true);\n        break;\n      case 'keyup':\n      case 'mouseup':\n        buffer = new ArrayBuffer(5);\n        payload = new DataView(buffer);\n        payload.setUint8(0, OPCODE.KEY_UP);\n        payload.setUint16(1, 1, true);\n        payload.setUint16(3, data.key, true);\n        break;\n      default:\n        this.emit('warn', `unknown data event: ${event}`);\n    }\n\n    // @ts-ignore\n    if (typeof buffer !== 'undefined') {\n      this._channel!.send(buffer);\n    }\n  }\n\n  public sendMessage(event: WebSocketEvents, payload?: WebSocketPayloads) {\n    if (!this.connected) {\n      this.emit('warn', `attempting to send message while disconnected`);\n      return;\n    }\n    this.emit(\n      'debug',\n      `sending event '${event}' ${payload ? `with payload: ` : ''}`,\n      payload\n    );\n    this._ws!.send(JSON.stringify({ event, ...payload }));\n  }\n\n  public createPeer(sdp: string, lite: boolean, servers: string[]) {\n    this.emit('debug', `creating peer`);\n    if (!this.socketOpen) {\n      this.emit(\n        'warn',\n        `attempting to create peer with no websocket: `,\n        this._ws ? `state: ${this._ws.readyState}` : 'no socket'\n      );\n      return;\n    }\n\n    if (this.peerConnected) {\n      this.emit('warn', `attempting to create peer while connected`);\n      return;\n    }\n\n    this._peer = new RTCPeerConnection();\n    if (lite !== true) {\n      this._peer = new RTCPeerConnection({\n        iceServers: servers ? [{ urls: servers }] : iceServers(),\n      });\n    }\n\n    this._peer.onconnectionstatechange = (event) => {\n      this.emit(\n        'debug',\n        `peer connection state changed`,\n        this._peer ? this._peer.connectionState : undefined\n      );\n    };\n\n    this._peer.onsignalingstatechange = (event) => {\n      this.emit(\n        'debug',\n        `peer signaling state changed`,\n        this._peer ? this._peer.signalingState : undefined\n      );\n    };\n\n    this._peer.oniceconnectionstatechange = (event) => {\n      this._state = this._peer!.iceConnectionState;\n\n      this.emit(\n        'debug',\n        `peer ice connection state changed: ${this._peer!.iceConnectionState}`\n      );\n\n      switch (this._state) {\n        case 'checking':\n          if (this._timeout) {\n            clearTimeout(this._timeout);\n          }\n          break;\n        case 'connected':\n          this.onConnected();\n          break;\n        case 'failed':\n          this.onDisconnected(new Error('peer failed'));\n          break;\n        case 'disconnected':\n          this.onDisconnected(new Error('peer disconnected'));\n          break;\n      }\n    };\n\n    this._peer.ontrack = this.onTrack.bind(this);\n    this._peer.addTransceiver('audio', { direction: 'recvonly' });\n    this._peer.addTransceiver('video', { direction: 'recvonly' });\n\n    this._channel = this._peer.createDataChannel('data');\n    this._channel.onerror = this.onError.bind(this);\n    this._channel.onmessage = this.onData.bind(this);\n    this._channel.onclose = this.onDisconnected.bind(\n      this,\n      new Error('peer data channel closed')\n    );\n\n    this._peer.setRemoteDescription({ type: 'offer', sdp });\n    this._peer\n      .createAnswer()\n      .then((d) => {\n        this._peer!.setLocalDescription(d);\n        this._ws!.send(\n          JSON.stringify({\n            event: EVENT.SIGNAL.ANSWER,\n            sdp: d.sdp,\n            displayname: this._displayname,\n          })\n        );\n      })\n      .catch((err) => this.emit('error', err));\n  }\n\n  private onMessage(e: MessageEvent) {\n    const { event, ...payload } = JSON.parse(e.data) as WebSocketMessages;\n\n    this.emit(\n      'debug',\n      `received websocket event ${event} ${payload ? `with payload: ` : ''}`,\n      payload\n    );\n\n    if (event === EVENT.SIGNAL.PROVIDE) {\n      const { sdp, lite, ice, id } = payload as SignalProvidePayload;\n      this._id = id;\n      this.createPeer(sdp, lite, ice);\n      return;\n    }\n\n    // @ts-ignore\n    if (typeof this[event] === 'function') {\n      // @ts-ignore\n      this[event](payload);\n    } else {\n      this[EVENT.MESSAGE](event, payload);\n    }\n  }\n\n  private onData(e: MessageEvent) {\n    this[EVENT.DATA](e.data);\n  }\n\n  private onTrack(event: RTCTrackEvent) {\n    this.emit(\n      'debug',\n      `received ${event.track.kind} track from peer: ${event.track.id}`,\n      event\n    );\n    const stream = event.streams[0];\n    if (!stream) {\n      this.emit(\n        'warn',\n        `no stream provided for track ${event.track.id}(${event.track.label})`\n      );\n      return;\n    }\n    this[EVENT.TRACK](event);\n  }\n\n  private onError(event: Event) {\n    this.emit('error', (event as ErrorEvent).error);\n  }\n\n  private onConnected() {\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n\n    if (!this.connected) {\n      this.emit('warn', `onConnected called while being disconnected`);\n      return;\n    }\n\n    this.emit('debug', `connected`);\n    this[EVENT.CONNECTED]();\n  }\n\n  private onTimeout() {\n    this.emit('debug', `connection timeout`);\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n    this.onDisconnected(new Error('connection timeout'));\n  }\n\n  protected onDisconnected(reason?: Error) {\n    this.disconnect();\n    this.emit('debug', `disconnected:`, reason);\n    this[EVENT.DISCONNECTED](reason);\n  }\n\n  protected [EVENT.MESSAGE](event: string, payload: any) {\n    this.emit('warn', `unhandled websocket event '${event}':`, payload);\n  }\n\n  protected abstract [EVENT.CONNECTING](): void;\n  protected abstract [EVENT.CONNECTED](): void;\n  protected abstract [EVENT.DISCONNECTED](reason?: Error): void;\n  protected abstract [EVENT.TRACK](event: RTCTrackEvent): void;\n  protected abstract [EVENT.DATA](data: any): void;\n}\n","import React from 'react';\n\nimport { EVENT } from './events';\nimport { NekoClient } from '.';\n\n// import { EVENT } from './events';\n\nexport default class VBrowser extends React.Component<{\n  username: string;\n  password: string;\n  hostname: string;\n  controlling: boolean;\n  setLoadingFalse: Function;\n  resolution: string;\n  setResolution: Function;\n  doPlay: Function;\n}> {\n  // private observer = new ResizeObserver(this.onResize);\n  private focused = false;\n  private fullscreen = false;\n  private activeKeys: Set<number> = new Set();\n  private controlling = false;\n  private scroll = 1; // 1 to 10\n  private scroll_invert = true;\n  private width = 1280;\n  private height = 720;\n  private rate = 30;\n  private keepAliveInterval = 0;\n  // private _component = React.createRef<HTMLDivElement>();\n  private _container = React.createRef<HTMLDivElement>();\n  private _overlay = React.createRef<HTMLDivElement>();\n  // private _aspect = React.createRef<HTMLDivElement>();\n  // private _player = React.createRef<HTMLDivElement>();\n  private _video = React.createRef<HTMLVideoElement>();\n  // private _resolution = React.createRef<HTMLDivElement>();\n  private $client: NekoClient = new NekoClient();\n\n  componentDidMount() {\n    this.controlling = this.props.controlling;\n    this.keepAliveInterval = window.setInterval(\n      () => this.$client.sendMessage('ka'),\n      10000\n    );\n\n    this.$client.on(EVENT.CONNECTED, () => {\n      if (this.props.controlling) {\n        this.takeControl();\n      }\n    });\n    this.$client.on(EVENT.DISCONNECTED, () => {\n      this.$client.login(url, this.props.password, this.props.username);\n    });\n    this.$client.on(EVENT.SCREEN.RESOLUTION, (data) => {\n      this.width = data.width;\n      this.height = data.height;\n      this.rate = data.rate;\n      // Update our state with the resolution sent from server\n      this.props.setResolution(`${this.width}x${this.height}@${this.rate}`);\n    });\n    this.$client.on(EVENT.TRACK, (track: MediaStreamTrack, stream) => {\n      // console.log(track, streams);\n      const video = document.getElementById('leftVideo') as HTMLVideoElement;\n      video.src = '';\n      video.srcObject = stream;\n      this.props.doPlay();\n    });\n    this.$client.on(EVENT.CONTROL.CLIPBOARD, this.onClipboardChanged);\n\n    if (process.env.NODE_ENV === 'development') {\n      this.$client.on('debug', (e, data) => console.log(e, data));\n    }\n\n    const url = 'wss://' + this.props.hostname + '/';\n    this.$client.login(url, this.props.password, this.props.username);\n\n    // this._container.current?.addEventListener('resize', this.onResize);\n    // this.onResize();\n\n    // document.addEventListener('fullscreenchange', () => {\n    //   this.onResize();\n    // });\n\n    document.addEventListener('focusin', this.onFocus.bind(this));\n    document.addEventListener('focusout', this.onBlur.bind(this));\n\n    document\n      .getElementById('leftOverlay')\n      ?.addEventListener('wheel', this.onWheel, { passive: false });\n  }\n\n  componentDidUpdate(prevProps: any) {\n    // console.log(this.props.controlling, prevProps.controlling);\n    this.controlling = this.props.controlling;\n    if (this.props.controlling && !prevProps.controlling) {\n      this.takeControl();\n    }\n    if (this.props.resolution !== prevProps.resolution) {\n      this.changeResolution(this.props.resolution);\n    }\n  }\n\n  componentWillUnmount() {\n    window.clearInterval(this.keepAliveInterval);\n    this.$client.removeAllListeners();\n    this.$client.logout();\n  }\n\n  takeControl = () => {\n    if (this.$client.connected) {\n      this.$client.sendMessage(EVENT.ADMIN.CONTROL);\n    } else {\n      this.$client.once(EVENT.CONNECTED, () => {\n        this.$client.sendMessage(EVENT.ADMIN.CONTROL);\n      });\n    }\n  };\n\n  changeResolution = (resString: string) => {\n    const split = resString.split(/x|@/);\n    const width = Number(split[0]);\n    const height = Number(split[1]);\n    const rate = Number(split[2]);\n    this.$client.sendMessage(EVENT.SCREEN.SET, { width, height, rate });\n  };\n\n  onClipboardChanged(clipboard: string) {\n    if (\n      navigator.clipboard &&\n      typeof navigator.clipboard.writeText === 'function'\n    ) {\n      // Received clipboard contents from vbrowser\n      navigator.clipboard.writeText(clipboard);\n    }\n  }\n  onFocus = async () => {\n    if (\n      this.props.controlling &&\n      navigator.clipboard &&\n      typeof navigator.clipboard.readText === 'function'\n    ) {\n      const text = await navigator.clipboard.readText();\n      // console.log('[FOCUS]', text);\n      // send clipboard contents to vbrowser\n      this.$client.sendMessage(EVENT.CONTROL.CLIPBOARD, { text });\n    }\n  };\n\n  onBlur = () => {\n    if (!this.focused || !this.controlling) {\n      return;\n    }\n\n    this.activeKeys.forEach((key) => {\n      this.$client.sendData('keyup', { key });\n      this.activeKeys.delete(key);\n    });\n  };\n\n  onClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  onContextMenu = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  onMousePos = (e: MouseEvent | React.MouseEvent) => {\n    const { w, h } = { w: this.width, h: this.height };\n    const rect = this._overlay.current!.getBoundingClientRect();\n    this.$client.sendData('mousemove', {\n      x: Math.round((w / rect.width) * (e.clientX - rect.left)),\n      y: Math.round((h / rect.height) * (e.clientY - rect.top)),\n    });\n  };\n\n  onWheel = (e: WheelEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.controlling) {\n      return;\n    }\n    this.onMousePos(e);\n\n    let x = e.deltaX;\n    let y = e.deltaY;\n\n    if (this.scroll_invert) {\n      x = x * -1;\n      y = y * -1;\n    }\n\n    x = Math.min(Math.max(x, -this.scroll), this.scroll);\n    y = Math.min(Math.max(y, -this.scroll), this.scroll);\n\n    this.$client.sendData('wheel', { x, y });\n  };\n\n  onMouseDown = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.controlling) {\n      return;\n    }\n    this.onMousePos(e);\n    this.$client.sendData('mousedown', { key: e.button });\n  };\n\n  onMouseUp = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.controlling) {\n      return;\n    }\n    this.onMousePos(e);\n    this.$client.sendData('mouseup', { key: e.button });\n  };\n\n  onMouseMove = (e: React.MouseEvent) => {\n    if (!this.controlling) {\n      return;\n    }\n    this.onMousePos(e);\n  };\n\n  onMouseEnter = (e: React.MouseEvent) => {\n    if (!this.controlling) {\n      return;\n    }\n    this._overlay.current!.focus();\n    this.onFocus();\n    this.focused = true;\n  };\n\n  onMouseLeave = (e: React.MouseEvent) => {\n    if (!this.controlling) {\n      return;\n    }\n    this._overlay.current!.blur();\n    this.focused = false;\n  };\n\n  // frick you firefox\n  getCode = (e: React.KeyboardEvent): number => {\n    let key = e.keyCode;\n    if (key === 59 && (e.key === ';' || e.key === ':')) {\n      key = 186;\n    }\n\n    if (key === 61 && (e.key === '=' || e.key === '+')) {\n      key = 187;\n    }\n\n    if (key === 173 && (e.key === '-' || e.key === '_')) {\n      key = 189;\n    }\n\n    return key;\n  };\n\n  onKeyDown = (e: React.KeyboardEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.focused || !this.controlling) {\n      return;\n    }\n\n    let key = this.getCode(e);\n    this.$client.sendData('keydown', { key });\n    this.activeKeys.add(key);\n  };\n\n  onKeyUp = (e: React.KeyboardEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.focused || !this.controlling) {\n      return;\n    }\n\n    let key = this.getCode(e);\n    this.$client.sendData('keyup', { key });\n    this.activeKeys.delete(key);\n  };\n\n  onResize = () => {\n    // let height = 0;\n    // if (!this.fullscreen) {\n    //   const offsetWidth = this._component.current?.offsetWidth;\n    //   const offsetHeight = this._component.current?.offsetHeight;\n    //   this._player.current!.style.width = `${offsetWidth}px`;\n    //   this._player.current!.style.height = `${offsetHeight}px`;\n    //   height = offsetHeight as number;\n    // } else {\n    //   const offsetHeight = this._player.current?.offsetHeight;\n    //   height = offsetHeight as number;\n    // }\n    // this._container.current!.style.maxWidth = `${\n    //   (this.horizontal / this.vertical) * height\n    // }px`;\n    // this._aspect.current!.style.paddingBottom = `${\n    //   (this.vertical / this.horizontal) * 100\n    // }%`;\n  };\n\n  render() {\n    return (\n      <div\n        id=\"leftVideoParent\"\n        ref={this._container}\n        style={{ position: 'relative', width: '100%' }}\n      >\n        <video ref={this._video} id=\"leftVideo\" style={{ width: '100%' }} />\n        <div\n          ref={this._overlay}\n          id={'leftOverlay'}\n          tabIndex={0}\n          style={{\n            width: document.getElementById('leftVideo')?.clientWidth,\n            height: document.getElementById('leftVideo')?.clientHeight,\n            position: 'absolute',\n            top: 0,\n            bottom: 0,\n            // disable firefox scrollbars?\n            scrollbarWidth: 'none',\n          }}\n          onClick={this.onClick}\n          onContextMenu={this.onContextMenu}\n          // onWheel={this.onWheel}\n          onMouseMove={this.onMouseMove}\n          onMouseDown={this.onMouseDown}\n          onMouseUp={this.onMouseUp}\n          onMouseEnter={this.onMouseEnter}\n          onMouseLeave={this.onMouseLeave}\n          onKeyDown={this.onKeyDown}\n          onKeyUp={this.onKeyUp}\n        />\n      </div>\n    );\n  }\n}\n","import EventEmitter from 'eventemitter3';\n\nimport { BaseClient } from './base';\n//import { Member } from './types';\nimport { EVENT } from './events';\nimport {\n  ControlClipboardPayload,\n  ControlPayload,\n  ControlTargetPayload,\n  DisconnectPayload,\n  ScreenConfigurationsPayload,\n  ScreenResolutionPayload,\n} from './messages';\n\nexport class NekoClient extends BaseClient implements EventEmitter<any> {\n  login(url: string, password: string, displayname: string) {\n    this.connect(url, password, displayname);\n  }\n\n  logout() {\n    this.disconnect();\n  }\n\n  /////////////////////////////\n  // Internal Events\n  /////////////////////////////\n  protected [EVENT.CONNECTING]() {}\n\n  protected [EVENT.CONNECTED]() {\n    this.emit(EVENT.CONNECTED);\n  }\n\n  protected [EVENT.DISCONNECTED](reason?: Error) {\n    console.warn(reason);\n    this.emit(EVENT.DISCONNECTED);\n  }\n\n  protected [EVENT.TRACK](event: RTCTrackEvent) {\n    const { track, streams } = event;\n    this.emit(EVENT.TRACK, track, streams[0]);\n  }\n\n  protected [EVENT.DATA](data: any) {\n    console.log('[DATA]', data);\n  }\n\n  /////////////////////////////\n  // System Events\n  /////////////////////////////\n  protected [EVENT.SYSTEM.DISCONNECT]({ message }: DisconnectPayload) {\n    this.onDisconnected(new Error(message));\n  }\n\n  /////////////////////////////\n  // Control Events\n  /////////////////////////////\n  protected [EVENT.CONTROL.LOCKED]({ id }: ControlPayload) {\n    //this.$accessor.remote.setHost(id);\n    // const member = this.member(id);\n    // if (!member) {\n    //   return;\n    // }\n  }\n\n  protected [EVENT.CONTROL.RELEASE]({ id }: ControlPayload) {\n    //this.$accessor.remote.reset();\n    // const member = this.member(id);\n    // if (!member) {\n    //   return;\n    // }\n  }\n\n  protected [EVENT.CONTROL.GIVE]({ id, target }: ControlTargetPayload) {\n    // const member = this.member(target);\n    // if (!member) {\n    //   return;\n    // }\n    //this.$accessor.remote.setHost(member);\n  }\n\n  protected [EVENT.CONTROL.CLIPBOARD]({ text }: ControlClipboardPayload) {\n    this.emit(EVENT.CONTROL.CLIPBOARD, text);\n  }\n\n  /////////////////////////////\n  // Screen Events\n  /////////////////////////////\n  protected [EVENT.SCREEN.CONFIGURATIONS]({\n    configurations,\n  }: ScreenConfigurationsPayload) {\n    // console.log('[CONFIGURATIONS]', configurations);\n    //this.$accessor.video.setConfigurations(configurations);\n  }\n\n  protected [EVENT.SCREEN.RESOLUTION]({\n    id,\n    width,\n    height,\n    rate,\n  }: ScreenResolutionPayload) {\n    this.emit(EVENT.SCREEN.RESOLUTION, { width, height, rate });\n  }\n}\n\nexport { default as VBrowser } from './VBrowser';\n","import React from 'react';\nimport { Button, Icon } from 'semantic-ui-react';\n\nimport {\n  formatTimestamp,\n  getColorForStringHex,\n  getDefaultPicture,\n  iceServers,\n} from '../../utils';\n\ninterface VideoChatProps {\n  socket: SocketIOClient.Socket;\n  participants: User[];\n  pictureMap: StringDict;\n  nameMap: StringDict;\n  tsMap: NumberDict;\n  rosterUpdateTS: Number;\n  hide?: boolean;\n}\n\nexport class VideoChat extends React.Component<VideoChatProps> {\n  ourStream?: MediaStream;\n  videoRefs: any = {};\n  videoPCs: PCDict = {};\n  socket = this.props.socket;\n\n  componentDidMount() {\n    this.socket.on('signal', this.handleSignal);\n  }\n\n  componentWillUnmount() {\n    this.socket.off('signal', this.handleSignal);\n  }\n\n  componentDidUpdate(prevProps: VideoChatProps) {\n    if (this.props.rosterUpdateTS !== prevProps.rosterUpdateTS) {\n      this.updateWebRTC();\n    }\n  }\n\n  handleSignal = async (data: any) => {\n    // Handle messages received from signaling server\n    const msg = data.msg;\n    const from = data.from;\n    const pc = this.videoPCs[from];\n    console.log('recv', from, data);\n    if (msg.ice !== undefined) {\n      pc.addIceCandidate(new RTCIceCandidate(msg.ice));\n    } else if (msg.sdp && msg.sdp.type === 'offer') {\n      // console.log('offer');\n      await pc.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n      const answer = await pc.createAnswer();\n      await pc.setLocalDescription(answer);\n      this.sendSignal(from, { sdp: pc.localDescription });\n    } else if (msg.sdp && msg.sdp.type === 'answer') {\n      pc.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n    }\n  };\n\n  setupWebRTC = async () => {\n    // Set up our own video\n    // Create default stream\n    let black = ({ width = 640, height = 480 } = {}) => {\n      let canvas: any = Object.assign(document.createElement('canvas'), {\n        width,\n        height,\n      });\n      canvas.getContext('2d')?.fillRect(0, 0, width, height);\n      let stream = canvas.captureStream();\n      return Object.assign(stream.getVideoTracks()[0], { enabled: false });\n    };\n    let stream = new MediaStream([black()]);\n\n    try {\n      stream = await navigator?.mediaDevices?.getUserMedia({\n        audio: true,\n        video: true,\n      });\n    } catch (e) {\n      console.warn(e);\n    }\n    this.ourStream = stream;\n    // alert server we've joined video chat\n    this.socket.emit('CMD:joinVideo');\n  };\n\n  stopWebRTC = () => {\n    this.ourStream &&\n      this.ourStream.getTracks().forEach((track) => {\n        track.stop();\n      });\n    this.ourStream = undefined;\n    Object.keys(this.videoPCs).forEach((key) => {\n      this.videoPCs[key].close();\n      delete this.videoPCs[key];\n    });\n    this.socket.emit('CMD:leaveVideo');\n  };\n\n  toggleVideoWebRTC = () => {\n    if (this.ourStream && this.ourStream.getVideoTracks()[0]) {\n      this.ourStream.getVideoTracks()[0].enabled = !this.ourStream.getVideoTracks()[0]\n        ?.enabled;\n    }\n  };\n\n  getVideoWebRTC = () => {\n    return this.ourStream && this.ourStream.getVideoTracks()[0]?.enabled;\n  };\n\n  toggleAudioWebRTC = () => {\n    if (this.ourStream && this.ourStream.getAudioTracks()[0]) {\n      this.ourStream.getAudioTracks()[0].enabled = !this.ourStream.getAudioTracks()[0]\n        ?.enabled;\n    }\n  };\n\n  getAudioWebRTC = () => {\n    return (\n      this.ourStream &&\n      this.ourStream.getAudioTracks()[0] &&\n      this.ourStream.getAudioTracks()[0].enabled\n    );\n  };\n\n  updateWebRTC = () => {\n    if (!this.ourStream) {\n      // We haven't started video chat, exit\n      return;\n    }\n    this.props.participants.forEach((user) => {\n      const id = user.id;\n      if (!user.isVideoChat && this.videoPCs[id]) {\n        // User isn't in video chat but we have a connection, close it\n        this.videoPCs[id].close();\n        delete this.videoPCs[id];\n      }\n      if (!user.isVideoChat || this.videoPCs[id]) {\n        // User isn't in video chat, or we already have a connection to them\n        return;\n      }\n      if (id === this.socket.id) {\n        this.videoPCs[id] = new RTCPeerConnection();\n        this.videoRefs[id].srcObject = this.ourStream;\n      } else {\n        const pc = new RTCPeerConnection({ iceServers: iceServers() });\n        this.videoPCs[id] = pc;\n        // Add our own video as outgoing stream\n        //@ts-ignore\n        pc.addStream(this.ourStream);\n        pc.onicecandidate = (event) => {\n          // We generated an ICE candidate, send it to peer\n          if (event.candidate) {\n            this.sendSignal(id, { ice: event.candidate });\n          }\n        };\n        //@ts-ignore\n        pc.onaddstream = (event: any) => {\n          // Mount the stream from peer\n          const stream = event.stream;\n          // console.log(stream);\n          this.videoRefs[id].srcObject = stream;\n        };\n        // For each pair, have the lexicographically smaller ID be the offerer\n        const isOfferer = this.socket.id < id;\n        if (isOfferer) {\n          pc.onnegotiationneeded = async () => {\n            // Start connection for peer's video\n            const offer = await pc.createOffer();\n            await pc.setLocalDescription(offer);\n            this.sendSignal(id, { sdp: pc.localDescription });\n          };\n        }\n      }\n    });\n  };\n\n  sendSignal = async (to: string, data: any) => {\n    console.log('send', to, data);\n    this.socket.emit('signal', { to, msg: data });\n  };\n\n  render() {\n    const { participants, pictureMap, nameMap, tsMap, socket } = this.props;\n    const videoChatContentStyle = {\n      height: participants.length < 3 ? 220 : 110,\n      borderRadius: '4px',\n      objectFit: 'contain',\n    };\n    return (\n      <div\n        style={{\n          display: this.props.hide ? 'none' : 'flex',\n          width: '100%',\n          flexDirection: 'column',\n          overflow: 'auto',\n        }}\n      >\n        {!this.ourStream && (\n          <div\n            style={{\n              display: 'flex',\n              flexWrap: 'wrap',\n              marginTop: '8px',\n            }}\n          >\n            <Button\n              fluid\n              title=\"Join Video Chat\"\n              color={'purple'}\n              size=\"medium\"\n              icon\n              labelPosition=\"left\"\n              onClick={this.setupWebRTC}\n            >\n              <Icon name=\"video\" />\n              {`Join Video Chat`}\n            </Button>\n          </div>\n        )}\n        {this.ourStream && (\n          <div\n            style={{\n              display: 'flex',\n              flexWrap: 'wrap',\n            }}\n          >\n            <Button\n              fluid\n              color={'red'}\n              size=\"medium\"\n              icon\n              labelPosition=\"left\"\n              onClick={this.stopWebRTC}\n            >\n              <Icon name=\"external\" />\n              {`Leave`}\n            </Button>\n            <Button\n              fluid\n              color={this.getVideoWebRTC() ? 'green' : 'red'}\n              size=\"medium\"\n              icon\n              labelPosition=\"left\"\n              onClick={this.toggleVideoWebRTC}\n            >\n              <Icon name=\"video\" />\n              {this.getVideoWebRTC() ? 'On' : 'Off'}\n            </Button>\n            <Button\n              fluid\n              color={this.getAudioWebRTC() ? 'green' : 'red'}\n              size=\"medium\"\n              icon\n              labelPosition=\"left\"\n              onClick={this.toggleAudioWebRTC}\n            >\n              <Icon\n                name={this.getAudioWebRTC() ? 'microphone' : 'microphone slash'}\n              />\n              {this.getAudioWebRTC() ? 'On' : 'Off'}\n            </Button>\n          </div>\n        )}\n        <div\n          style={{\n            display: 'flex',\n            flexWrap: 'wrap',\n            justifyContent: 'center',\n            marginTop: '8px',\n          }}\n        >\n          {participants.map((p) => {\n            return (\n              <div key={p.id}>\n                <div\n                  style={{\n                    position: 'relative',\n                    //marginLeft: '4px',\n                  }}\n                >\n                  <div>\n                    {this.ourStream && p.isVideoChat ? (\n                      <video\n                        ref={(el) => {\n                          this.videoRefs[p.id] = el;\n                        }}\n                        style={videoChatContentStyle as any}\n                        autoPlay\n                        muted={p.id === socket.id}\n                        data-id={p.id}\n                      />\n                    ) : (\n                      <img\n                        style={videoChatContentStyle as any}\n                        // broken image: https://ui-avatars.com/api/?name=haidee&background=B03060&size=256&color=ffffff\n                        src={\n                          pictureMap[p.id] ||\n                          getDefaultPicture(\n                            nameMap[p.id],\n                            getColorForStringHex(p.id)\n                          )\n                        }\n                        alt=\"\"\n                      />\n                    )}\n                    <div\n                      style={{\n                        position: 'absolute',\n                        bottom: '4px',\n                        left: '0px',\n                        width: '100%',\n                        backgroundColor: 'rgba(0,0,0,0)',\n                        color: 'white',\n                        borderRadius: '4px',\n                        fontSize: '10px',\n                        fontWeight: 700,\n                        display: 'flex',\n                      }}\n                    >\n                      <div\n                        title={nameMap[p.id] || p.id}\n                        style={{\n                          width: '80px',\n                          backdropFilter: 'brightness(80%)',\n                          padding: '4px',\n                          textOverflow: 'ellipsis',\n                          whiteSpace: 'nowrap',\n                          overflow: 'hidden',\n                          display: 'inline-block',\n                        }}\n                      >\n                        {p.isVideoChat && <Icon size=\"small\" name=\"video\" />}\n                        {nameMap[p.id] || p.id}\n                      </div>\n                      <div\n                        style={{\n                          backdropFilter: 'brightness(60%)',\n                          padding: '4px',\n                          flexGrow: 1,\n                          display: 'flex',\n                          justifyContent: 'center',\n                        }}\n                      >\n                        {formatTimestamp(tsMap[p.id] || 0)}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Button, Form, Header, Icon, Modal, TextArea } from 'semantic-ui-react';\n\nexport const SettingsModal = ({ trigger }: any) => (\n  <Modal trigger={trigger} basic closeIcon size=\"small\">\n    <Header icon=\"setting\" content=\"Settings\" />\n    <Modal.Content>\n      <Form>\n        <TextArea rows={10} id=\"settings_textarea\">\n          {window.localStorage.getItem('watchparty-setting') ||\n            JSON.stringify(getDefaultSettings(), null, 2)}\n        </TextArea>\n      </Form>\n    </Modal.Content>\n    <Modal.Actions>\n      <Button\n        color=\"green\"\n        inverted\n        onClick={() => {\n          const newSetting = (document.getElementById(\n            'settings_textarea'\n          ) as HTMLTextAreaElement)!.value;\n          try {\n            validateSettingsString(newSetting);\n            updateSettings(newSetting);\n            window.location.reload();\n          } catch (e) {\n            alert(e);\n          }\n        }}\n      >\n        <Icon name=\"checkmark\" />\n        Save\n      </Button>\n    </Modal.Actions>\n  </Modal>\n);\n\nexport function getDefaultSettings(): Settings {\n  return {};\n}\n\nexport function getCurrentSettings(): Settings {\n  const setting = window.localStorage.getItem('watchparty-setting');\n  try {\n    let settings = validateSettingsString(setting);\n    if (!settings) {\n      return {};\n    }\n    return settings;\n  } catch (e) {\n    console.warn(e);\n    return getDefaultSettings();\n  }\n}\n\n/**\n * Validate a setting string. Return a parsed setting object if valid, otherwise throw exception\n */\nexport function validateSettingsString(\n  setting: string | null\n): Settings | null {\n  // Don't have a setting or invalid value\n  let settingObject: Settings = JSON.parse(setting as any);\n  if (!setting) {\n    return {};\n  }\n  if (setting[0] !== '{') {\n    throw new Error('failed to parse settings, using defaults');\n  }\n  return settingObject;\n}\n\nexport function updateSettings(newSetting: string) {\n  window.localStorage.setItem('watchparty-setting', newSetting);\n}\n","import React from 'react';\nimport { Modal, Loader, List } from 'semantic-ui-react';\n\nexport const MultiStreamModal = ({\n  streams,\n  setMedia,\n  resetMultiSelect,\n}: {\n  streams: any[];\n  setMedia: Function;\n  resetMultiSelect: Function;\n}) => (\n  <Modal inverted basic open closeIcon onClose={resetMultiSelect as any}>\n    <Modal.Header>Select a file</Modal.Header>\n    <Modal.Content>\n      {streams.length === 0 && <Loader />}\n      {streams && (\n        <List inverted>\n          {streams.map((file: any) => (\n            <List.Item>\n              <List.Icon name=\"file\" />\n              <List.Content>\n                <List.Header\n                  as=\"a\"\n                  onClick={() => {\n                    setMedia(null, { value: file.url });\n                    resetMultiSelect();\n                  }}\n                >\n                  {file.name}\n                </List.Header>\n                <List.Description>\n                  {file.length.toLocaleString()} bytes\n                </List.Description>\n              </List.Content>\n            </List.Item>\n          ))}\n        </List>\n      )}\n    </Modal.Content>\n  </Modal>\n);\n","export const examples = [\n  'https://upload.wikimedia.org/wikipedia/commons/a/a5/Spring_-_Blender_Open_Movie.webm',\n  // 'https://download.blender.org/peach/bigbuckbunny_movies/big_buck_bunny_1080p_stereo.ogg',\n  // 'https://download.blender.org/demo/movies/Sintel.2010.720p.mkv',\n  // 'https://upload.wikimedia.org/wikipedia/commons/c/c0/Big_Buck_Bunny_4K.webm',\n  // 'https://upload.wikimedia.org/wikipedia/commons/f/f1/Sintel_movie_4K.webm',\n  // 'https://upload.wikimedia.org/wikipedia/commons/1/10/Tears_of_Steel_in_4k_-_Official_Blender_Foundation_release.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/3/36/Cosmos_Laundromat_-_First_Cycle_-_Official_Blender_Foundation_release.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/a/a2/Elephants_Dream_%282006%29.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/a/a9/HERO_-_Blender_Open_Movie-full_movie.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/0/02/Glass_Half_-_Blender_Open_Movie-full_movie.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/d/d0/Caminandes-_Llama_Drama_-_Short_Movie.ogv',\n  'https://upload.wikimedia.org/wikipedia/commons/7/7c/Caminandes_-_Gran_Dillama_-_Blender_Foundation%27s_new_Open_Movie.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/a/ab/Caminandes_3_-_Llamigos_-_Blender_Animated_Short.webm',\n].map((url) => ({\n  url,\n  type: 'file',\n  name: url.slice(url.lastIndexOf('/') + 1),\n}));\n","import React from 'react';\nimport { Menu, Icon, Label } from 'semantic-ui-react';\nimport { decodeEntities } from '../../utils';\n\nexport const YouTubeSearchResult = (\n  props: SearchResult & { setMedia: Function }\n) => {\n  const result = props;\n  const setMedia = props.setMedia;\n  return (\n    <Menu.Item\n      onClick={(e) => {\n        setMedia(e, { value: result.url });\n      }}\n    >\n      <div style={{ display: 'flex', alignItems: 'center' }}>\n        <img style={{ height: '40px' }} src={result.img} alt={result.name} />\n        <Icon name=\"youtube\" />\n        <div style={{ marginLeft: '5px' }}>{decodeEntities(result.name)}</div>\n      </div>\n    </Menu.Item>\n  );\n};\n\nexport const MediaPathSearchResult = (\n  props: SearchResult & { setMedia: Function }\n) => {\n  const result = props;\n  const setMedia = props.setMedia;\n  return (\n    <Menu.Item\n      onClick={(e) => {\n        setMedia(e, { value: result.url });\n      }}\n    >\n      <div style={{ display: 'flex' }}>\n        <Icon name=\"file\" />\n        {result.name}\n      </div>\n    </Menu.Item>\n  );\n};\n\nexport class StreamPathSearchResult extends React.Component<\n  SearchResult & {\n    setMedia: Function;\n    launchMultiSelect: Function;\n    streamPath: string;\n  }\n> {\n  render() {\n    const result = this.props;\n    const setMedia = this.props.setMedia;\n    return (\n      <React.Fragment>\n        <Menu.Item\n          onClick={async (e) => {\n            this.props.launchMultiSelect([]);\n            let response = await window.fetch(\n              this.props.streamPath +\n                '/data?torrent=' +\n                encodeURIComponent(result.magnet!)\n            );\n            let metadata = await response.json();\n            // console.log(metadata);\n            if (\n              metadata.files.filter(\n                (file: any) => file.length > 10 * 1024 * 1024\n              ).length > 1\n            ) {\n              // Multiple large files, present user selection\n              const multiStreamSelection = metadata.files.map(\n                (file: any, i: number) => ({\n                  ...file,\n                  url:\n                    this.props.streamPath +\n                    '/stream?torrent=' +\n                    encodeURIComponent(result.magnet!) +\n                    '&fileIndex=' +\n                    i,\n                })\n              );\n              multiStreamSelection.sort((a: any, b: any) =>\n                a.name.localeCompare(b.name)\n              );\n              this.props.launchMultiSelect(multiStreamSelection);\n            } else {\n              this.props.launchMultiSelect(undefined);\n              setMedia(e, {\n                value:\n                  this.props.streamPath +\n                  '/stream?torrent=' +\n                  encodeURIComponent(result.magnet!),\n              });\n            }\n          }}\n        >\n          <Label\n            circular\n            empty\n            color={Number(result.seeders) ? 'green' : 'red'}\n          />\n          <Icon name=\"film\" />\n          {result.name +\n            ' - ' +\n            result.size +\n            ' - ' +\n            result.seeders +\n            ' peers'}\n        </Menu.Item>\n      </React.Fragment>\n    );\n  }\n}\n","import React from 'react';\nimport { DropdownProps, Menu, Input, Icon } from 'semantic-ui-react';\nimport { debounce, getYouTubeResults } from '../../utils';\nimport { examples } from '../../utils/examples';\nimport { YouTubeSearchResult } from '../SearchResult/SearchResult';\n\ninterface ComboBoxProps {\n  setMedia: Function;\n  currentMedia: string;\n  getMediaDisplayName: Function;\n  launchMultiSelect: Function;\n  mediaPath: string | undefined;\n  streamPath: string | undefined;\n  disabled?: boolean;\n}\n\nexport class ComboBox extends React.Component<ComboBoxProps> {\n  state = {\n    inputMedia: undefined as string | undefined,\n    results: undefined,\n    loading: false,\n    lastResultTimestamp: Number(new Date()),\n  };\n  debounced: any = null;\n\n  setMedia = (e: any, data: DropdownProps) => {\n    window.setTimeout(\n      () => this.setState({ inputMedia: undefined, results: undefined }),\n      300\n    );\n    this.props.setMedia(e, data);\n  };\n\n  doSearch = async (e: any) => {\n    e.persist();\n    this.setState({ inputMedia: e.target.value }, () => {\n      if (!this.debounced) {\n        this.debounced = debounce(async () => {\n          this.setState({ loading: true });\n          const query: string = this.state.inputMedia || '';\n          let timestamp = Number(new Date());\n          let results: JSX.Element[] | undefined = undefined;\n          if (query === '' || (query && query.startsWith('http'))) {\n            results = examples.map((option: any) => (\n              <Menu.Item\n                key={option.url}\n                onClick={(e: any) => this.setMedia(e, { value: option.url })}\n              >\n                {option.url}\n              </Menu.Item>\n            ));\n          } else {\n            const data = await getYouTubeResults(query);\n            results = data.map((result) => (\n              <YouTubeSearchResult\n                key={result.url}\n                {...result}\n                setMedia={this.setMedia}\n              />\n            ));\n          }\n          if (timestamp > this.state.lastResultTimestamp) {\n            this.setState({\n              loading: false,\n              results,\n              lastResultTimestamp: timestamp,\n            });\n          }\n        }, 500);\n      }\n      this.debounced();\n    });\n  };\n\n  render() {\n    const { currentMedia, getMediaDisplayName } = this.props;\n    const { results } = this.state;\n    return (\n      <div style={{ position: 'relative' }}>\n        <div style={{ display: 'flex' }}>\n          <Input\n            style={{ flexGrow: 1 }}\n            inverted\n            fluid\n            focus\n            disabled={this.props.disabled}\n            onChange={this.doSearch}\n            onFocus={(e: any) => {\n              e.persist();\n              this.setState(\n                {\n                  inputMedia: getMediaDisplayName(currentMedia),\n                },\n                () => {\n                  if (\n                    !this.state.inputMedia ||\n                    (this.state.inputMedia &&\n                      this.state.inputMedia.startsWith('http'))\n                  ) {\n                    this.doSearch(e);\n                  }\n                }\n              );\n              setTimeout(() => e.target.select(), 100);\n            }}\n            onBlur={() =>\n              setTimeout(\n                () =>\n                  this.setState({ inputMedia: undefined, results: undefined }),\n                100\n              )\n            }\n            onKeyPress={(e: any) => {\n              if (e.key === 'Enter') {\n                this.setMedia(e, {\n                  value: this.state.inputMedia,\n                });\n              }\n            }}\n            icon={\n              <Icon\n                onClick={(e: any) =>\n                  this.setMedia(e, {\n                    value: this.state.inputMedia,\n                  })\n                }\n                name=\"arrow right\"\n                link\n                circular\n                //bordered\n              />\n            }\n            loading={this.state.loading}\n            label={'Now Watching:'}\n            placeholder=\"Enter video file URL, YouTube link, or YouTube search term\"\n            value={\n              this.state.inputMedia !== undefined\n                ? this.state.inputMedia\n                : getMediaDisplayName(currentMedia)\n            }\n          />\n        </div>\n        {Boolean(results) && this.state.inputMedia !== undefined && (\n          <Menu\n            fluid\n            vertical\n            style={{\n              position: 'absolute',\n              top: '22px',\n              maxHeight: '250px',\n              overflow: 'scroll',\n              zIndex: 1001,\n            }}\n          >\n            {results}\n          </Menu>\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport {\n  debounce,\n  getYouTubeResults,\n  getMediaPathResults,\n  getStreamPathResults,\n} from '../../utils';\nimport { DropdownProps, Dropdown } from 'semantic-ui-react';\nimport {\n  YouTubeSearchResult,\n  MediaPathSearchResult,\n  StreamPathSearchResult,\n} from '../SearchResult/SearchResult';\n\ninterface SearchComponentProps {\n  setMedia: Function;\n  type?: 'youtube' | 'media' | 'stream';\n  launchMultiSelect?: Function;\n  mediaPath: string | undefined;\n  streamPath: string | undefined;\n  disabled?: boolean;\n}\n\nexport class SearchComponent extends React.Component<SearchComponentProps> {\n  state = {\n    results: [] as SearchResult[],\n    resetDropdown: Number(new Date()),\n    loading: false,\n    lastResultTimestamp: Number(new Date()),\n    inputMedia: undefined,\n  };\n  debounced: any = null;\n\n  doSearch = async (e: any) => {\n    e.persist();\n    this.setState({ inputMedia: e.target.value }, () => {\n      if (!this.debounced) {\n        this.debounced = debounce(async () => {\n          this.setState({ loading: true });\n          let query = this.state.inputMedia || '';\n          let results: SearchResult[] = [];\n          let timestamp = Number(new Date());\n          if (this.props.type === 'youtube') {\n            results = await getYouTubeResults(query);\n          } else if (this.props.type === 'media' && this.props.mediaPath) {\n            results = await getMediaPathResults(this.props.mediaPath, query);\n          } else if (this.props.type === 'stream' && this.props.streamPath) {\n            results = await getStreamPathResults(this.props.streamPath, query);\n          }\n          if (timestamp > this.state.lastResultTimestamp) {\n            this.setState({\n              loading: false,\n              results,\n              lastResultTimestamp: timestamp,\n            });\n          }\n        }, 500);\n      }\n      this.debounced();\n    });\n  };\n\n  setMedia = (e: any, data: DropdownProps) => {\n    window.setTimeout(\n      () => this.setState({ resetDropdown: Number(new Date()) }),\n      300\n    );\n    this.props.setMedia(e, data);\n  };\n\n  render() {\n    const setMedia = this.setMedia;\n    let placeholder = 'Search streams';\n    let icon = 'film';\n    if (this.props.type === 'youtube') {\n      placeholder = 'Search YouTube';\n      icon = 'youtube';\n    } else if (this.props.type === 'media') {\n      placeholder = this.props.mediaPath || '';\n      icon = 'file';\n    }\n    if (this.state.loading) {\n      icon = 'loading circle notch';\n    }\n    return (\n      <React.Fragment>\n        <Dropdown\n          key={this.state.resetDropdown}\n          fluid\n          style={{ height: '36px' }}\n          button\n          icon={icon}\n          className=\"icon\"\n          labeled\n          disabled={this.props.disabled}\n          search={(() => {}) as any}\n          text={placeholder}\n          onSearchChange={this.doSearch}\n          onFocus={async (e) => {\n            if (this.props.type === 'media' && this.props.mediaPath) {\n              this.doSearch(e);\n            }\n          }}\n          // onBlur={() => this.setState({ results: this.state.watchOptions })}\n          //searchQuery={this.state.query}\n          //loading={this.state.loading}\n        >\n          {Boolean(this.state.results.length) ? (\n            <Dropdown.Menu>\n              {this.state.results.map((result: SearchResult) => {\n                if (this.props.type === 'youtube') {\n                  return (\n                    <YouTubeSearchResult\n                      key={result.url}\n                      {...result}\n                      setMedia={setMedia}\n                    />\n                  );\n                } else if (this.props.type === 'media') {\n                  return (\n                    <MediaPathSearchResult\n                      key={result.url}\n                      {...result}\n                      setMedia={setMedia}\n                    />\n                  );\n                }\n                return (\n                  <StreamPathSearchResult\n                    key={result.url}\n                    {...result}\n                    setMedia={setMedia}\n                    launchMultiSelect={this.props.launchMultiSelect as Function}\n                    streamPath={this.props.streamPath || ''}\n                  />\n                );\n              })}\n            </Dropdown.Menu>\n          ) : null}\n        </Dropdown>\n      </React.Fragment>\n    );\n  }\n}\n","import React from 'react';\nimport { Icon, Progress, Label, Popup } from 'semantic-ui-react';\nimport { Slider } from 'react-semantic-ui-range';\nimport { formatTimestamp } from '../../utils';\n\ninterface ControlsProps {\n  duration: number;\n  togglePlay: Function;\n  onSeek: Function;\n  fullScreen: Function;\n  toggleMute: Function;\n  toggleSubtitle: Function;\n  jumpToLeader: Function;\n  paused: boolean;\n  muted: boolean;\n  subtitled: boolean;\n  currentTime: number;\n  getVolume: Function;\n  setVolume: Function;\n  disabled?: boolean;\n  leaderTime?: number;\n  isPauseDisabled?: boolean;\n}\n\n// TODO a lot of this state is currently tied to the per-second tsMap update, which is leading to some UI lag\n// e.g. cc, mute, timestamp\n// play/pause seems to work better since it triggers a server emit\n// Should probably have local state tracking CC/mute/time etc.\nexport class Controls extends React.Component<ControlsProps> {\n  state = {\n    showTimestamp: false,\n    currTimestamp: 0,\n    posTimestamp: 0,\n  };\n\n  onMouseOver = () => {\n    // console.log('mouseover');\n    this.setState({ showTimestamp: true });\n  };\n\n  onMouseOut = () => {\n    // console.log('mouseout');\n    this.setState({ showTimestamp: false });\n  };\n\n  onMouseMove = (e: any) => {\n    const rect = e.target.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const max = rect.width;\n    const pct = x / max;\n    // console.log(x, max);\n    const target = pct * this.props.duration;\n    // console.log(pct);\n    if (pct >= 0) {\n      this.setState({ currTimestamp: target, posTimestamp: pct });\n    }\n  };\n\n  render() {\n    const {\n      togglePlay,\n      onSeek,\n      fullScreen,\n      toggleMute,\n      toggleSubtitle,\n      jumpToLeader,\n      paused,\n      muted,\n      subtitled,\n      currentTime,\n      duration,\n      leaderTime,\n      isPauseDisabled,\n      disabled,\n    } = this.props;\n    const isBehind = leaderTime && leaderTime - currentTime > 5;\n    return (\n      <div className=\"controls\">\n        <Icon\n          size=\"large\"\n          onClick={togglePlay}\n          className=\"control action\"\n          disabled={disabled || isPauseDisabled}\n          name={paused ? 'play' : 'pause'}\n        />\n        <Popup\n          content={\n            (isBehind ? \"We've detected that your stream is behind. \" : '') +\n            'Click to sync to leader.'\n          }\n          trigger={\n            <Icon\n              size=\"large\"\n              onClick={jumpToLeader}\n              className={`control action ${isBehind ? 'glowing' : ''}`}\n              name={'angle double right'}\n            />\n          }\n        />\n        <div className=\"control\">{formatTimestamp(currentTime)}</div>\n        <Progress\n          size=\"tiny\"\n          color=\"blue\"\n          onClick={\n            duration < Infinity && !this.props.disabled ? onSeek : undefined\n          }\n          onMouseOver={this.onMouseOver}\n          onMouseOut={this.onMouseOut}\n          onMouseMove={this.onMouseMove}\n          className=\"control action\"\n          inverted\n          style={{\n            flexGrow: 1,\n            marginTop: 0,\n            marginBottom: 0,\n            position: 'relative',\n            minWidth: '100px',\n          }}\n          value={currentTime}\n          total={duration}\n        >\n          {duration < Infinity && this.state.showTimestamp && (\n            <div\n              style={{\n                position: 'absolute',\n                bottom: '0px',\n                left: `calc(${this.state.posTimestamp * 100 + '% - 27px'})`,\n                pointerEvents: 'none',\n              }}\n            >\n              <Label basic color=\"blue\" pointing=\"below\">\n                <div style={{ width: '34px' }}>\n                  {formatTimestamp(this.state.currTimestamp)}\n                </div>\n              </Label>\n            </div>\n          )}\n        </Progress>\n        <div className=\"control\">{formatTimestamp(duration)}</div>\n        <Icon\n          size=\"large\"\n          onClick={toggleSubtitle}\n          className=\"control action\"\n          name={subtitled ? 'closed captioning' : 'closed captioning outline'}\n          title=\"Captions\"\n        />\n        <Icon\n          size=\"large\"\n          onClick={() => fullScreen(false)}\n          className=\"control action\"\n          style={{ transform: 'rotate(90deg)' }}\n          name=\"window maximize outline\"\n          title=\"Theater Mode\"\n        />\n        <Icon\n          size=\"large\"\n          onClick={() => fullScreen(true)}\n          className=\"control action\"\n          name=\"expand\"\n          title=\"Fullscreen\"\n        />\n        <Icon\n          size=\"large\"\n          onClick={toggleMute}\n          className=\"control action\"\n          name={muted ? 'volume off' : 'volume up'}\n          title=\"Mute\"\n        />\n        <div style={{ width: '100px', marginRight: '10px' }}>\n          <Slider\n            value={this.props.getVolume()}\n            color=\"blue\"\n            settings={{\n              min: 0,\n              max: 1,\n              step: 0.01,\n              onChange: (value: number) => {\n                this.props.setVolume(value);\n              },\n            }}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Modal, Header, Table, Button, Icon } from 'semantic-ui-react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { SignInButton } from '../TopBar/TopBar';\n\n// Make sure to call `loadStripe` outside of a components render to avoid\n// recreating the `Stripe` object on every render.\nconst stripePromise = process.env.REACT_APP_STRIPE_PUBLIC_KEY\n  ? loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY as string)\n  : null;\n\nexport class SubscribeModal extends React.Component<{\n  closeSubscribe: Function;\n  user?: firebase.User;\n  isSubscriber: boolean;\n}> {\n  onSubscribe = async () => {\n    if (!stripePromise) {\n      console.warn('Stripe integration is not configured, cannot subscribe');\n      return;\n    }\n    const stripe = await stripePromise;\n    const result = await stripe?.redirectToCheckout({\n      lineItems: [\n        {\n          price:\n            process.env.NODE_ENV === 'development'\n              ? 'price_HNGtabCzD5qyfd'\n              : 'price_HNDBoPDI7yYRi9',\n          quantity: 1,\n        },\n      ] as any,\n      mode: 'subscription',\n      successUrl: window.location.href,\n      cancelUrl: window.location.href,\n      customerEmail: this.props.user?.email,\n      clientReferenceId: this.props.user?.uid,\n    } as any);\n    // If `redirectToCheckout` fails due to a browser or network\n    // error, display the localized error message to your customer\n    // using `error.message`.\n    if (result && result.error) {\n      console.error(result.error.message);\n    }\n  };\n  render() {\n    if (this.props.isSubscriber) {\n      this.props.closeSubscribe();\n      return null;\n    }\n    const { closeSubscribe } = this.props;\n    return (\n      <Modal open={true} onClose={closeSubscribe as any}>\n        <Modal.Header>Subscribe to WatchParty Plus</Modal.Header>\n        <Modal.Content image>\n          {/* <Image wrapped size='medium' src='https://react.semantic-ui.com/images/avatar/large/rachel.png' /> */}\n          <Modal.Description>\n            <div>\n              Subscriptions help us maintain the service and build new features!\n              Please consider supporting us if you're enjoying WatchParty.\n            </div>\n            <Header>Features</Header>\n            <Table definition unstackable striped celled>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell />\n                  <Table.HeaderCell>WatchParty Free</Table.HeaderCell>\n                  <Table.HeaderCell>WatchParty Plus</Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n\n              <Table.Body>\n                {/* Priority support */}\n                <Table.Row>\n                  <Table.Cell>\n                    Basic (Synchronized watching, chat, screenshare)\n                  </Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser Access</Table.Cell>\n                  <Table.Cell>When capacity allows</Table.Cell>\n                  <Table.Cell>Anytime</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser Resolution</Table.Cell>\n                  <Table.Cell>720p</Table.Cell>\n                  <Table.Cell>1080p</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser CPU/RAM</Table.Cell>\n                  <Table.Cell>Standard</Table.Cell>\n                  <Table.Cell>Extra</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser Session Length</Table.Cell>\n                  <Table.Cell>3 hours</Table.Cell>\n                  <Table.Cell>12 hours</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Number of Permanent Rooms</Table.Cell>\n                  <Table.Cell>1</Table.Cell>\n                  <Table.Cell>20</Table.Cell>\n                </Table.Row>\n                {/* <Table.Row>\n                  <Table.Cell>Max Room Capacity</Table.Cell>\n                  <Table.Cell>20</Table.Cell>\n                  <Table.Cell>100</Table.Cell>\n                </Table.Row> */}\n                <Table.Row>\n                  <Table.Cell>Custom Room URLs</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Discord Subscriber Role (on request)</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Price</Table.Cell>\n                  <Table.Cell>$0 / month</Table.Cell>\n                  <Table.Cell>$5 / month</Table.Cell>\n                </Table.Row>\n              </Table.Body>\n            </Table>\n            <div style={{ textAlign: 'right' }}>\n              {/* if user isn't logged in, provide login prompt */}\n              {this.props.user && this.props.user.email ? (\n                <Button\n                  icon\n                  labelPosition=\"left\"\n                  color=\"blue\"\n                  size=\"large\"\n                  onClick={this.onSubscribe}\n                >\n                  <Icon name=\"cc stripe\" />\n                  Subscribe with Stripe\n                </Button>\n              ) : (\n                <div>\n                  Please sign in to subscribe: <SignInButton user={undefined} />\n                </div>\n              )}\n            </div>\n          </Modal.Description>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React from 'react';\nimport { Modal, Button, Table, Message } from 'semantic-ui-react';\nimport {\n  GoogleReCaptchaProvider,\n  withGoogleReCaptcha,\n} from 'react-google-recaptcha-v3';\nimport { SignInButton } from '../TopBar/TopBar';\nimport { serverPath } from '../../utils';\n\nexport class VBrowserModal extends React.Component<{\n  closeModal: Function;\n  startVBrowser: Function;\n  isSubscriber: Boolean;\n  subscribeButton: JSX.Element;\n  user?: firebase.User;\n}> {\n  state = { isVMPoolFull: false };\n  async componentDidMount() {\n    const resp = await fetch(serverPath + '/metadata');\n    const metadata = await resp.json();\n    if (metadata.isVMPoolFull) {\n      this.setState({ isVMPoolFull: true });\n    }\n  }\n  render() {\n    const { closeModal, startVBrowser } = this.props;\n    const LaunchButton = withGoogleReCaptcha(\n      ({ googleReCaptchaProps, large }: any) => (\n        <Button\n          size=\"large\"\n          color={large ? 'orange' : undefined}\n          onClick={async () => {\n            const rcToken = await (googleReCaptchaProps as any).executeRecaptcha(\n              'launchVBrowser'\n            );\n            startVBrowser(rcToken, { size: large ? 'large' : '' });\n            closeModal();\n          }}\n        >\n          {large ? 'Launch VBrowser+' : 'Continue with Free'}\n        </Button>\n      )\n    );\n    const vmPoolFullMessage = (\n      <Message\n        size=\"small\"\n        color=\"red\"\n        icon=\"hourglass two\"\n        style={{ width: '380px' }}\n        header=\"All Free VBrowsers In Use\"\n        content={\n          <div>\n            <div>All of the free VBrowsers are currently being used.</div>\n            <div>\n              Please consider subscribing for anytime access to faster\n              VBrowsers, or try again later.\n            </div>\n          </div>\n        }\n      />\n    );\n    return (\n      <GoogleReCaptchaProvider\n        reCaptchaKey={process.env.REACT_APP_RECAPTCHA_SITE_KEY as string}\n        useRecaptchaNet\n      >\n        <Modal open={true} onClose={closeModal as any}>\n          <Modal.Header>Launch a VBrowser</Modal.Header>\n          <Modal.Content image>\n            <Modal.Description>\n              <div>\n                You're about to launch a virtual browser to share in this room.\n              </div>\n              <Table definition unstackable striped celled>\n                <Table.Header>\n                  <Table.Row>\n                    <Table.HeaderCell />\n                    <Table.HeaderCell>WatchParty Free</Table.HeaderCell>\n                    <Table.HeaderCell>WatchParty Plus</Table.HeaderCell>\n                  </Table.Row>\n                </Table.Header>\n\n                <Table.Body>\n                  <Table.Row>\n                    <Table.Cell>VBrowser Resolution</Table.Cell>\n                    <Table.Cell>720p</Table.Cell>\n                    <Table.Cell>1080p</Table.Cell>\n                  </Table.Row>\n                  <Table.Row>\n                    <Table.Cell>VBrowser CPU/RAM</Table.Cell>\n                    <Table.Cell>Standard</Table.Cell>\n                    <Table.Cell>Extra</Table.Cell>\n                  </Table.Row>\n                  <Table.Row>\n                    <Table.Cell>VBrowser Session Length</Table.Cell>\n                    <Table.Cell>3 hours</Table.Cell>\n                    <Table.Cell>12 hours</Table.Cell>\n                  </Table.Row>\n                  <Table.Row>\n                    <Table.Cell></Table.Cell>\n                    <Table.Cell>\n                      {this.props.user ? (\n                        this.state.isVMPoolFull ? (\n                          vmPoolFullMessage\n                        ) : (\n                          <LaunchButton />\n                        )\n                      ) : (\n                        <SignInButton fluid user={this.props.user} />\n                      )}\n                    </Table.Cell>\n                    <Table.Cell>\n                      {this.props.isSubscriber ? (\n                        <LaunchButton large />\n                      ) : (\n                        this.props.subscribeButton\n                      )}\n                    </Table.Cell>\n                  </Table.Row>\n                </Table.Body>\n              </Table>\n            </Modal.Description>\n          </Modal.Content>\n        </Modal>\n      </GoogleReCaptchaProvider>\n    );\n  }\n}\n","import React from 'react';\nimport { Modal, Table, Icon } from 'semantic-ui-react';\n\nexport class PermanentRoomModal extends React.Component<{\n  closeModal: Function;\n}> {\n  render() {\n    const { closeModal } = this.props;\n    return (\n      <Modal open={true} onClose={closeModal as any} closeIcon>\n        <Modal.Header>Permanent Rooms</Modal.Header>\n        <Modal.Content image>\n          <Modal.Description>\n            <div>\n              Registered users have the ability to make their rooms permanent.\n              Subscribed users can create multiple permanent rooms.\n            </div>\n            <Table definition unstackable striped celled>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell />\n                  <Table.HeaderCell>Temporary</Table.HeaderCell>\n                  <Table.HeaderCell>Permanent</Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n\n              <Table.Body>\n                <Table.Row>\n                  <Table.Cell>Expiry</Table.Cell>\n                  <Table.Cell>After 24 hours of inactivity</Table.Cell>\n                  <Table.Cell>Never</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Room Passwords</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Disable Chat</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Custom Room URLs (subscribers)</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                {/* <Table.Row>\n                  <Table.Cell>Max Room Capacity (subscribers)</Table.Cell>\n                    <Table.Cell>20</Table.Cell>\n                    <Table.Cell>100</Table.Cell>\n                  </Table.Row> */}\n              </Table.Body>\n            </Table>\n          </Modal.Description>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  Icon,\n  Divider,\n  Radio,\n  CheckboxProps,\n  Message,\n  Input,\n  Button,\n  Label,\n} from 'semantic-ui-react';\n// import { SignInButton } from '../TopBar/TopBar';\nimport { getCurrentSettings, updateSettings } from './LocalSettings';\nimport axios from 'axios';\nimport { serverPath } from '../../utils';\nimport { PermanentRoomModal } from '../Modal/PermanentRoomModal';\n\ninterface SettingsTabProps {\n  hide: boolean;\n  user: firebase.User | undefined;\n  roomLock: string;\n  setRoomLock: Function;\n  socket: SocketIOClient.Socket;\n  isSubscriber: boolean;\n  roomId: string;\n  setChatDisabled: (val: boolean) => void;\n}\n\nexport const SettingsTab = ({\n  hide,\n  user,\n  roomLock,\n  setRoomLock,\n  socket,\n  isSubscriber,\n  roomId,\n  setChatDisabled,\n}: SettingsTabProps) => {\n  const [updateTS, setUpdateTS] = useState(0);\n  const [permModalOpen, setPermModalOpen] = useState(false);\n  const [vanity, setVanity] = useState<string | undefined>(undefined);\n  const [password, setPassword] = useState<string | undefined>(undefined);\n  const [isChatDisabled, setIsChatDisabled] = useState(false);\n  const [owner, setOwner] = useState<string | undefined>(undefined);\n  const [validVanity, setValidVanity] = useState(true);\n  const [validVanityLoading, setValidVanityLoading] = useState(false);\n  const [roomLink, setRoomLink] = useState<string>('');\n  useEffect(() => {\n    const getRoomLink = (vanity: string) => {\n      if (vanity) {\n        return `${window.location.origin}/r/${vanity}`;\n      }\n      return `${window.location.origin}${roomId.replace('/', '#')}`;\n    };\n    if (socket) {\n      socket.emit('CMD:getRoomState');\n      const handleRoomState = (data: any) => {\n        setOwner(data.owner);\n        setVanity(data.vanity);\n        setPassword(data.password);\n        setRoomLink(getRoomLink(data.vanity));\n        setIsChatDisabled(data.isChatDisabled);\n        window.history.replaceState('', '', getRoomLink(data.vanity));\n        setChatDisabled(data.isChatDisabled);\n      };\n      socket.on('REC:getRoomState', handleRoomState);\n      return function cleanup() {\n        socket.off('REC:getRoomState', handleRoomState);\n      };\n    }\n  }, [socket, roomId, setChatDisabled]);\n  const setRoomState = useCallback(\n    async (data: any) => {\n      const token = await user?.getIdToken();\n      socket.emit('CMD:setRoomState', {\n        uid: user?.uid,\n        token,\n        ...data,\n      });\n    },\n    [socket, user]\n  );\n  const setRoomOwner = useCallback(\n    async (data: any) => {\n      const token = await user?.getIdToken();\n      socket.emit('CMD:setRoomOwner', {\n        uid: user?.uid,\n        token,\n        ...data,\n      });\n    },\n    [socket, user]\n  );\n  const checkValidVanity = useCallback(\n    async (input: string) => {\n      if (!input) {\n        setValidVanity(true);\n        return;\n      }\n      setValidVanityLoading(true);\n      const response = await axios.get(serverPath + '/resolveRoom/' + input);\n      const data = response.data;\n      setValidVanityLoading(false);\n      // console.log(data.vanity, vanity);\n      if (data && data.vanity && data.vanity !== vanity) {\n        // Already exists and doesn't match current room\n        setValidVanity(false);\n      } else {\n        setValidVanity(true);\n      }\n    },\n    [setValidVanity, vanity]\n  );\n  const lockDisabled =\n    !Boolean(user) || Boolean(roomLock && roomLock !== user?.uid);\n  const permanentDisabled =\n    !Boolean(user) || Boolean(owner && owner !== user?.uid);\n\n  return (\n    <div style={{ display: hide ? 'none' : 'block', color: 'white' }}>\n      {permModalOpen && (\n        <PermanentRoomModal\n          closeModal={() => setPermModalOpen(false)}\n        ></PermanentRoomModal>\n      )}\n      <div className=\"sectionHeader\">Room Settings</div>\n      {!user && (\n        <Message color=\"yellow\" size=\"tiny\">\n          You need to be signed in to change these settings.\n        </Message>\n      )}\n      <SettingRow\n        icon={roomLock ? 'lock' : 'lock open'}\n        name={`Lock Room`}\n        description=\"Only the person who locked the room can control the video.\"\n        checked={Boolean(roomLock)}\n        disabled={lockDisabled}\n        onChange={(_e, data) => setRoomLock(data.checked)}\n      />\n      {\n        <SettingRow\n          icon={'clock'}\n          name={`Make Room Permanent`}\n          description={\n            'Prevent this room from expiring. This also unlocks additional room features.'\n          }\n          helpIcon={\n            <Icon\n              name=\"help circle\"\n              onClick={() => setPermModalOpen(true)}\n              style={{ cursor: 'pointer' }}\n            ></Icon>\n          }\n          checked={Boolean(owner)}\n          disabled={permanentDisabled}\n          onChange={(_e, data) => setRoomOwner({ undo: !data.checked })}\n        />\n      }\n      {owner && owner === user?.uid && (\n        <div className=\"sectionHeader\">Admin Settings</div>\n      )}\n      {owner && owner === user?.uid && (\n        <SettingRow\n          icon={'key'}\n          name={`Set Room Password`}\n          description=\"Users must know this password in order to join the room.\"\n          content={\n            <Input\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              fluid\n            />\n          }\n          disabled={false}\n        />\n      )}\n      {owner && owner === user?.uid && (\n        <SettingRow\n          icon={'i cursor'}\n          name={`Disable Chat`}\n          description=\"Prevent users from sending messages in chat.\"\n          checked={Boolean(isChatDisabled)}\n          disabled={false}\n          onChange={(_e, data) => setIsChatDisabled(Boolean(data.checked))}\n        />\n      )}\n      {owner && owner === user?.uid && (\n        <SettingRow\n          icon={'linkify'}\n          name={`Set Custom Room URL`}\n          description=\"Set a custom URL for this room. Inappropriate names may be revoked.\"\n          checked={Boolean(roomLock)}\n          disabled={!isSubscriber}\n          subOnly={true}\n          content={\n            <React.Fragment>\n              <Input\n                value={vanity}\n                disabled={!isSubscriber}\n                onChange={(e) => {\n                  checkValidVanity(e.target.value);\n                  setVanity(e.target.value);\n                }}\n                label={<Label>{`${window.location.origin}/r/`}</Label>}\n                loading={validVanityLoading}\n                fluid\n                size=\"mini\"\n                icon\n                action={\n                  validVanity ? (\n                    <Icon name=\"checkmark\" color=\"green\" />\n                  ) : (\n                    <Icon name=\"close\" color=\"red\" />\n                  )\n                }\n              ></Input>\n              <Button\n                size=\"mini\"\n                fluid\n                icon\n                labelPosition=\"left\"\n                color=\"orange\"\n                title=\"Copy link to clipboard\"\n                onClick={() => {\n                  navigator.clipboard.writeText(roomLink);\n                }}\n              >\n                <Icon name=\"copy\" />\n                {roomLink}\n              </Button>\n              <p />\n            </React.Fragment>\n          }\n        />\n      )}\n      <p />\n      {owner && owner === user?.uid && (\n        <Button\n          primary\n          disabled={!validVanity}\n          labelPosition=\"left\"\n          icon\n          fluid\n          onClick={() =>\n            setRoomState({\n              vanity: vanity,\n              password: password,\n              isChatDisabled: isChatDisabled,\n            })\n          }\n        >\n          <Icon name=\"save\" />\n          Save Admin Settings\n        </Button>\n      )}\n      {/* MEDIA_PATH */}\n      <div className=\"sectionHeader\">Local Settings</div>\n      <SettingRow\n        updateTS={updateTS}\n        icon=\"bell\"\n        name=\"Disable chat notification sound\"\n        description=\"Don't play a sound when a chat message is sent while you're on another tab\"\n        checked={Boolean(getCurrentSettings().disableChatSound)}\n        disabled={false}\n        onChange={(_e, data) => {\n          updateSettings(\n            JSON.stringify({\n              ...getCurrentSettings(),\n              disableChatSound: data.checked,\n            })\n          );\n          setUpdateTS(Number(new Date()));\n        }}\n      />\n    </div>\n  );\n};\n\nconst SettingRow = ({\n  icon,\n  name,\n  description,\n  checked,\n  disabled,\n  onChange,\n  content,\n  subOnly,\n  helpIcon,\n}: {\n  icon: string;\n  name: string;\n  description?: React.ReactNode;\n  checked?: boolean;\n  disabled: boolean;\n  updateTS?: number;\n  onChange?: (e: React.FormEvent, data: CheckboxProps) => void;\n  content?: React.ReactNode;\n  subOnly?: boolean;\n  helpIcon?: React.ReactNode;\n}) => {\n  return (\n    <React.Fragment>\n      <Divider inverted horizontal />\n      <div>\n        <div style={{ display: 'flex' }}>\n          <Icon size=\"large\" name={icon as any} />\n          <div>\n            {name} {helpIcon}\n            {subOnly ? (\n              <Label size=\"mini\" color=\"orange\">\n                Subscriber only\n              </Label>\n            ) : null}\n          </div>\n          {!content && (\n            <Radio\n              style={{ marginLeft: 'auto' }}\n              toggle\n              checked={checked}\n              disabled={disabled}\n              onChange={onChange}\n            />\n          )}\n        </div>\n        <div className=\"smallText\">{description}</div>\n        {content}\n      </div>\n    </React.Fragment>\n  );\n};\n","import React from 'react';\nimport { Modal, Header, Button, Icon } from 'semantic-ui-react';\n\nexport const ErrorModal = ({ error }: { error: string }) => {\n  return (\n    <Modal inverted basic open>\n      <Header as=\"h1\" style={{ textAlign: 'center' }}>\n        {error}\n      </Header>\n      <div style={{ display: 'flex', justifyContent: 'center' }}>\n        <Button\n          primary\n          size=\"huge\"\n          onClick={() => {\n            window.location.href = '/';\n          }}\n          icon\n          labelPosition=\"left\"\n        >\n          <Icon name=\"home\" />\n          Go to home page\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useCallback } from 'react';\nimport { Modal, Header, Input, Icon } from 'semantic-ui-react';\n\nexport const PasswordModal = ({\n  savedPasswords,\n  roomId,\n}: {\n  savedPasswords: StringDict;\n  roomId: string;\n}) => {\n  const setPassword = useCallback(() => {\n    window.localStorage.setItem(\n      'watchparty-passwords',\n      JSON.stringify({\n        ...savedPasswords,\n        [roomId]: (document.getElementById('roomPassword') as HTMLInputElement)\n          ?.value,\n      })\n    );\n    window.location.reload();\n  }, [savedPasswords, roomId]);\n  return (\n    <Modal inverted basic open>\n      <Header as=\"h1\" style={{ textAlign: 'center' }}>\n        This room requires a password.\n      </Header>\n      <div style={{ display: 'flex', justifyContent: 'center' }}>\n        <Input\n          id=\"roomPassword\"\n          type=\"password\"\n          size=\"large\"\n          onKeyPress={(e: any) => e.key === 'Enter' && setPassword()}\n          icon={\n            <Icon onClick={setPassword} name=\"key\" inverted circular link />\n          }\n        />\n      </div>\n    </Modal>\n  );\n};\n","import React from 'react';\nimport { Button, Icon, Popup } from 'semantic-ui-react';\n\nexport const SubscribeButton = ({\n  isSubscriber,\n  isCustomer,\n  openSubscribeModal,\n  openManage,\n}: {\n  isSubscriber: boolean;\n  isCustomer: boolean;\n  openSubscribeModal: () => void;\n  openManage: () => void;\n}) => {\n  return (\n    <>\n      {!isSubscriber && (\n        <Popup\n          content=\"Subscribe to help support us and enable additional features!\"\n          trigger={\n            <Button\n              fluid\n              color=\"orange\"\n              className=\"toolButton\"\n              icon\n              labelPosition=\"left\"\n              onClick={openSubscribeModal}\n            >\n              <Icon name=\"plus\" />\n              Subscribe\n            </Button>\n          }\n        />\n      )}\n      {isCustomer && (\n        <Popup\n          content=\"Manage your subscription\"\n          trigger={\n            <Button\n              fluid\n              color=\"orange\"\n              className=\"toolButton\"\n              icon\n              labelPosition=\"left\"\n              onClick={openManage}\n            >\n              <Icon name=\"wrench\" />\n              Manage\n            </Button>\n          }\n        />\n      )}\n    </>\n  );\n};\n","import './App.css';\n\nimport querystring from 'querystring';\nimport axios from 'axios';\nimport magnet from 'magnet-uri';\nimport React from 'react';\nimport {\n  Button,\n  Dimmer,\n  Dropdown,\n  DropdownProps,\n  Grid,\n  Icon,\n  Input,\n  Loader,\n  Message,\n  Popup,\n  Progress,\n  Menu,\n  Modal,\n} from 'semantic-ui-react';\nimport io from 'socket.io-client';\nimport VTTConverter from 'srt-webvtt';\nimport {\n  formatSpeed,\n  getMediaType,\n  iceServers,\n  isMobile,\n  serverPath,\n  testAutoplay,\n  openFileSelector,\n  getAndSaveClientId,\n} from '../../utils';\nimport { generateName } from '../../utils/generateName';\nimport { Chat } from '../Chat';\nimport { TopBar } from '../TopBar';\nimport { VBrowser } from '../VBrowser';\nimport { VideoChat } from '../VideoChat';\nimport { getCurrentSettings } from '../Settings';\nimport { MultiStreamModal } from '../Modal/MultiStreamModal';\nimport { ComboBox } from '../ComboBox/ComboBox';\nimport { SearchComponent } from '../SearchComponent/SearchComponent';\nimport { Controls } from '../Controls/Controls';\nimport { SubscribeModal } from '../Modal/SubscribeModal';\nimport { VBrowserModal } from '../Modal/VBrowserModal';\nimport { SettingsTab } from '../Settings/SettingsTab';\nimport { ErrorModal } from '../Modal/ErrorModal';\nimport { PasswordModal } from '../Modal/PasswordModal';\nimport { SubscribeButton } from '../SubscribeButton/SubscribeButton';\n\ndeclare global {\n  interface Window {\n    onYouTubeIframeAPIReady: any;\n    YT: any;\n    FB: any;\n    fbAsyncInit: Function;\n  }\n}\n\ninterface AppProps {\n  vanity?: string;\n  user?: firebase.User;\n}\n\ninterface AppState {\n  state: 'init' | 'starting' | 'connected';\n  currentMedia: string;\n  currentSubtitle: string;\n  currentMediaPaused: boolean;\n  participants: User[];\n  rosterUpdateTS: Number;\n  chat: ChatMessage[];\n  tsMap: NumberDict;\n  nameMap: StringDict;\n  pictureMap: StringDict;\n  myName: string;\n  myPicture: string;\n  loading: boolean;\n  scrollTimestamp: number;\n  fullScreen: boolean;\n  controlsTimestamp: number;\n  watchOptions: SearchResult[];\n  isScreenSharing: boolean;\n  isScreenSharingFile: boolean;\n  isVBrowser: boolean;\n  isYouTubeReady: boolean;\n  isAutoPlayable: boolean;\n  downloaded: number;\n  total: number;\n  speed: number;\n  connections: number;\n  multiStreamSelection?: any[];\n  error: string;\n  isErrorAuth: boolean;\n  settings: Settings;\n  vBrowserResolution: string;\n  isVBrowserLarge: boolean;\n  nonPlayableMedia: boolean;\n  currentTab: string;\n  isSubscriber: boolean;\n  isCustomer: boolean;\n  isSubscribeModalOpen: boolean;\n  isVBrowserModalOpen: boolean;\n  roomLock: string;\n  controller?: string;\n  savedPasswords: StringDict;\n  roomId: string;\n  errorMessage: string;\n  successMessage: string;\n  isChatDisabled: boolean;\n  showRightBar: boolean;\n}\n\nexport default class App extends React.Component<AppProps, AppState> {\n  state: AppState = {\n    state: 'starting',\n    currentMedia: '',\n    currentMediaPaused: false,\n    currentSubtitle: '',\n    participants: [],\n    rosterUpdateTS: Number(new Date()),\n    chat: [],\n    tsMap: {},\n    nameMap: {},\n    pictureMap: {},\n    myName: '',\n    myPicture: '',\n    loading: true,\n    scrollTimestamp: 0,\n    fullScreen: false,\n    controlsTimestamp: 0,\n    watchOptions: [],\n    isScreenSharing: false,\n    isScreenSharingFile: false,\n    isVBrowser: false,\n    isYouTubeReady: false,\n    isAutoPlayable: true,\n    downloaded: 0,\n    total: 0,\n    speed: 0,\n    connections: 0,\n    multiStreamSelection: undefined,\n    error: '',\n    isErrorAuth: false,\n    settings: {},\n    vBrowserResolution: '1280x720@30',\n    isVBrowserLarge: false,\n    nonPlayableMedia: false,\n    currentTab:\n      (querystring.parse(window.location.search.substring(1)).tab as string) ||\n      'chat',\n    isSubscriber: false,\n    isCustomer: false,\n    isSubscribeModalOpen: false,\n    isVBrowserModalOpen: false,\n    roomLock: '',\n    controller: '',\n    roomId: '',\n    savedPasswords: {},\n    errorMessage: '',\n    successMessage: '',\n    isChatDisabled: false,\n    showRightBar: true,\n  };\n  socket: SocketIOClient.Socket = null as any;\n  watchPartyYTPlayer: any = null;\n  ytDebounce = true;\n  screenShareStream?: MediaStream;\n  screenHostPC: PCDict = {};\n  screenSharePC?: RTCPeerConnection;\n  progressUpdater?: number;\n  heartbeat: number | undefined = undefined;\n\n  async componentDidMount() {\n    document.onfullscreenchange = this.onFullScreenChange;\n    document.onkeydown = this.onKeydown;\n\n    // Send heartbeat to the server\n    this.heartbeat = window.setInterval(() => {\n      window.fetch(serverPath + '/ping');\n    }, 10 * 60 * 1000);\n\n    const canAutoplay = await testAutoplay();\n    this.setState({ isAutoPlayable: canAutoplay });\n    this.loadSettings();\n    this.loadYouTube();\n    this.init();\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('fullscreenchange', this.onFullScreenChange);\n    document.removeEventListener('keydown', this.onKeydown);\n    window.clearInterval(this.heartbeat);\n  }\n\n  componentDidUpdate(prevProps: AppProps) {\n    if (this.props.user && !prevProps.user) {\n      this.loadSignInData();\n    }\n  }\n\n  loadSettings = async () => {\n    // Load settings from localstorage and remote\n    const customSettingsData = await fetch(serverPath + '/settings');\n    const customSettings = await customSettingsData.json();\n    let settings = { ...getCurrentSettings(), ...customSettings };\n    this.setState({ settings });\n  };\n\n  loadSignInData = async () => {\n    const user = this.props.user;\n    if (user && this.socket) {\n      // NOTE: firebase auth doesn't provide the actual first name data that individual providers (G/FB) do\n      // It's accessible at the time the user logs in but not afterward\n      // If we want accurate surname/given name we'll need to save that somewhere\n      const firstName = user.displayName?.split(' ')[0];\n      if (firstName) {\n        this.updateName(null, { value: firstName });\n      }\n      if (user.photoURL) {\n        this.updatePicture(user.photoURL + '?height=128&width=128');\n      }\n      this.updateUid(user);\n      const token = await user.getIdToken();\n      const response = await window.fetch(\n        serverPath + `/metadata?uid=${user.uid}&token=${token}`\n      );\n      const data = await response.json();\n      this.setState({\n        isSubscriber: data.isSubscriber,\n        isCustomer: data.isCustomer,\n      });\n    }\n  };\n\n  loadYouTube = () => {\n    // This code loads the IFrame Player API code asynchronously.\n    const tag = document.createElement('script');\n    tag.src = 'https://www.youtube.com/iframe_api';\n    var firstScriptTag = document.getElementsByTagName('script')[0];\n    firstScriptTag!.parentNode!.insertBefore(tag, firstScriptTag);\n\n    window.onYouTubeIframeAPIReady = () => {\n      // Note: this fails silently if the element is not available\n      const ytPlayer = new window.YT.Player('leftYt', {\n        events: {\n          onReady: () => {\n            this.watchPartyYTPlayer = ytPlayer;\n            this.setState({ isYouTubeReady: true, loading: false });\n            // We might have failed to play YT originally, ask for the current video again\n            if (this.isYouTube()) {\n              this.socket.emit('CMD:askHost');\n            }\n          },\n          onStateChange: (e: any) => {\n            if (\n              getMediaType(this.state.currentMedia) === 'youtube' &&\n              e.data === window.YT?.PlayerState?.CUED\n            ) {\n              this.setState({ loading: false });\n            }\n            // console.log(this.ytDebounce, e.data, this.watchPartyYTPlayer?.getVideoUrl());\n            if (\n              this.ytDebounce &&\n              ((e.data === window.YT?.PlayerState?.PLAYING &&\n                this.state.currentMediaPaused) ||\n                (e.data === window.YT?.PlayerState?.PAUSED &&\n                  !this.state.currentMediaPaused))\n            ) {\n              this.ytDebounce = false;\n              if (e.data === window.YT?.PlayerState?.PLAYING) {\n                this.socket.emit('CMD:play');\n                this.doPlay();\n              } else {\n                this.socket.emit('CMD:pause');\n                this.doPause();\n              }\n              window.setTimeout(() => (this.ytDebounce = true), 500);\n            }\n          },\n        },\n      });\n    };\n  };\n\n  init = async () => {\n    // Load room ID from url\n    let roomId = '/default';\n    let query = window.location.hash.substring(1);\n    if (query) {\n      roomId = '/' + query;\n    }\n    // if a vanity name, resolve the url to a room id\n    if (this.props.vanity) {\n      try {\n        const response = await axios.get(\n          serverPath + '/resolveRoom/' + this.props.vanity\n        );\n        if (response.data.roomId) {\n          roomId = response.data.roomId;\n        } else {\n          throw new Error('failed to resolve room name');\n        }\n      } catch (e) {\n        console.error(e);\n        this.setState({ error: \"There's no room with this name.\" });\n        return;\n      }\n    }\n    this.setState({ roomId });\n    this.join(roomId);\n  };\n\n  join = async (roomId: string) => {\n    let password = '';\n    try {\n      const savedPasswordsString = window.localStorage.getItem(\n        'watchparty-passwords'\n      );\n      const savedPasswords = JSON.parse(savedPasswordsString || '{}');\n      this.setState({ savedPasswords });\n      password = savedPasswords[roomId] || '';\n    } catch (e) {\n      console.warn('[ALERT] Could not parse saved passwords');\n    }\n    let shard = '';\n    if (/^\\d/.test(roomId.slice(1))) {\n      // Rooms assigned to shards start with a number\n      shard = /^\\d+/.exec(roomId.slice(1))?.[0] ?? '';\n    }\n    const socket = io.connect(serverPath + roomId, {\n      transports: ['websocket'],\n      query: {\n        clientId: getAndSaveClientId(),\n        password,\n        shard,\n      },\n    });\n    this.socket = socket;\n    socket.on('connect', async () => {\n      this.setState({ state: 'connected' });\n      // Load username from localstorage\n      let userName = window.localStorage.getItem('watchparty-username');\n      this.updateName(null, { value: userName || generateName() });\n      this.loadSignInData();\n    });\n    socket.on('error', (err: any) => {\n      console.error(err);\n      if (err === 'Invalid namespace') {\n        this.setState({ error: \"There's no room with this name.\" });\n      } else if (err === 'not authorized') {\n        this.setState({ isErrorAuth: true });\n      } else if (err === 'room full') {\n        this.setState({ error: 'This room is full.' });\n      } else {\n        this.setState({ error: 'An error occurred.' });\n      }\n    });\n    socket.on('errorMessage', (err: string) => {\n      this.setState({ errorMessage: err });\n      setTimeout(() => {\n        this.setState({ errorMessage: '' });\n      }, 3000);\n    });\n    socket.on('successMessage', (success: string) => {\n      this.setState({ successMessage: success });\n      setTimeout(() => {\n        this.setState({ successMessage: '' });\n      }, 3000);\n    });\n    socket.on('REC:play', () => {\n      this.doPlay();\n    });\n    socket.on('REC:pause', () => {\n      this.doPause();\n    });\n    socket.on('REC:seek', (data: any) => {\n      this.doSeek(data);\n    });\n    socket.on('REC:subtitle', (data: string) => {\n      this.setState(\n        { currentSubtitle: serverPath + '/subtitle/' + data },\n        () => {\n          if (!this.isSubtitled()) {\n            this.toggleSubtitle();\n          }\n        }\n      );\n    });\n    socket.on('REC:changeController', (data: string) => {\n      this.setState({ controller: data });\n    });\n    socket.on('REC:host', async (data: HostState) => {\n      let currentMedia = data.video || '';\n      if (this.isScreenShare() && !currentMedia.startsWith('screenshare://')) {\n        this.stopScreenShare();\n      }\n      if (this.isFileShare() && !currentMedia.startsWith('fileshare://')) {\n        this.stopScreenShare();\n      }\n      if (this.isScreenShare() && currentMedia.startsWith('screenshare://')) {\n        // Ignore, it's probably a reconnection\n        return;\n      }\n      if (this.isFileShare() && currentMedia.startsWith('fileshare://')) {\n        // Ignore, it's probably a reconnection\n        return;\n      }\n      if (this.isVBrowser() && !currentMedia.startsWith('vbrowser://')) {\n        this.stopVBrowser();\n      }\n      this.setState(\n        {\n          currentMedia,\n          currentMediaPaused: data.paused,\n          currentSubtitle: Boolean(data.subtitle)\n            ? serverPath + '/subtitle/' + data.subtitle\n            : '',\n          loading: Boolean(data.video),\n          nonPlayableMedia: false,\n          isVBrowserLarge: data.isVBrowserLarge,\n          vBrowserResolution: data.isVBrowserLarge\n            ? '1920x1080@30'\n            : '1280x720@30',\n          controller: data.controller,\n        },\n        () => {\n          if (\n            this.state.isScreenSharingFile ||\n            (this.isVBrowser() && this.getVBrowserHost())\n          ) {\n            console.log(\n              'skipping REC:host video since fileshare is using leftVideo or this is a vbrowser'\n            );\n            this.setLoadingFalse();\n            return;\n          }\n          // Stop all players\n          const leftVideo = document.getElementById(\n            'leftVideo'\n          ) as HTMLMediaElement;\n          leftVideo?.pause();\n          this.watchPartyYTPlayer?.stopVideo();\n\n          if (this.isYouTube() && !this.watchPartyYTPlayer) {\n            console.log(\n              'YT player not ready, onReady callback will retry when it is'\n            );\n          } else if (this.isVBrowser()) {\n            console.log(\n              'not playing video as this is a vbrowser:// placeholder'\n            );\n          } else {\n            // Start this video\n            this.doSrc(data.video, data.videoTS);\n            if (!data.paused) {\n              this.doPlay();\n            }\n            if (data.subtitle) {\n              if (!this.isSubtitled()) {\n                this.toggleSubtitle();\n              }\n            }\n            // One time, when we're ready to play\n            leftVideo?.addEventListener(\n              'canplay',\n              () => {\n                this.setLoadingFalse();\n                this.jumpToLeader();\n              },\n              { once: true }\n            );\n\n            // Progress updater\n            window.clearInterval(this.progressUpdater);\n            this.setState({ downloaded: 0, total: 0, speed: 0 });\n            if (currentMedia.includes('/stream?torrent=magnet')) {\n              this.progressUpdater = window.setInterval(async () => {\n                const response = await window.fetch(\n                  currentMedia.replace('/stream', '/progress')\n                );\n                const data = await response.json();\n                this.setState({\n                  downloaded: data.downloaded,\n                  total: data.total,\n                  speed: data.speed,\n                  connections: data.connections,\n                });\n              }, 1000);\n            }\n          }\n        }\n      );\n    });\n    socket.on('REC:chat', (data: ChatMessage) => {\n      if (\n        !getCurrentSettings().disableChatSound &&\n        document.visibilityState &&\n        document.visibilityState !== 'visible'\n      ) {\n        new Audio('/clearly.mp3').play();\n      }\n      this.state.chat.push(data);\n      this.setState({\n        chat: this.state.chat,\n        scrollTimestamp: Number(new Date()),\n      });\n    });\n    socket.on('REC:tsMap', (data: NumberDict) => {\n      this.setState({ tsMap: data });\n      this.syncSubtitle();\n    });\n    socket.on('REC:nameMap', (data: StringDict) => {\n      this.setState({ nameMap: data });\n    });\n    socket.on('REC:pictureMap', (data: StringDict) => {\n      this.setState({ pictureMap: data });\n    });\n    socket.on('REC:lock', (data: string) => {\n      this.setState({ roomLock: data });\n    });\n    socket.on('roster', (data: User[]) => {\n      this.setState(\n        { participants: data, rosterUpdateTS: Number(new Date()) },\n        () => {\n          this.updateScreenShare();\n        }\n      );\n    });\n    socket.on('chatinit', (data: any) => {\n      this.setState({ chat: data, scrollTimestamp: Number(new Date()) });\n    });\n    socket.on('signalSS', async (data: any) => {\n      // Handle messages received from signaling server\n      const msg = data.msg;\n      const from = data.from;\n      // Determine whether the message came from the sharer or the sharee\n      const pc = (data.sharer\n        ? this.screenSharePC\n        : this.screenHostPC[from]) as RTCPeerConnection;\n      if (msg.ice !== undefined) {\n        pc.addIceCandidate(new RTCIceCandidate(msg.ice));\n      } else if (msg.sdp && msg.sdp.type === 'offer') {\n        // console.log('offer');\n        await pc.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n        const answer = await pc.createAnswer();\n        await pc.setLocalDescription(answer);\n        this.sendSignalSS(from, { sdp: pc.localDescription }, !data.sharer);\n      } else if (msg.sdp && msg.sdp.type === 'answer') {\n        pc.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n      }\n    });\n    window.setInterval(() => {\n      if (this.state.currentMedia) {\n        this.socket.emit('CMD:ts', this.getCurrentTime());\n      }\n    }, 1000);\n  };\n\n  setupFileShare = async () => {\n    const files = await openFileSelector();\n    if (!files) {\n      return;\n    }\n    const file = files[0];\n    const leftVideo = document.getElementById('leftVideo') as HTMLMediaElement;\n    leftVideo.srcObject = null;\n    leftVideo.src = URL.createObjectURL(file);\n    leftVideo.play();\n    //@ts-ignore\n    const stream = leftVideo.captureStream();\n    // Can render video to a canvas to resize it, reduce size\n    stream.onaddtrack = () => {\n      console.log(stream, stream.getVideoTracks(), stream.getAudioTracks());\n      if (\n        !this.screenShareStream &&\n        stream.getVideoTracks().length &&\n        stream.getAudioTracks().length\n      ) {\n        stream.getVideoTracks()[0].onended = this.stopScreenShare;\n        this.screenShareStream = stream;\n        this.socket.emit('CMD:joinScreenShare', { file: true });\n        this.setState({ isScreenSharing: true, isScreenSharingFile: true });\n        stream.onaddtrack = undefined;\n      }\n    };\n  };\n\n  setupScreenShare = async () => {\n    //@ts-ignore\n    const stream = await navigator.mediaDevices.getDisplayMedia({\n      video: { cursor: 'never', height: 720, logicalSurface: true },\n      audio: true,\n    });\n    stream.getVideoTracks()[0].onended = this.stopScreenShare;\n    this.screenShareStream = stream;\n    this.socket.emit('CMD:joinScreenShare');\n    this.setState({ isScreenSharing: true });\n  };\n\n  stopScreenShare = async () => {\n    this.screenShareStream &&\n      this.screenShareStream.getTracks().forEach((track) => {\n        track.stop();\n      });\n    this.screenShareStream = undefined;\n    if (this.screenSharePC) {\n      this.screenSharePC.close();\n      this.screenSharePC = undefined;\n    }\n    Object.values(this.screenHostPC).forEach((pc) => {\n      pc.close();\n    });\n    this.screenHostPC = {};\n    if (this.state.isScreenSharing) {\n      this.socket.emit('CMD:leaveScreenShare');\n    }\n    this.setState({ isScreenSharing: false, isScreenSharingFile: false });\n  };\n\n  updateScreenShare = async () => {\n    if (!this.isScreenShare() && !this.isFileShare()) {\n      return;\n    }\n    // TODO teardown for those who leave\n    const sharer = this.state.participants.find((p) => p.isScreenShare);\n    if (sharer && sharer.id === this.socket.id) {\n      // We're the sharer, create a connection to each other member\n      this.state.participants.forEach((user) => {\n        const id = user.id;\n        if (id === this.socket.id && this.state.isScreenSharingFile) {\n          // Don't set up a connection to ourselves if sharing file\n          return;\n        }\n        if (!this.screenHostPC[id]) {\n          // Set up the RTCPeerConnection for sharing media to each member\n          const pc = new RTCPeerConnection({ iceServers: iceServers() });\n          this.screenHostPC[id] = pc;\n          //@ts-ignore\n          pc.addStream(this.screenShareStream);\n          pc.onicecandidate = (event) => {\n            // We generated an ICE candidate, send it to peer\n            if (event.candidate) {\n              this.sendSignalSS(id, { ice: event.candidate }, true);\n            }\n          };\n          pc.onnegotiationneeded = async () => {\n            // Start connection for peer's video\n            const offer = await pc.createOffer();\n            await pc.setLocalDescription(offer);\n            this.sendSignalSS(id, { sdp: pc.localDescription }, true);\n          };\n        }\n      });\n    }\n    // We're a watcher, establish connection to sharer\n    // If screensharing, sharer also does this\n    // If filesharing, sharer does not do this since we use leftVideo\n    if (sharer && !this.screenSharePC && !this.state.isScreenSharingFile) {\n      const pc = new RTCPeerConnection({ iceServers: iceServers() });\n      this.screenSharePC = pc;\n      pc.onicecandidate = (event) => {\n        // We generated an ICE candidate, send it to peer\n        if (event.candidate) {\n          this.sendSignalSS(sharer.id, { ice: event.candidate });\n        }\n      };\n      //@ts-ignore\n      pc.onaddstream = (event: any) => {\n        console.log('stream from webrtc peer');\n        // Mount the stream from peer\n        const stream = event.stream;\n        // console.log(stream);\n        const leftVideo = document.getElementById(\n          'leftVideo'\n        ) as HTMLMediaElement;\n        if (leftVideo) {\n          leftVideo.src = '';\n          leftVideo.srcObject = stream;\n          this.doPlay();\n        }\n      };\n    }\n  };\n\n  startVBrowser = async (rcToken: string, options: { size: string }) => {\n    // user.uid is the public user identifier\n    // user.getIdToken() is the secret access token we can send to the server to prove identity\n    const user = this.props.user;\n    const uid = user?.uid;\n    const token = await user?.getIdToken();\n    this.socket.emit('CMD:startVBrowser', { options, uid, token, rcToken });\n  };\n\n  stopVBrowser = async () => {\n    this.socket.emit('CMD:stopVBrowser');\n  };\n\n  changeController = async (_e: any, data: DropdownProps) => {\n    // console.log(data);\n    this.socket.emit('CMD:changeController', data.value);\n  };\n\n  setSubtitle = async () => {\n    const files = await openFileSelector('.srt');\n    if (!files) {\n      return;\n    }\n    const file = files[0];\n    const reader = new FileReader();\n    reader.addEventListener('load', (event) => {\n      const subData = event.target?.result;\n      this.socket.emit('CMD:subtitle', subData);\n    });\n    reader.readAsText(file);\n  };\n\n  sendSignalSS = async (to: string, data: any, sharer?: boolean) => {\n    // console.log('sendSS', to, data);\n    this.socket.emit('signalSS', { to, msg: data, sharer });\n  };\n\n  isYouTube = () => {\n    return getMediaType(this.state.currentMedia) === 'youtube';\n  };\n\n  isVideo = () => {\n    return getMediaType(this.state.currentMedia) === 'video';\n  };\n\n  isScreenShare = () => {\n    return this.state.currentMedia.startsWith('screenshare://');\n  };\n\n  isFileShare = () => {\n    return this.state.currentMedia.startsWith('fileshare://');\n  };\n\n  isVBrowser = () => {\n    return this.state.currentMedia.startsWith('vbrowser://');\n  };\n\n  isHttp = () => {\n    return this.state.currentMedia.startsWith('http');\n  };\n\n  getVBrowserPass = () => {\n    return this.state.currentMedia.replace('vbrowser://', '').split('@')[0];\n  };\n\n  getVBrowserHost = () => {\n    return this.state.currentMedia.replace('vbrowser://', '').split('@')[1];\n  };\n\n  getCurrentTime = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo?.currentTime;\n    }\n    if (this.isYouTube()) {\n      return this.watchPartyYTPlayer?.getCurrentTime();\n    }\n  };\n\n  getDuration = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo.duration;\n    }\n    if (this.isYouTube()) {\n      return this.watchPartyYTPlayer?.getDuration();\n    }\n    return 0;\n  };\n\n  isPauseDisabled = () => {\n    return this.isScreenShare() || this.isVBrowser();\n  };\n\n  isPaused = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo.paused || leftVideo.ended;\n    }\n    if (this.isYouTube()) {\n      return (\n        this.watchPartyYTPlayer?.getPlayerState() ===\n          window.YT?.PlayerState?.PAUSED ||\n        this.watchPartyYTPlayer?.getPlayerState() ===\n          window.YT?.PlayerState?.ENDED\n      );\n    }\n    return false;\n  };\n\n  isMuted = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo?.muted;\n    }\n    if (this.isYouTube()) {\n      return this.watchPartyYTPlayer?.isMuted();\n    }\n    return false;\n  };\n\n  isSubtitled = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return (\n        leftVideo.textTracks[0] && leftVideo.textTracks[0].mode === 'showing'\n      );\n    }\n    if (this.isYouTube()) {\n      try {\n        const current = this.watchPartyYTPlayer?.getOption('captions', 'track');\n        return Boolean(current && current.languageCode);\n      } catch (e) {\n        console.warn(e);\n        return false;\n      }\n    }\n    return false;\n  };\n\n  jumpToLeader = () => {\n    // Jump to the leader's position\n    const maxTS = this.getLeaderTime();\n    if (maxTS > 0) {\n      console.log('jump to leader at ', maxTS);\n      this.doSeek(maxTS);\n    }\n  };\n\n  doSrc = async (src: string, time: number) => {\n    console.log('doSrc', src, time);\n    if (this.isScreenShare() || this.isFileShare() || this.isVBrowser()) {\n      // No-op as we'll set video when WebRTC completes\n      return;\n    }\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      if (leftVideo) {\n        leftVideo.srcObject = null;\n        leftVideo.src = src;\n        leftVideo.currentTime = time;\n        // Clear subtitles\n        leftVideo.innerHTML = '';\n      }\n    }\n    if (this.isYouTube()) {\n      let url = new window.URL(src);\n      // Standard link https://www.youtube.com/watch?v=ID\n      let videoId = querystring.parse(url.search.substring(1))['v'];\n      // Link shortener https://youtu.be/ID\n      let altVideoId = src.split('/').slice(-1)[0];\n      this.watchPartyYTPlayer?.cueVideoById(videoId || altVideoId, time);\n    }\n  };\n\n  doPlay = async () => {\n    const canAutoplay = this.state.isAutoPlayable || (await testAutoplay());\n    this.setState(\n      { currentMediaPaused: false, isAutoPlayable: canAutoplay },\n      async () => {\n        if (this.isVideo()) {\n          const leftVideo = document.getElementById(\n            'leftVideo'\n          ) as HTMLMediaElement;\n          try {\n            if (this.state.isAutoPlayable) {\n              this.setMute(false);\n            } else {\n              this.setMute(true);\n            }\n            await leftVideo?.play();\n          } catch (e) {\n            console.warn(e);\n            if (e.name === 'NotSupportedError') {\n              this.setState({ loading: false, nonPlayableMedia: true });\n            }\n          }\n        }\n        if (this.isYouTube()) {\n          console.log('play yt');\n          this.watchPartyYTPlayer?.playVideo();\n        }\n      }\n    );\n  };\n\n  doPause = () => {\n    this.setState({ currentMediaPaused: true }, async () => {\n      if (this.isVideo()) {\n        const leftVideo = document.getElementById(\n          'leftVideo'\n        ) as HTMLMediaElement;\n        leftVideo.pause();\n      }\n      if (this.isYouTube()) {\n        console.log('pause');\n        this.watchPartyYTPlayer?.pauseVideo();\n      }\n    });\n  };\n\n  doSeek = (time: number) => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      leftVideo.currentTime = time;\n    }\n    if (this.isYouTube()) {\n      this.watchPartyYTPlayer?.seekTo(time, true);\n    }\n  };\n\n  togglePlay = () => {\n    if (this.isPauseDisabled()) {\n      return;\n    }\n    let shouldPlay = true;\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      shouldPlay = leftVideo.paused || leftVideo.ended;\n    } else if (this.isYouTube()) {\n      shouldPlay =\n        this.watchPartyYTPlayer?.getPlayerState() ===\n          window.YT?.PlayerState.PAUSED ||\n        this.getCurrentTime() === this.getDuration();\n    }\n    if (shouldPlay) {\n      this.socket.emit('CMD:play');\n      this.doPlay();\n    } else {\n      this.socket.emit('CMD:pause');\n      this.doPause();\n    }\n  };\n\n  onSeek = (e: any, time: number) => {\n    let target = time;\n    if (e) {\n      const rect = e.target.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const max = rect.width;\n      target = (x / max) * this.getDuration();\n    }\n    target = Math.max(target, 0);\n    this.doSeek(target);\n    this.socket.emit('CMD:seek', target);\n  };\n\n  onFullScreenChange = () => {\n    this.setState({ fullScreen: Boolean(document.fullscreenElement) });\n  };\n\n  onKeydown = (e: any) => {\n    if (!document.activeElement || document.activeElement.tagName === 'BODY') {\n      if (e.key === ' ') {\n        e.preventDefault();\n        this.togglePlay();\n      } else if (e.key === 'ArrowRight') {\n        this.onSeek(null, this.getCurrentTime() + 10);\n      } else if (e.key === 'ArrowLeft') {\n        this.onSeek(null, this.getCurrentTime() - 10);\n      } else if (e.key === 'c') {\n        this.toggleSubtitle();\n      } else if (e.key === 't') {\n        this.fullScreen(false);\n      } else if (e.key === 'f') {\n        this.fullScreen(true);\n      } else if (e.key === 'm') {\n        this.toggleMute();\n      }\n    }\n  };\n\n  fullScreen = async (bVideoOnly: boolean) => {\n    let container = document.getElementById(\n      'fullScreenContainer'\n    ) as HTMLElement;\n    if (bVideoOnly || isMobile()) {\n      if (this.isVBrowser()) {\n        container = document.getElementById('leftVideoParent') as HTMLElement;\n      } else {\n        container = document.getElementById(\n          this.isYouTube() ? 'leftYt' : 'leftVideo'\n        ) as HTMLElement;\n      }\n    }\n    if (!document.fullscreenElement) {\n      await container.requestFullscreen();\n      return;\n    }\n    const bChangeElements = document.fullscreenElement !== container;\n    await document.exitFullscreen();\n    if (bChangeElements) {\n      await container.requestFullscreen();\n    }\n  };\n\n  toggleMute = () => {\n    this.setMute(!this.isMuted());\n  };\n\n  setMute = (muted: boolean) => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      if (leftVideo) {\n        leftVideo.muted = muted;\n      }\n    }\n    if (this.isYouTube()) {\n      if (muted) {\n        this.watchPartyYTPlayer?.mute();\n      } else {\n        this.watchPartyYTPlayer?.unMute();\n      }\n    }\n  };\n\n  setVolume = (volume: number) => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      leftVideo.volume = volume;\n    }\n    if (this.isYouTube()) {\n      this.watchPartyYTPlayer?.setVolume(volume * 100);\n    }\n  };\n\n  getVolume = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo.volume;\n    }\n    if (this.isYouTube()) {\n      const volume = this.watchPartyYTPlayer?.getVolume();\n      return volume / 100;\n    }\n  };\n\n  loadSubtitles = async () => {\n    const leftVideo = document.getElementById('leftVideo') as HTMLMediaElement;\n    // Clear subtitles\n    leftVideo.innerHTML = '';\n    let subtitleSrc = '';\n    const src = this.state.currentMedia;\n    if (this.state.currentSubtitle) {\n      subtitleSrc = this.state.currentSubtitle;\n    } else if (src.includes('/stream?torrent=magnet')) {\n      subtitleSrc = src.replace('/stream', '/subtitles2');\n    } else if (src.startsWith('http')) {\n      const subtitlePath = src.slice(0, src.lastIndexOf('/') + 1);\n      // Expect subtitle name to be file name + .srt\n      subtitleSrc =\n        subtitlePath + 'subtitles/' + this.getFileName(src) + '.srt';\n    }\n    if (subtitleSrc) {\n      const response = await window.fetch(subtitleSrc);\n      const buffer = await response.arrayBuffer();\n      const vttConverter = new VTTConverter(new Blob([buffer]));\n      const url = await vttConverter.getURL();\n      const track = document.createElement('track');\n      track.kind = 'captions';\n      track.label = 'English';\n      track.srclang = 'en';\n      track.src = url;\n      leftVideo.appendChild(track);\n      leftVideo.textTracks[0].mode = 'showing';\n    }\n  };\n\n  syncSubtitle = () => {\n    const sharer = this.state.participants.find((p) => p.isScreenShare);\n    if (!sharer || sharer.id === this.socket.id) {\n      return;\n    }\n    // When sharing, our timestamp doesn't match the subtitles so adjust them\n    // For each cue, subtract the videoTS of the sharer, then add our own\n    const leftVideo = document.getElementById('leftVideo') as HTMLMediaElement;\n    const track = leftVideo?.textTracks[0];\n    let offset = leftVideo.currentTime - this.state.tsMap[sharer.id];\n    if (track && track.cues && offset) {\n      for (let i = 0; i < track.cues.length; i++) {\n        let cue = track?.cues?.[i];\n        if (!cue) {\n          continue;\n        }\n        // console.log(cue.text, offset, (cue as any).origStart, (cue as any).origEnd);\n        if (!(cue as any).origStart) {\n          (cue as any).origStart = cue.startTime;\n          (cue as any).origEnd = cue.endTime;\n        }\n        cue.startTime = (cue as any).origStart + offset;\n        cue.endTime = (cue as any).origEnd + offset;\n      }\n    }\n  };\n\n  toggleSubtitle = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      if (this.isSubtitled()) {\n        leftVideo.innerHTML = '';\n      } else {\n        this.loadSubtitles();\n      }\n    }\n    if (this.isYouTube()) {\n      const isSubtitled = this.isSubtitled();\n      // console.log(isSubtitled);\n      if (isSubtitled) {\n        // BUG this doesn't actually set the value so subtitles can't be toggled off\n        this.watchPartyYTPlayer?.setOption('captions', 'track', {});\n      } else {\n        this.watchPartyYTPlayer?.setOption('captions', 'reload', true);\n        const tracks = this.watchPartyYTPlayer?.getOption(\n          'captions',\n          'tracklist'\n        );\n        this.watchPartyYTPlayer?.setOption('captions', 'track', tracks[0]);\n      }\n    }\n  };\n\n  setMedia = (_e: any, data: DropdownProps) => {\n    this.socket.emit('CMD:host', data.value);\n  };\n\n  launchMultiSelect = (data: any) => {\n    this.setState({ multiStreamSelection: data });\n  };\n\n  resetMultiSelect = () => {\n    this.setState({ multiStreamSelection: undefined });\n  };\n\n  updateName = (_e: any, data: { value: string }) => {\n    this.setState({ myName: data.value });\n    this.socket.emit('CMD:name', data.value);\n    window.localStorage.setItem('watchparty-username', data.value);\n  };\n\n  updatePicture = (url: string) => {\n    this.setState({ myPicture: url });\n    this.socket.emit('CMD:picture', url);\n  };\n\n  updateUid = async (user: firebase.User) => {\n    const uid = user.uid;\n    const token = await user.getIdToken();\n    this.socket.emit('CMD:uid', { uid, token });\n  };\n\n  getMediaDisplayName = (input: string) => {\n    if (!input) {\n      return '';\n    }\n    // Show the whole URL for youtube\n    if (getMediaType(input) === 'youtube') {\n      return input;\n    }\n    if (input.startsWith('screenshare://')) {\n      let id = input.slice('screenshare://'.length);\n      return this.state.nameMap[id] + \"'s screen\";\n    }\n    if (input.startsWith('fileshare://')) {\n      let id = input.slice('fileshare://'.length);\n      return this.state.nameMap[id] + \"'s file\";\n    }\n    if (input.startsWith('vbrowser://')) {\n      return 'Virtual Browser' + (this.state.isVBrowserLarge ? '+' : '');\n    }\n    if (input.includes('/stream?torrent=magnet')) {\n      const search = new URL(input).search;\n      const magnetUrl = querystring.parse(search.substring(1))\n        .torrent as string;\n      const magnetParsed = magnet.decode(magnetUrl);\n      return magnetParsed.name;\n    }\n    // Get the filename out of the URL\n    return input;\n  };\n\n  getFileName = (input: string) => {\n    return input.split('/').slice(-1)[0];\n  };\n\n  setLoadingFalse = () => {\n    this.setState({ loading: false });\n  };\n\n  onManage = async () => {\n    const resp = await window.fetch(serverPath + '/manageSub', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        uid: this.props.user?.uid,\n        token: await this.props.user?.getIdToken(),\n        return_url: window.location.href,\n      }),\n    });\n    const session = await resp.json();\n    console.log(session);\n    window.location.assign(session.url);\n  };\n\n  setRoomLock = async (locked: boolean) => {\n    const uid = this.props.user?.uid;\n    const token = await this.props.user?.getIdToken();\n    this.socket.emit('CMD:lock', { uid, token, locked });\n  };\n\n  haveLock = () => {\n    if (!this.state.roomLock) {\n      return true;\n    }\n    return this.props.user?.uid === this.state.roomLock;\n  };\n\n  setChatDisabled = (val: boolean) => this.setState({ isChatDisabled: val });\n\n  getLeaderTime = () => {\n    return Math.max(...Object.values(this.state.tsMap));\n  };\n\n  render() {\n    const sharer = this.state.participants.find((p) => p.isScreenShare);\n    const controls = (\n      <Controls\n        key={this.state.controlsTimestamp}\n        togglePlay={this.togglePlay}\n        onSeek={this.onSeek}\n        fullScreen={this.fullScreen}\n        toggleMute={this.toggleMute}\n        toggleSubtitle={this.toggleSubtitle}\n        setVolume={this.setVolume}\n        getVolume={this.getVolume}\n        jumpToLeader={this.jumpToLeader}\n        paused={this.isPaused()}\n        muted={this.isMuted()}\n        subtitled={this.isSubtitled()}\n        currentTime={this.getCurrentTime()}\n        duration={this.getDuration()}\n        disabled={!this.haveLock()}\n        leaderTime={this.isHttp() ? this.getLeaderTime() : undefined}\n        isPauseDisabled={this.isPauseDisabled()}\n      />\n    );\n    const subscribeButton = (\n      <SubscribeButton\n        isSubscriber={this.state.isSubscriber}\n        isCustomer={this.state.isCustomer}\n        openManage={this.onManage}\n        openSubscribeModal={() => this.setState({ isSubscribeModalOpen: true })}\n      />\n    );\n    const displayRightContent =\n      this.state.showRightBar || this.state.fullScreen;\n    const rightBar = (\n      <Grid.Column\n        width={displayRightContent ? 4 : 1}\n        style={{ display: 'flex', flexDirection: 'column' }}\n        className={`${\n          this.state.fullScreen\n            ? 'fullHeightColumnFullscreen'\n            : 'fullHeightColumn'\n        }`}\n      >\n        <Input\n          inverted\n          fluid\n          label={'My name is:'}\n          value={this.state.myName}\n          onChange={this.updateName}\n          style={{ visibility: displayRightContent ? '' : 'hidden' }}\n          icon={\n            <Icon\n              onClick={() => this.updateName(null, { value: generateName() })}\n              name=\"refresh\"\n              inverted\n              circular\n              link\n            />\n          }\n        />\n        {\n          <Menu\n            inverted\n            widths={3}\n            style={{\n              marginTop: '4px',\n              marginBottom: '4px',\n              visibility: displayRightContent ? '' : 'hidden',\n            }}\n          >\n            <Menu.Item\n              name=\"chat\"\n              active={this.state.currentTab === 'chat'}\n              onClick={() => this.setState({ currentTab: 'chat' })}\n              as=\"a\"\n            >\n              {/* <Icon name=\"conversation\" /> */}\n              Chat\n            </Menu.Item>\n            <Menu.Item\n              name=\"people\"\n              active={this.state.currentTab === 'people'}\n              onClick={() => this.setState({ currentTab: 'people' })}\n              as=\"a\"\n            >\n              {/* <Icon name=\"group\" /> */}\n              People ({this.state.participants.length})\n            </Menu.Item>\n            <Menu.Item\n              name=\"settings\"\n              active={this.state.currentTab === 'settings'}\n              onClick={() => this.setState({ currentTab: 'settings' })}\n              as=\"a\"\n            >\n              {/* <Icon name=\"setting\" /> */}\n              Settings\n            </Menu.Item>\n          </Menu>\n        }\n        <Chat\n          chat={this.state.chat}\n          nameMap={this.state.nameMap}\n          pictureMap={this.state.pictureMap}\n          socket={this.socket}\n          scrollTimestamp={this.state.scrollTimestamp}\n          getMediaDisplayName={this.getMediaDisplayName}\n          hide={this.state.currentTab !== 'chat' || !displayRightContent}\n          isChatDisabled={this.state.isChatDisabled}\n        />\n        {this.state.state === 'connected' && (\n          <VideoChat\n            socket={this.socket}\n            participants={this.state.participants}\n            nameMap={this.state.nameMap}\n            pictureMap={this.state.pictureMap}\n            tsMap={this.state.tsMap}\n            rosterUpdateTS={this.state.rosterUpdateTS}\n            hide={this.state.currentTab !== 'people' || !displayRightContent}\n          />\n        )}\n        <SettingsTab\n          hide={this.state.currentTab !== 'settings' || !displayRightContent}\n          user={this.props.user}\n          roomLock={this.state.roomLock}\n          setRoomLock={this.setRoomLock}\n          socket={this.socket}\n          isSubscriber={this.state.isSubscriber}\n          roomId={this.state.roomId}\n          setChatDisabled={this.setChatDisabled}\n        />\n      </Grid.Column>\n    );\n    return (\n      <React.Fragment>\n        {!this.state.isAutoPlayable && (\n          <Modal inverted basic open>\n            <div style={{ display: 'flex', justifyContent: 'center' }}>\n              <Button\n                primary\n                size=\"large\"\n                onClick={() => {\n                  this.setState({ isAutoPlayable: true });\n                  this.setMute(false);\n                }}\n                icon\n                labelPosition=\"left\"\n              >\n                <Icon name=\"volume up\" />\n                Click to unmute\n              </Button>\n            </div>\n          </Modal>\n        )}\n        {this.state.multiStreamSelection && (\n          <MultiStreamModal\n            streams={this.state.multiStreamSelection}\n            setMedia={this.setMedia}\n            resetMultiSelect={this.resetMultiSelect}\n          />\n        )}\n        {this.state.isSubscribeModalOpen && (\n          <SubscribeModal\n            user={this.props.user}\n            isSubscriber={this.state.isSubscriber}\n            closeSubscribe={() =>\n              this.setState({ isSubscribeModalOpen: false })\n            }\n          />\n        )}\n        {this.state.isVBrowserModalOpen && (\n          <VBrowserModal\n            isSubscriber={this.state.isSubscriber}\n            subscribeButton={subscribeButton}\n            closeModal={() => this.setState({ isVBrowserModalOpen: false })}\n            startVBrowser={this.startVBrowser}\n            user={this.props.user}\n          />\n        )}\n        {this.state.error && <ErrorModal error={this.state.error} />}\n        {this.state.isErrorAuth && (\n          <PasswordModal\n            savedPasswords={this.state.savedPasswords}\n            roomId={this.state.roomId}\n          />\n        )}\n        {this.state.errorMessage && (\n          <Message\n            negative\n            header=\"Error\"\n            content={this.state.errorMessage}\n            style={{\n              position: 'fixed',\n              bottom: '10px',\n              right: '10px',\n              zIndex: 1000,\n            }}\n          ></Message>\n        )}\n        {this.state.successMessage && (\n          <Message\n            positive\n            header=\"Success\"\n            content={this.state.successMessage}\n            style={{\n              position: 'fixed',\n              bottom: '10px',\n              right: '10px',\n              zIndex: 1000,\n            }}\n          ></Message>\n        )}\n        <TopBar user={this.props.user} />\n        {\n          <Grid stackable celled=\"internally\">\n            <Grid.Row>\n              <Grid.Column\n                width={this.state.showRightBar ? 12 : 15}\n                className=\"fullHeightColumn\"\n              >\n                <div\n                  style={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    height: '100%',\n                  }}\n                >\n                  <ComboBox\n                    setMedia={this.setMedia}\n                    currentMedia={this.state.currentMedia}\n                    getMediaDisplayName={this.getMediaDisplayName}\n                    launchMultiSelect={this.launchMultiSelect}\n                    streamPath={this.state.settings.streamPath}\n                    mediaPath={this.state.settings.mediaPath}\n                    disabled={!this.haveLock()}\n                  />\n                  <Separator />\n                  <div className=\"mobileStack\" style={{ display: 'flex' }}>\n                    {this.screenShareStream && (\n                      <Button\n                        fluid\n                        className=\"toolButton\"\n                        icon\n                        labelPosition=\"left\"\n                        color=\"red\"\n                        onClick={this.stopScreenShare}\n                        disabled={sharer?.id !== this.socket?.id}\n                      >\n                        <Icon name=\"cancel\" />\n                        Stop Share\n                      </Button>\n                    )}\n                    {!this.screenShareStream && !sharer && !this.isVBrowser() && (\n                      <Popup\n                        content={`Share a tab or an application. Make sure to check \"Share audio\" for best results.`}\n                        trigger={\n                          <Button\n                            fluid\n                            className=\"toolButton\"\n                            disabled={!this.haveLock()}\n                            icon\n                            labelPosition=\"left\"\n                            color={'instagram'}\n                            onClick={this.setupScreenShare}\n                          >\n                            <Icon name={'slideshare'} />\n                            Screenshare\n                          </Button>\n                        }\n                      />\n                    )}\n                    {!this.screenShareStream && !sharer && !this.isVBrowser() && (\n                      <Popup\n                        content=\"Launch a shared virtual browser\"\n                        trigger={\n                          <Button\n                            fluid\n                            className=\"toolButton\"\n                            disabled={!this.haveLock()}\n                            icon\n                            labelPosition=\"left\"\n                            color=\"green\"\n                            onClick={() => {\n                              this.setState({ isVBrowserModalOpen: true });\n                            }}\n                          >\n                            <Icon name=\"desktop\" />\n                            VBrowser\n                          </Button>\n                        }\n                      />\n                    )}\n                    {this.isVBrowser() && (\n                      <Popup\n                        content=\"Choose the person controlling the VBrowser\"\n                        trigger={\n                          <Dropdown\n                            icon=\"keyboard\"\n                            labeled\n                            className=\"icon\"\n                            style={{ height: '36px' }}\n                            button\n                            value={this.state.controller}\n                            placeholder=\"No controller\"\n                            clearable\n                            onChange={this.changeController}\n                            selection\n                            disabled={!this.haveLock()}\n                            options={this.state.participants.map((p) => ({\n                              text: this.state.nameMap[p.id] || p.id,\n                              value: p.id,\n                            }))}\n                          ></Dropdown>\n                        }\n                      />\n                    )}\n                    {this.isVBrowser() && (\n                      <Dropdown\n                        icon=\"desktop\"\n                        labeled\n                        className=\"icon\"\n                        style={{ height: '36px' }}\n                        button\n                        disabled={!this.haveLock()}\n                        value={this.state.vBrowserResolution}\n                        onChange={(_e, data) =>\n                          this.setState({\n                            vBrowserResolution: data.value as string,\n                          })\n                        }\n                        selection\n                        options={[\n                          {\n                            text: '1080p (WatchParty Plus)',\n                            value: '1920x1080@30',\n                            disabled: !this.state.isVBrowserLarge,\n                          },\n                          {\n                            text: '720p',\n                            value: '1280x720@30',\n                          },\n                          {\n                            text: '576p',\n                            value: '1024x576@60',\n                          },\n                          {\n                            text: '486p',\n                            value: '864x486@60',\n                          },\n                          {\n                            text: '360p',\n                            value: '640x360@60',\n                          },\n                        ]}\n                      ></Dropdown>\n                    )}\n                    {this.isVBrowser() && (\n                      <Button\n                        fluid\n                        className=\"toolButton\"\n                        icon\n                        labelPosition=\"left\"\n                        color=\"red\"\n                        disabled={!this.haveLock()}\n                        onClick={this.stopVBrowser}\n                      >\n                        <Icon name=\"cancel\" />\n                        Stop VBrowser\n                      </Button>\n                    )}\n                    {!this.screenShareStream && !sharer && !this.isVBrowser() && (\n                      <Popup\n                        content=\"Stream your own video file\"\n                        trigger={\n                          <Button\n                            fluid\n                            className=\"toolButton\"\n                            disabled={!this.haveLock()}\n                            icon\n                            labelPosition=\"left\"\n                            onClick={this.setupFileShare}\n                          >\n                            <Icon name=\"file\" />\n                            File\n                          </Button>\n                        }\n                      />\n                    )}\n                    {false && (\n                      <SearchComponent\n                        setMedia={this.setMedia}\n                        type={'youtube'}\n                        streamPath={this.state.settings.streamPath}\n                        mediaPath={this.state.settings.mediaPath}\n                        disabled={!this.haveLock()}\n                      />\n                    )}\n                    {Boolean(this.state.settings.mediaPath) && (\n                      <SearchComponent\n                        setMedia={this.setMedia}\n                        type={'media'}\n                        streamPath={this.state.settings.streamPath}\n                        mediaPath={this.state.settings.mediaPath}\n                        disabled={!this.haveLock()}\n                      />\n                    )}\n                    {Boolean(this.state.settings.streamPath) && (\n                      <SearchComponent\n                        setMedia={this.setMedia}\n                        type={'stream'}\n                        streamPath={this.state.settings.streamPath}\n                        mediaPath={this.state.settings.mediaPath}\n                        launchMultiSelect={this.launchMultiSelect}\n                        disabled={!this.haveLock()}\n                      />\n                    )}\n                    {this.state.currentMedia && (\n                      <Popup\n                        content=\"Upload a .srt subtitle file for this video\"\n                        trigger={\n                          <Button\n                            fluid\n                            color=\"violet\"\n                            className=\"toolButton\"\n                            icon\n                            labelPosition=\"left\"\n                            onClick={this.setSubtitle}\n                            disabled={!this.haveLock()}\n                          >\n                            <Icon name=\"closed captioning\" />\n                            Subtitle\n                          </Button>\n                        }\n                      />\n                    )}\n                    {subscribeButton}\n                  </div>\n                  <Separator />\n                  <div\n                    id=\"fullScreenContainer\"\n                    className={\n                      this.state.fullScreen ? 'fullScreenContainer' : ''\n                    }\n                    style={{ flexGrow: 1 }}\n                  >\n                    <div id=\"playerContainer\">\n                      {(this.state.loading ||\n                        !this.state.currentMedia ||\n                        this.state.nonPlayableMedia) && (\n                        <div\n                          id=\"loader\"\n                          className=\"videoContent\"\n                          style={{\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                          }}\n                        >\n                          {this.state.loading && (\n                            <Dimmer active>\n                              <Loader>\n                                {this.isVBrowser()\n                                  ? 'Launching virtual browser. This can take up to a minute.'\n                                  : ''}\n                              </Loader>\n                            </Dimmer>\n                          )}\n                          {!this.state.loading && !this.state.currentMedia && (\n                            <Message\n                              color=\"yellow\"\n                              icon=\"hand point up\"\n                              header=\"You're not watching anything!\"\n                              content=\"Pick something to watch above.\"\n                            />\n                          )}\n                          {!this.state.loading &&\n                            this.state.nonPlayableMedia && (\n                              <Message\n                                color=\"red\"\n                                icon=\"frown\"\n                                header=\"It doesn't look like this is a media file!\"\n                                content=\"Maybe you meant to launch a VBrowser if you're trying to visit a web page?\"\n                              />\n                            )}\n                        </div>\n                      )}\n                      <iframe\n                        style={{\n                          display:\n                            this.isYouTube() && !this.state.loading\n                              ? 'block'\n                              : 'none',\n                        }}\n                        title=\"YouTube\"\n                        id=\"leftYt\"\n                        className=\"videoContent\"\n                        allowFullScreen\n                        frameBorder=\"0\"\n                        allow=\"autoplay\"\n                        src=\"https://www.youtube.com/embed/?enablejsapi=1&controls=0&rel=0\"\n                      />\n                      {this.isVBrowser() &&\n                      this.getVBrowserPass() &&\n                      this.getVBrowserHost() ? (\n                        <VBrowser\n                          username={this.socket.id}\n                          password={this.getVBrowserPass()}\n                          hostname={this.getVBrowserHost()}\n                          controlling={this.state.controller === this.socket.id}\n                          setLoadingFalse={this.setLoadingFalse}\n                          resolution={this.state.vBrowserResolution}\n                          doPlay={this.doPlay}\n                          setResolution={(data: string) =>\n                            this.setState({ vBrowserResolution: data })\n                          }\n                        />\n                      ) : (\n                        <video\n                          style={{\n                            display:\n                              this.isVideo() && !this.state.loading\n                                ? 'block'\n                                : 'none',\n                            width: '100%',\n                          }}\n                          id=\"leftVideo\"\n                        ></video>\n                      )}\n                      {this.state.fullScreen && this.state.currentMedia && (\n                        <div className=\"controlsContainer\">{controls}</div>\n                      )}\n                    </div>\n                    {this.state.fullScreen && (\n                      <div className=\"fullScreenChat\">{rightBar}</div>\n                    )}\n                  </div>\n                  {this.state.currentMedia && controls}\n                  {Boolean(this.state.total) && (\n                    <div>\n                      <Progress\n                        size=\"tiny\"\n                        color=\"green\"\n                        inverted\n                        value={this.state.downloaded}\n                        total={this.state.total}\n                        // indicating\n                        label={\n                          Math.min(\n                            (this.state.downloaded / this.state.total) * 100,\n                            100\n                          ).toFixed(2) +\n                          '% - ' +\n                          formatSpeed(this.state.speed) +\n                          ' - ' +\n                          this.state.connections +\n                          ' connections'\n                        }\n                      ></Progress>\n                    </div>\n                  )}\n                </div>\n                <Button\n                  style={{\n                    position: 'absolute',\n                    top: '50%',\n                    right: 'calc(0% - 18px)',\n                    zIndex: 900,\n                  }}\n                  circular\n                  size=\"mini\"\n                  icon={this.state.showRightBar ? 'angle right' : 'angle left'}\n                  onClick={() =>\n                    this.setState({ showRightBar: !this.state.showRightBar })\n                  }\n                />\n              </Grid.Column>\n              {rightBar}\n            </Grid.Row>\n          </Grid>\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nexport const Separator = () => <div style={{ height: '4px', flexShrink: 0 }} />;\n","import React from 'react';\nimport { Divider, Header, Icon, Step } from 'semantic-ui-react';\n\nimport { NewRoomButton } from '../TopBar';\nimport styles from './Home.module.css';\n\nexport const Home: React.FC = () => {\n  return (\n    <div>\n      <div className={styles.container}>\n        <Hero\n          heroText={'Watch videos in-sync with friends far away.'}\n          subText={'No registration or download required.'}\n          action={\n            <div style={{ marginTop: '8px', width: '160px' }}>\n              <NewRoomButton />\n            </div>\n          }\n          image={'/screenshot4.png'}\n        />\n        <Divider horizontal>\n          <Header inverted as=\"h4\">\n            <Icon name=\"film\" />\n            Multiple ways to watch\n          </Header>\n        </Divider>\n        <div className={styles.featureSection}>\n          <Feature\n            icon=\"slideshare\"\n            title={`Screensharing`}\n            text=\"Share a browser tab or an application.\"\n          />\n          <Feature\n            icon=\"desktop\"\n            title={`VBrowser`}\n            text=\"Launch a virtual browser in the cloud that all room members can view and control. No need to worry about slow upload speeds!\"\n          />\n          <Feature\n            icon=\"file\"\n            title={`File`}\n            text=\"Upload and stream your own file.\"\n          />\n          <Feature\n            icon=\"linkify\"\n            title={`URL`}\n            text=\"Paste in a URL for everyone to watch from.\"\n          />\n          <Feature\n            icon=\"youtube\"\n            title={`YouTube`}\n            text=\"Watch videos in-sync from YouTube.\"\n          />\n        </div>\n        <Hero\n          heroText={'React to moments together.'}\n          subText={\"Find moments of shared joy even when you're apart.\"}\n          image={'/screenshot18.png'}\n          color=\"green\"\n        />\n        <Divider horizontal>\n          <Header inverted as=\"h4\">\n            <Icon name=\"cogs\" />\n            Features\n          </Header>\n        </Divider>\n        <div className={styles.featureSection}>\n          <Feature\n            icon=\"sync\"\n            title=\"Synchronized\"\n            text=\"Starts, stops, and seeks are synchronized to everyone, so take those restroom and snack breaks without worrying about falling behind.\"\n          />\n          <Feature\n            icon=\"conversation\"\n            title=\"Chat\"\n            text=\"Chat with others in your room. Memes and inside jokes encouraged.\"\n          />\n          <Feature\n            icon=\"video\"\n            title=\"Video chat\"\n            text=\"Jump into video chat if there's something that you just can't express with text.\"\n          />\n        </div>\n        <Hero\n          heroText={'Theater mode.'}\n          subText={\n            'Bring video and chat front-and-center for minimal distractions.'\n          }\n          image={'/screenshot14.png'}\n        />\n        <Divider horizontal />\n        <div\n          style={{\n            padding: '30px',\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n          }}\n        >\n          <div className={styles.heroText}>Get started!</div>\n          <div className={styles.featureSection}>\n            <Step.Group style={{ margin: '8px' }}>\n              <Step>\n                <Icon name=\"certificate\" />\n                <Step.Content>\n                  <Step.Title>1.</Step.Title>\n                  <Step.Description>Make a room</Step.Description>\n                </Step.Content>\n              </Step>\n\n              <Step>\n                <Icon name=\"group\" />\n                <Step.Content>\n                  <Step.Title>2.</Step.Title>\n                  <Step.Description>Share link with friends</Step.Description>\n                </Step.Content>\n              </Step>\n\n              <Step>\n                <Icon name=\"film\" />\n                <Step.Content>\n                  <Step.Title>3.</Step.Title>\n                  <Step.Description>Pick something to watch</Step.Description>\n                </Step.Content>\n              </Step>\n\n              <Step>\n                <Icon name=\"thumbs up outline\" />\n                <Step.Content>\n                  <Step.Title>4.</Step.Title>\n                  <Step.Description>Success!</Step.Description>\n                </Step.Content>\n              </Step>\n            </Step.Group>\n          </div>\n          <div style={{ width: '160px' }}>\n            <NewRoomButton />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst Feature = ({\n  icon,\n  text,\n  title,\n}: {\n  icon: string;\n  text: string;\n  title: string;\n}) => {\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flex: '1 1 0px',\n        flexDirection: 'column',\n        alignItems: 'center',\n        padding: '10px',\n        minWidth: '180px',\n      }}\n    >\n      <Icon fitted size=\"huge\" name={icon as any} />\n      <h4 className={styles.featureTitle}>{title}</h4>\n      <div className={styles.featureText}>{text}</div>\n    </div>\n  );\n};\n\nconst Hero = ({\n  heroText,\n  subText,\n  action,\n  image,\n  color,\n}: {\n  heroText?: string;\n  subText?: string;\n  action?: React.ReactNode;\n  image?: string;\n  color?: string;\n}) => {\n  return (\n    <div className={`${styles.hero} ${color === 'green' ? styles.green : ''}`}>\n      <div className={styles.heroInner}>\n        <div style={{ padding: '30px', flex: '1 1 0' }}>\n          <div className={styles.heroText}>{heroText}</div>\n          <div className={styles.subText}>{subText}</div>\n          {action}\n        </div>\n        <div\n          style={{\n            flex: '1 1 0',\n          }}\n        >\n          <img\n            alt=\"hero\"\n            style={{ width: '100%', borderRadius: '10px' }}\n            src={image}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\n\nconst mdStyle = { color: 'white', margin: '50px', maxWidth: '800px' };\n\nexport const Privacy = () => {\n  return (\n    <div style={mdStyle}>\n      <ReactMarkdown>\n        {`\nPrivacy Policy\n====\n\nRooms\n----\n- By default, rooms are temporary and expire after one day of inactivity.\n- Users have the option of making a room permanent, which can be undone at any time.\n- We do not keep logs of the content that users watch.\n\nPersonal Information\n----\n- You are not required to register to use the service, but you have the option to sign in with an email or authentication provider, which will be used to display your name and picture in the rooms you join.\n- If you provide this information, we may use it to contact you regarding your use of the service, or to link your account to a subscription.\n- We do not sell personal information to third parties.\n- You have the right to request deletion of your user data, in accordance with various laws governing data protection. Please contact support@watchparty.me to request user data deletion.\n- Payment information is handled by providers such as Stripe. We do not collect or access financial information directly.\n\nCookies\n----\n- We use services such as Google Analytics to measure usage. These services may set cookies or other information locally on your device.\n\nVirtual Browsers\n----\n- Virtual machines are recycled after each session ends and any data on them is destroyed.\n- Your commands are encrypted while in-transit to the virtual machine.\n\nYouTube\n----\n- The service provides the ability to search and play YouTube videos. Google/YouTube may use data provided to the search service in accordance with the [Google Privacy Policy](https://policies.google.com/privacy).\n`}\n      </ReactMarkdown>\n    </div>\n  );\n};\n\nexport const Terms = () => {\n  return (\n    <div style={mdStyle}>\n      <ReactMarkdown>\n        {`\nTerms of Service\n====\nBy using this service you agree to the following terms:\n- You are over 13 years of age\n- Your use of the service may be terminated if you are found to be sharing illegal or infringing content\n- The service provides no guarantee of uptime or availability\n- You use the service at your own risk of encountering objectionable content, as we do not actively moderate rooms unless content is found to be illegal or infringing\n\nSubscriptions\n----\n- If you are dissatisfied with the service for any reason or believe you have been charged in error, please contact support@watchparty.me.\n- We will provide a full refund of the most recent payment, no questions asked.\n\nYouTube\n----\nThe service provides the ability to search and play YouTube videos. By using the YouTube search you agree to the [YouTube Terms of Service](https://www.youtube.com/t/terms).\n`}\n      </ReactMarkdown>\n    </div>\n  );\n};\n\nexport const FAQ = () => {\n  return (\n    <div style={mdStyle}>\n      <ReactMarkdown>\n        {`\nFAQ\n====\nWhat's a VBrowser?\n----\nA virtual browser (VBrowser) is a browser running in the cloud that a room's members can connect to. Everyone in the room sees the same thing, so it's a great way to watch videos or collaborate on tasks together.\n\nWhy did my VBrowser session stop?\n----\nVBrowsers will terminate automatically if no one is in the room for a while.\nVBrowser sessions are also limited to a maximum of 3 hours for free users, and 12 hours for subscribers.\n\nDoes everyone in the room need to be a subscriber to get the benefits?\n----\nNo, only the person who created the VBrowser needs to be.\n\nHow do I access sites that have a \"not available\" message in the VBrowser?\n----\nSome sites may block traffic that's detected as coming from certain geographic regions. You may need to install an extension like Hola VPN inside the virtual browser.\n\nHow come I'm not getting any audio when screensharing?\n----\nTo share audio, you must be using Chrome or Edge, sharing a tab (not application), and check a small checkbox at the bottom-left of the share screen dialog.\n\nIs there a limit to how many people can be in a room?\n----\nCurrently there isn't a hard limit, although the service hasn't been tested with more than 15 people or so. Screensharing and filesharing rely on one person uploading to everyone else, so it may not work well with large room sizes.\n`}\n      </ReactMarkdown>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport const Footer = () => (\n  <div style={{ margin: '1em', fontSize: '14px', color: 'white' }}>\n    <Link style={{ color: 'white' }} to=\"/terms\">\n      Terms\n    </Link>\n    {'  '}\n    <Link style={{ color: 'white' }} to=\"/privacy\">\n      Privacy\n    </Link>\n    {'  '}\n    <Link style={{ color: 'white' }} to=\"/faq\">\n      FAQ\n    </Link>\n  </div>\n);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import './index.css';\nimport 'semantic-ui-css/semantic.min.css';\n\nimport React, { lazy, Suspense } from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Route } from 'react-router-dom';\n\nimport App from './components/App';\nimport { Home } from './components/Home';\nimport { Privacy, Terms, FAQ } from './components/PrivacyTerms/PrivacyTerms';\nimport { TopBar } from './components/TopBar/TopBar';\nimport { Footer } from './components/Footer/Footer';\nimport * as serviceWorker from './serviceWorker';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\n\nconst Debug = lazy(() => import('./components/Debug/Debug'));\n\nconst firebaseConfig = process.env.REACT_APP_FIREBASE_CONFIG;\nif (firebaseConfig) {\n  firebase.initializeApp(JSON.parse(firebaseConfig));\n}\n\nclass WatchParty extends React.Component {\n  public state = {\n    user: undefined,\n  };\n  async componentDidMount() {\n    if (firebaseConfig) {\n      firebase.auth().onAuthStateChanged(async (user: firebase.User | null) => {\n        if (user) {\n          // console.log(user);\n          this.setState({ user });\n        }\n      });\n    }\n  }\n  render() {\n    return (\n      <React.StrictMode>\n        <BrowserRouter>\n          <Route\n            path=\"/\"\n            exact\n            render={(props) => {\n              if (props.location?.hash) {\n                return <App user={this.state.user} />;\n              }\n              return (\n                <React.Fragment>\n                  <TopBar user={this.state.user} hideNewRoom />\n                  <Home />\n                  <Footer />\n                </React.Fragment>\n              );\n            }}\n          />\n          <Route\n            path=\"/r/:vanity\"\n            exact\n            render={(props) => {\n              return (\n                <App\n                  user={this.state.user}\n                  vanity={props.match.params.vanity}\n                />\n              );\n            }}\n          />\n          <Route path=\"/terms\">\n            <TopBar user={this.state.user} />\n            <Terms />\n            <Footer />\n          </Route>\n          <Route path=\"/privacy\">\n            <TopBar user={this.state.user} />\n            <Privacy />\n            <Footer />\n          </Route>\n          <Route path=\"/faq\">\n            <TopBar user={this.state.user} />\n            <FAQ />\n            <Footer />\n          </Route>\n          <Route path=\"/debug\">\n            <TopBar user={this.state.user} />\n            <Suspense fallback={null}>\n              <Debug />\n            </Suspense>\n            <Footer />\n          </Route>\n        </BrowserRouter>\n      </React.StrictMode>\n    );\n  }\n}\nReactDOM.render(<WatchParty />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}